{"version":3,"mappings":"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","names":["queryClient","QueryClient","failureCount","error","logger","data","variables","context","clearCacheOnLogout","THRESHOLDS","sendToAnalytics","metric","name","value","rating","threshold","initPerformanceMonitoring","onCLS","onFCP","onLCP","onTTFB","onINP","ToastProvider","ToastPrimitives.Provider","ToastViewport","React.forwardRef","className","props","ref","jsx","ToastPrimitives.Viewport","cn","toastVariants","cva","Toast","variant","ToastPrimitives.Root","ToastAction","ToastPrimitives.Action","ToastClose","ToastPrimitives.Close","X","ToastTitle","ToastPrimitives.Title","ToastDescription","ToastPrimitives.Description","Toaster","toasts","useToast","id","title","description","action","jsxs","theme","useTheme","Sonner","EmptyState","Icon","motion","Button","ProtectedRoute","children","allowedUserTypes","requiredRoles","requireAll","user","profile","hasRole","loading","useAuth","Lock","Alert","ShieldAlert","AlertTitle","AlertDescription","role","Fragment","Navigate","QUICK_SUGGESTIONS","SarahChatbot","isOpen","setIsOpen","useState","messages","setMessages","input","setInput","isLoading","setIsLoading","conversationId","setConversationId","sessionId","scrollRef","useRef","useEffect","sendMessage","messageText","userMessage","prev","session","supabase","response","errorData","reader","_a","decoder","assistantMessage","currentConversationId","done","lines","line","parsed","newMessages","handleQuickSuggestion","suggestion","Avatar","AvatarFallback","ScrollArea","message","index","Loader2","e","Input","Send","usePrefetchRoutes","location","useLocation","useQueryClient","prefetchTimer","useKeyboardShortcuts","navigate","useNavigate","handleKeyPress","useFavoriteCount","favorites","useFavorites","yesterday","newFavorites","fav","NavButton","memo","item","isActive","longPressProps","useLongPress","toast","triggerHapticFeedback","Link","Badge","BottomNavigation","isMobile","useIsMobile","unreadCount","useNotifications","navItems","useMemo","Home","Search","Heart","MessageSquare","User","path","BottomNavigation$1","containerVariants","itemVariants","PropertyDetailSkeleton","Shimmer","PageSkeleton","i","Card","CardHeader","CardContent","useCurrentTime","currentTime","setCurrentTime","timer","formatTime","useCallback","options","timeOptions","formatDate","getDayPeriod","hour","ABIDJAN_NEIGHBORHOODS","CACHE_KEY","CACHE_TIMESTAMP_KEY","CACHE_DURATION","detectNeighborhood","lat","lng","neighborhood","useGeolocation","setLocation","setError","fetchLocation","cachedLocation","cachedTime","position","resolve","reject","latitude","longitude","locationData","err","FALLBACK_WEATHER","AUTO_REFRESH_INTERVAL","useWeather","weather","setWeather","fetchWeather","cachedWeather","apiError","weatherData","intervalId","Widget","hasError","onClick","ariaLabel","Skeleton","AlertTriangle","LocationWidget","onRefresh","MapPin","WEATHER_ICONS","Sun","Moon","Cloud","CloudSun","CloudMoon","CloudRain","CloudLightning","CloudSnow","WeatherWidget","WeatherIcon","ClockWidget","dayPeriod","showSeconds","setShowSeconds","Clock","ContextBar","isCollapsed","setIsCollapsed","locationLoading","locationError","refreshLocation","weatherLoading","weatherError","refreshWeather","handleLocationRefresh","handleWeatherRefresh","ChevronDown","ChevronUp","ScrollProgress","scrollYProgress","useScroll","scaleX","useSpring","InstallPWA","deferredPrompt","setDeferredPrompt","showInstall","setShowInstall","isInstalled","setIsInstalled","standalone","handleBeforeInstall","dismissed","handleInstall","outcome","handleDismiss","AnimatePresence","Smartphone","Download","SplashScreen","show","setShow","isStandalone","hasShownSplash","RippleButton","ripples","setRipples","handleClick","rect","x","y","newRipple","r","ripple","CountUp","duration","suffix","prefix","isInView","useInView","spring","display","useTransform","current","PremiumHero","searchQuery","setSearchQuery","city","setCity","propertyType","setPropertyType","budget","setBudget","handleSearch","params","queryString","Sparkles","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","DollarSign","PlusCircle","_","Users","ShieldCheck","FileSignature","MobileHero","setIsMobile","checkMobile","mobileWidth","mobileUserAgent","Slider","SliderPrimitive.Root","SliderPrimitive.Track","SliderPrimitive.Range","SliderPrimitive.Thumb","PropertyFiltersComponent","onFilterChange","onReset","filters","setFilters","priceRange","setPriceRange","surfaceRange","setSurfaceRange","handleFilterChange","key","newFilters","handleReset","activeFiltersCount","Collapsible","CollapsibleTrigger","Filter","CardTitle","CollapsibleContent","Label","CITIES","PROPERTY_TYPES","type","newRange","Checkbox","checked","baseClass","variants","PropertyCardSkeleton","FadeInView","delay","direction","directions","PropertyGrid","limit","showFilters","displayLimit","setDisplayLimit","sortBy","setSortBy","properties","isError","useQuery","filteredProperties","property","sortedProperties","a","b","displayedProperties","hasMore","handleLoadMore","PropertyCard","ArrowDown","OnboardingModal","handleClose","handleChoice","Dialog","DialogContent","DialogHeader","DialogTitle","DialogDescription","Building","Building2","Index","MainLayout","Helmet","TwoFactorVerify","onVerified","onCancel","code","setCode","setLoading","useBackupCode","setUseBackupCode","isRateLimited","setIsRateLimited","attemptCount","setAttemptCount","handleVerify","success","factors","totpFactor","challenge","verify","Shield","CardDescription","getClientIP","getDeviceFingerprint","canvas","ctx","canvasHash","fingerprint","formatRetryAfter","retryAfter","diff","minutes","hours","QuickNav","currentLinks","BookOpen","HelpCircle","to","label","NavigationHelp","backTo","backLabel","showHome","ArrowLeft","signUpSchema","z.object","z.string","z.enum","signInSchema","Auth","signUp","signIn","searchParams","useSearchParams","userTypeFromUrl","signUpEmail","setSignUpEmail","signUpPassword","setSignUpPassword","fullName","setFullName","userType","setUserType","signUpErrors","setSignUpErrors","signInEmail","setSignInEmail","signInPassword","setSignInPassword","signInErrors","setSignInErrors","show2FA","setShow2FA","pendingUserId","setPendingUserId","showSignInPassword","setShowSignInPassword","showSignUpPassword","setShowSignUpPassword","isBlocked","setIsBlocked","blockMessage","setBlockMessage","setRetryAfter","handleSignUp","validation","errors","field","handleSignIn","ipAddress","rateLimitCheck","currentUser","roles","handle2FAVerified","handle2FACancel","handleForgotPassword","handleGoogleSignIn","errorMessage","_b","Navbar","Footer","DynamicBreadcrumb","LazyIllustration","getIllustrationPath","Tabs","TabsList","TabsTrigger","TabsContent","EyeOff","Eye","CardFooter","KentePattern","AkanPattern","useFocusTrap","containerRef","container","focusableElements","firstElement","lastElement","handleTab","MobileFilters","currentFilters","step","setStep","validateFilters","handleApply","finalFilters","handleResetSection","handleResetAll","steps","Sheet","SheetTrigger","SheetContent","SheetHeader","SheetTitle","s","idx","val","ChevronLeft","ChevronRight","usePrefersReducedMotion","prefersReducedMotion","setPrefersReducedMotion","mediaQuery","handleChange","PullToRefresh","isRefreshing","setIsRefreshing","lastRefresh","startY","hapticTriggered","api","handleTouchStart","handleTouchMove","deltaY","resistance","adjustedY","handleTouchEnd","animated","getStoredMapboxToken","MAP_STYLES","PropertyMap","onPropertyClick","onLocationSearch","showLocationButton","mapContainer","map","markers","mapReady","setMapReady","locating","setLocating","mapStyle","setMapStyle","mapboxToken","setMapboxToken","tokenInput","setTokenInput","handleSaveToken","mapboxgl","addMarkersToMap","marker","validProperties","p","el","popupHTML","popup","bounds","handleStyleChange","newStyle","handleLocateMe","Locate","Map","Satellite","Layers","shouldShowProperty","currentUserId","parsePropertyError","errorCode","propertyService","uniqueProperties","acc","enhancedError","results","beforeFilter","before","publicData","publicError","ownerId","updates","propertyId","favoritesResult","applicationsResult","propertyResult","views","applications","radiusKm","calculateDistance","__vitePreload","geo","useProperties","hasCoordinates","lat1","lon1","lat2","lon2","dLat","toRad","dLon","degrees","getCurrentLocation","usePropertyFilters","setFilteredProperties","userLocation","setUserLocation","filtered","toggleFavorite","isFavorite","refetch","viewMode","setViewMode","maxPrice","handleFavoriteClick","Grid","List","SearchIcon","RecommendationsSection","CertifiedBadge","clickable","content","Certification","features","FileCheck","feature","resetPasswordSchema","ResetPassword","password","setPassword","confirmPassword","setConfirmPassword","showPassword","setShowPassword","setErrors","sessionReady","setSessionReady","subscription","event","timeout","handleResetPassword","formattedErrors","TenantScoreBadge","score","showIcon","size","config","Star","sizeClasses","iconSizes","TenantScoreExplanation","currentScore","oneciVerified","faceVerified","criteria","Camera","FileText","maxScore","earnedPoints","sum","c","potentialGain","DialogTrigger","Progress","criterion","CheckCircle2","XCircle","NOTIFICATION_CATEGORIES","Bell","NotificationPreferences","preferences","setPreferences","fetchPreferences","existingCategories","missingCategories","cat","newPreferences","category","inserted","updatePreference","pref","Switch","Mail","useMfaStatus","status","setStatus","backupCodes","codesError","totalCodes","unusedCodes","hasMfa","isRequired","graceDays","validRoles","policies","policiesError","requiredPolicy","complianceStatus","createdAt","expiresAt","now","daysRemaining","BackupCodesDisplay","codes","onDownload","handleDownload","blob","url","TwoFactorSetup","mfaEnabled","mfaRequired","unusedCodesCount","statusLoading","refreshStatus","qrCode","setQrCode","secret","setSecret","factorId","setFactorId","verificationCode","setVerificationCode","setBackupCodes","showDisableDialog","setShowDisableDialog","enableTwoFactor","uri","generateBackupCodes","saveBackupCodes","userId","hashBuffer","hashHex","verifyAndEnable","disableTwoFactor","Check","AlertDialog","AlertDialogContent","AlertDialogHeader","AlertDialogTitle","AlertDialogDescription","AlertDialogFooter","AlertDialogCancel","AlertDialogAction","QRCodeSVG","useRoleSwitch","refreshProfile","activeRoles","setActiveRoles","retryCount","setRetryCount","fetchActiveRoles","parseError","match","switchRole","newRole","retry","authError","parsedError","toastDescription","clearError","addAvailableRole","roleConfig","Briefcase","RoleSelectorFull","currentRole","availableRoles","hasMultipleRoles","switching","setSwitching","handleSwitch","filteredRoles","AlertCircle","RoleIcon","isSwitching","PropertyAlertsSettings","alerts","setAlerts","showNewAlertForm","setShowNewAlertForm","newAlert","setNewAlert","fetchAlerts","createAlert","toggleAlert","alertId","deleteAlert","getCriteriaLabel","parts","BellOff","alert","Trash2","Plus","Profile","tenantScore","setTenantScore","preferencesModalOpen","setPreferencesModalOpen","matchingPropertiesCount","setMatchingPropertiesCount","notifyNewMatches","setNotifyNewMatches","phone","setPhone","bio","setBio","scoreData","prefsData","query","count","notifPrefs","handleNotificationToggle","enabled","handleUpdateProfile","userTypeLabels","AvatarImage","Award","Textarea","Settings","Bed","Bath","PreferencesModal","Favorites","favoritesLoading","setProperties","fetchFavoriteProperties","VerificationStatus","verification","setVerification","getStatusIcon","getStatusBadge","SimpleProgress","FaceVerification","onSuccess","onSkip","cniImage","setCniImage","selfieImage","setSelfieImage","isCapturing","setIsCapturing","isVerifying","setIsVerifying","verificationResult","setVerificationResult","videoRef","canvasRef","streamRef","startCamera","stream","stopCamera","track","captureSelfie","video","imageData","handleCniUpload","file","reset","Upload","CheckCircle","ErrorBoundary","Component","__publicField","errorInfo","Sentry.captureException","ERROR_MESSAGES","RefreshCw","Verification","ONECIForm","GuestMessagesInbox","activeTab","setActiveTab","fetchGuestMessages","updateMessageStatus","messageId","newStatus","msg","getStatusLabel","getStatusBadgeVariant","filteredMessages","getTabCount","MailOpen","ExternalLink","formatDistanceToNow","fr","Ban","NotFound","countdown","setCountdown","ReputationBadge","totalReviews","showDetails","getScoreColor","getScoreLabel","star","ReviewsList","reviewType","reviews","setReviews","fetchReviews","transformedData","review","_c","_d","UserReviews","useParams","setProfile","reputation","setReputation","fetchUserData","profileData","profileError","reputationData","Publier","ANSUT_FULL_NAME","ANSUT_SHORT_NAME","ANSUT_MINISTRY","PRODUCT_NAME","TARGET_STYLES","kpis","Zap","TrendingUp","withoutMonToit","withMonToit","KPICard","kpi","FeatureCard","styles","illustrationKey","ComparisonList","items","positive","iconColor","textStyle","Features","monToitLogo","UserPlus","testimonials","Testimonials","autoplayPlugin","Autoplay","Carousel","CarouselContent","testimonial","CarouselItem","Quote","CarouselPrevious","CarouselNext","APropos","LegalPage","lastUpdated","Conditions","Confidentialite","MentionsLegales","TenantScoreBreakdown","breakdown","recommendation","getRecommendationBadge","rec","breakdownItems","CreditCard","percentage","DossierValidationQueue","onUpdate","setApplications","notes","setNotes","filterStatus","setFilterStatus","fetchApplications","getUrgencyStatus","app","hoursRemaining","in48h","handleAction","applicationId","reason","v","urgency","TiersVerificationQueue","verifications","setVerifications","fetchVerifications","TiersDeConfianceDashboard","stats","setStats","fetchStats","validated","pending","rejected","urgent","processed","avgTime","totalTime","Accordion","AccordionPrimitive.Root","AccordionItem","AccordionPrimitive.Item","AccordionTrigger","AccordionPrimitive.Header","AccordionPrimitive.Trigger","AccordionContent","AccordionPrimitive.Content","CertificationFAQ","pricingPlans","Tarifs","plan","borderColor","featureIndex","PopulateImages","isGenerating","setIsGenerating","progress","setProgress","generateImagesForProperties","fetchError","localResults","successCount","ImageIcon","result","DigitalCertificate","certificate","setCertificate","generating","setGenerating","fetchCertificate","handleGenerateCertificate","Info","SignatureStatus","operationId","onComplete","setErrorMessage","checkStatus","celebrateLeaseSigned","interval","getStatusText","getStatusDescription","canSignElectronically","leaseId","lease","handleCryptoNeoError","ElectronicSignature","onSignatureComplete","signatureType","setSignatureType","signing","setSigning","setOperationId","canSign","setCanSign","validationMessage","setValidationMessage","isLandlord","hasSignedSimple","hasSignedElectronic","validateSignature","handleSimpleSign","handleElectronicSign","errorHandling","TestCryptoNeo","testLease","setTestLease","generatingPdf","setGeneratingPdf","loadTestData","leases","cert","handleGeneratePdf","PlayCircle","Guide","faqSearch","setFaqSearch","filterFAQItems","searchLower","UserCheck","filteredCompteItems","filteredCertifItems","Phone","ExploreMap","lazy","FeaturedProperties","Explorer","Suspense","journeys","Wallet","HowItWorks","journey","JourneyIcon","iconBgColor","stepIndex","StepIcon","HowItWorksPage","trustMetrics","coreFeatures","featuredTestimonials","UnifiedTrustSection","AboutPage","ABIDJAN_POI","POI_CATEGORIES","getPriceColor","avgPrice","EnhancedMap","showHeatmap","showClusters","activePOILayers","showNeighborhoods","onNeighborhoodClick","poiMarkers","clusterIndex","updateClusters","points","Supercluster","zoom","clusters","cluster","clusterId","leaves","leaf","expansionZoom","sourceId","layerId","poi","labelLayerId","polygon","color","handleLocate","ZoomIn","ZoomOut","style","AMENITIES","MapFilters","onFiltersChange","isExpanded","setIsExpanded","handlePriceChange","values","handleBedroomsChange","handlePropertyTypeChange","handleAmenityToggle","amenity","newAmenities","formatPrice","price","SlidersHorizontal","Separator","POILayer","activeLayers","onLayerToggle","NeighborhoodCard","onClose","overallScore","Bus","ShoppingCart","GraduationCap","char","useMapProperties","refetchInterval","filteredData","useMapStats","SmartMapV2","setShowHeatmap","setShowNeighborhoods","setActivePOILayers","selectedNeighborhood","setSelectedNeighborhood","queryFilters","handlePropertyClick","handlePOILayerToggle","layer","l","handleNeighborhoodClick","MapIcon","Activity","MapPinned","MandatesHelp","Edit","Wrench","PropertyDetail","n","Offline","Dashboard","AdminDashboard","AdminCertifications","OwnerDashboard","TenantDashboard","AgencyDashboard","MyMandates","MyProperties","AddProperty","EditProperty","Messages","Application","Applications","Leases","Payments","Maintenance","ScheduleVisit","AppContent","prevLocation","setDirection","routes","currentIndex","prevIndex","Routes","Route","PropertyApplications","App","HelmetProvider","QueryClientProvider","TooltipProvider","BrowserRouter","AuthProvider","Sentry.init","Sentry.browserTracingIntegration","Sentry.replayIntegration","hint","createRoot","React"],"ignoreList":[],"sources":["../../src/lib/queryClient.ts","../../src/lib/analytics.ts","../../src/components/ui/toast.tsx","../../src/components/ui/toaster.tsx","../../src/components/ui/sonner.tsx","../../src/components/ui/empty-state.tsx","../../src/components/ProtectedRoute.tsx","../../src/components/SarahChatbot.tsx","../../src/hooks/usePrefetchRoutes.ts","../../src/hooks/useKeyboardShortcuts.ts","../../src/hooks/useFavoriteCount.ts","../../src/components/navigation/BottomNavigation.tsx","../../src/components/LoadingFallback.tsx","../../src/hooks/useCurrentTime.ts","../../src/hooks/useGeolocation.ts","../../src/hooks/useWeather.ts","../../src/components/context-bar/Widget.tsx","../../src/components/context-bar/LocationWidget.tsx","../../src/components/context-bar/WeatherWidget.tsx","../../src/components/context-bar/ClockWidget.tsx","../../src/components/ContextBar.tsx","../../src/components/animations/ScrollProgress.tsx","../../src/components/pwa/InstallPWA.tsx","../../src/components/pwa/SplashScreen.tsx","../../src/components/animations/RippleButton.tsx","../../src/components/animations/CountUp.tsx","../../src/components/PremiumHero.tsx","../../src/components/MobileHero.tsx","../../src/hooks/useIsMobile.ts","../../src/components/ui/slider.tsx","../../src/components/PropertyFilters.tsx","../../src/components/animations/Skeleton.tsx","../../src/components/properties/PropertyCardSkeleton.tsx","../../src/components/animations/FadeInView.tsx","../../src/components/PropertyGrid.tsx","../../src/components/OnboardingModal.tsx","../../src/pages/Index.tsx","../../src/components/auth/TwoFactorVerify.tsx","../../src/lib/ipUtils.ts","../../src/components/navigation/QuickNav.tsx","../../src/components/navigation/NavigationHelp.tsx","../../src/pages/Auth.tsx","../../src/components/ui/african-patterns.tsx","../../src/hooks/useFocusTrap.ts","../../src/components/properties/MobileFilters.tsx","../../src/hooks/usePrefersReducedMotion.ts","../../src/components/properties/PullToRefresh.tsx","../../src/components/PropertyMap.tsx","../../src/services/propertyService.ts","../../src/hooks/useProperties.ts","../../src/lib/geo.ts","../../src/hooks/usePropertyFilters.ts","../../src/pages/Search.tsx","../../src/components/ui/certified-badge.tsx","../../src/pages/Certification.tsx","../../src/pages/ResetPassword.tsx","../../src/components/ui/tenant-score-badge.tsx","../../src/components/verification/TenantScoreExplanation.tsx","../../src/components/notifications/NotificationPreferences.tsx","../../src/hooks/useMfaStatus.tsx","../../src/components/auth/BackupCodesDisplay.tsx","../../src/components/auth/TwoFactorSetup.tsx","../../src/hooks/useRoleSwitch.tsx","../../src/components/profile/RoleSelectorFull.tsx","../../src/components/settings/PropertyAlertsSettings.tsx","../../src/pages/Profile.tsx","../../src/pages/Favorites.tsx","../../src/components/verification/VerificationStatus.tsx","../../src/components/verification/FaceVerification.tsx","../../src/components/ErrorBoundary.tsx","../../src/pages/Verification.tsx","../../src/components/owner/GuestMessagesInbox.tsx","../../src/pages/NotFound.tsx","../../src/components/reviews/ReputationBadge.tsx","../../src/components/reviews/ReviewsList.tsx","../../src/pages/UserReviews.tsx","../../src/pages/Publier.tsx","../../src/components/Features.tsx","../../src/components/Testimonials.tsx","../../src/pages/APropos.tsx","../../src/pages/Legal.tsx","../../src/pages/Conditions.tsx","../../src/pages/Confidentialite.tsx","../../src/pages/MentionsLegales.tsx","../../src/components/application/TenantScoreBreakdown.tsx","../../src/components/tiers/DossierValidationQueue.tsx","../../src/components/tiers/TiersVerificationQueue.tsx","../../src/pages/TiersDeConfianceDashboard.tsx","../../src/components/ui/accordion.tsx","../../src/pages/CertificationFAQ.tsx","../../src/pages/Tarifs.tsx","../../src/pages/PopulateImages.tsx","../../src/components/leases/DigitalCertificate.tsx","../../src/components/leases/SignatureStatus.tsx","../../src/lib/signature-validation.ts","../../src/lib/cryptoneo-error-handler.ts","../../src/components/leases/ElectronicSignature.tsx","../../src/pages/TestCryptoNeo.tsx","../../src/pages/Guide.tsx","../../src/pages/Explorer.tsx","../../src/components/HowItWorks.tsx","../../src/pages/HowItWorksPage.tsx","../../src/components/UnifiedTrustSection.tsx","../../src/pages/AboutPage.tsx","../../src/data/abidjanPOI.ts","../../src/data/abidjanNeighborhoods.ts","../../src/components/map/EnhancedMap.tsx","../../src/components/map/MapFilters.tsx","../../src/components/map/POILayer.tsx","../../src/components/map/NeighborhoodCard.tsx","../../src/hooks/useMapProperties.ts","../../src/pages/SmartMapV2.tsx","../../src/pages/MandatesHelp.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["import { QueryClient } from '@tanstack/react-query';\nimport { logger } from '@/services/logger';\n\n//  SCURIT : Liste des cls de cache sensibles  ne JAMAIS persister\nconst SENSITIVE_QUERY_KEYS = [\n  'user_verifications',\n  'admin_audit_logs',\n  'sensitive_data_access_log',\n  'admin_get_guest_messages',\n  'user_phone',\n  'payment_methods',\n];\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      // Performance optimizations\n      staleTime: 5 * 60 * 1000, // 5 minutes\n      gcTime: 10 * 60 * 1000, // 10 minutes (anciennement cacheTime)\n      \n      //  SCURIT : Ne pas refetch automatiquement sur focus pour viter les requtes inutiles\n      refetchOnWindowFocus: false,\n      refetchOnReconnect: true,\n      \n      // Retry logic intelligent\n      retry: (failureCount, error: any) => {\n        //  SCURIT : Ne pas retry sur les erreurs d'authentification\n        if (error?.status === 401 || error?.status === 403) {\n          logger.warn('Erreur d\\'authentification dtecte', { error });\n          return false;\n        }\n        \n        // Ne pas retry sur les 404\n        if (error?.status === 404) return false;\n        \n        return failureCount < 2;\n      },\n    },\n    mutations: {\n      //  SCURIT : Logger toutes les mutations pour audit\n      onSuccess: (data, variables, context) => {\n        logger.info('Mutation successful', {\n          context: context || 'unknown',\n          // Ne pas logger les donnes sensibles\n        });\n      },\n      onError: (error: any, variables, context) => {\n        logger.error('Mutation failed', {\n          message: error?.message,\n          context: context || 'unknown',\n        });\n      },\n    },\n  },\n});\n\n//  SCURIT : Fonction pour nettoyer le cache des donnes sensibles\nexport const clearSensitiveCache = () => {\n  SENSITIVE_QUERY_KEYS.forEach(key => {\n    queryClient.removeQueries({ queryKey: [key] });\n  });\n  logger.info('Sensitive cache cleared');\n};\n\n//  SCURIT : Nettoyer le cache lors de la dconnexion\nexport const clearCacheOnLogout = () => {\n  queryClient.clear();\n  logger.info('All cache cleared on logout');\n};\n","import { onCLS, onFCP, onLCP, onTTFB, onINP, Metric } from 'web-vitals';\nimport { logger } from '@/services/logger';\n\nconst THRESHOLDS = {\n  CLS: 0.1,\n  FCP: 1800,\n  LCP: 2500,\n  TTFB: 800,\n  INP: 200,\n};\n\nconst sendToAnalytics = (metric: Metric) => {\n  const { name, value, rating } = metric;\n  \n  // Log to console in development\n  if (import.meta.env.DEV) {\n    console.log(`[Web Vitals] ${name}:`, {\n      value: Math.round(value),\n      rating,\n      threshold: THRESHOLDS[name as keyof typeof THRESHOLDS],\n    });\n  }\n\n  // Log to our logger service\n  logger.info(`Web Vital: ${name}`, { value, rating });\n\n  //  Envoyer  Google Analytics en production\n  if (import.meta.env.PROD && typeof window !== 'undefined' && (window as any).gtag) {\n    (window as any).gtag('event', name, {\n      value: Math.round(value),\n      metric_rating: rating,\n      metric_delta: Math.round(value),\n      event_category: 'Web Vitals',\n      non_interaction: true,\n    });\n  }\n\n  // Check if metric exceeds threshold\n  const threshold = THRESHOLDS[name as keyof typeof THRESHOLDS];\n  if (threshold && value > threshold) {\n    logger.warn(` ${name} exceeds threshold`, {\n      value: Math.round(value),\n      threshold,\n      delta: Math.round(value - threshold),\n    });\n  }\n};\n\nexport const initPerformanceMonitoring = () => {\n  // Core Web Vitals\n  onCLS(sendToAnalytics);\n  onFCP(sendToAnalytics);\n  onLCP(sendToAnalytics);\n  onTTFB(sendToAnalytics);\n  \n  // Interaction metrics (INP replaces FID)\n  onINP(sendToAnalytics);\n\n  logger.info('Performance monitoring initialized');\n};\n\nexport const trackCustomMetric = (name: string, value: number, additionalData?: Record<string, any>) => {\n  logger.info(`Custom Metric: ${name}`, { value, ...additionalData });\n};\n","import * as React from \"react\";\nimport * as ToastPrimitives from \"@radix-ui/react-toast\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\nimport { X } from \"lucide-react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst ToastProvider = ToastPrimitives.Provider;\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className,\n    )}\n    {...props}\n  />\n));\nToastViewport.displayName = ToastPrimitives.Viewport.displayName;\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive: \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n);\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> & VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return <ToastPrimitives.Root ref={ref} className={cn(toastVariants({ variant }), className)} {...props} />;\n});\nToast.displayName = ToastPrimitives.Root.displayName;\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50\",\n      className,\n    )}\n    {...props}\n  />\n));\nToastAction.displayName = ToastPrimitives.Action.displayName;\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className,\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n));\nToastClose.displayName = ToastPrimitives.Close.displayName;\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title ref={ref} className={cn(\"text-sm font-semibold\", className)} {...props} />\n));\nToastTitle.displayName = ToastPrimitives.Title.displayName;\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description ref={ref} className={cn(\"text-sm opacity-90\", className)} {...props} />\n));\nToastDescription.displayName = ToastPrimitives.Description.displayName;\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>;\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>;\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n};\n","import { useToast } from \"@/hooks/use-toast\";\nimport { Toast, ToastClose, ToastDescription, ToastProvider, ToastTitle, ToastViewport } from \"@/components/ui/toast\";\n\nexport function Toaster() {\n  const { toasts } = useToast();\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && <ToastDescription>{description}</ToastDescription>}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        );\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  );\n}\n","import { useTheme } from \"next-themes\";\nimport { Toaster as Sonner, toast } from \"sonner\";\n\ntype ToasterProps = React.ComponentProps<typeof Sonner>;\n\nconst Toaster = ({ ...props }: ToasterProps) => {\n  const { theme = \"system\" } = useTheme();\n\n  return (\n    <Sonner\n      theme={theme as ToasterProps[\"theme\"]}\n      className=\"toaster group\"\n      position=\"top-center\"\n      duration={2000}\n      toastOptions={{\n        classNames: {\n          toast:\n            \"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg animate-in slide-in-from-top-2 fade-in\",\n          description: \"group-[.toast]:text-muted-foreground\",\n          actionButton: \"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground\",\n          cancelButton: \"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground\",\n        },\n      }}\n      {...props}\n    />\n  );\n};\n\nexport { Toaster, toast };\n","import { motion } from \"framer-motion\";\nimport { LucideIcon } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { cn } from \"@/lib/utils\";\n\ninterface EmptyStateProps {\n  icon: LucideIcon;\n  title: string;\n  description?: string;\n  action?: {\n    label: string;\n    onClick: () => void;\n  };\n  className?: string;\n}\n\nexport const EmptyState = ({ \n  icon: Icon, \n  title, \n  description, \n  action,\n  className \n}: EmptyStateProps) => {\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.4 }}\n      className={cn(\n        \"flex flex-col items-center justify-center text-center py-10 px-4\",\n        className\n      )}\n    >\n      <motion.div\n        initial={{ scale: 0 }}\n        animate={{ scale: 1 }}\n        transition={{ delay: 0.2, type: \"spring\", stiffness: 200 }}\n        className=\"mb-6\"\n      >\n        <div className=\"relative\">\n          <div className=\"absolute inset-0 bg-primary/20 rounded-full blur-2xl\" />\n          <Icon className=\"h-16 w-16 text-primary relative\" strokeWidth={1.5} />\n        </div>\n      </motion.div>\n\n      <motion.h3\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        transition={{ delay: 0.3 }}\n        className=\"text-2xl font-semibold mb-2\"\n      >\n        {title}\n      </motion.h3>\n\n      {description && (\n        <motion.p\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          transition={{ delay: 0.4 }}\n          className=\"text-muted-foreground max-w-md mb-6\"\n        >\n          {description}\n        </motion.p>\n      )}\n\n      {action && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          transition={{ delay: 0.5 }}\n        >\n          <Button onClick={action.onClick} size=\"lg\" variant=\"default\">\n            {action.label}\n          </Button>\n        </motion.div>\n      )}\n    </motion.div>\n  );\n};\n","import { useAuth } from '@/hooks/useAuth';\nimport { Navigate } from 'react-router-dom';\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert';\nimport { ShieldAlert, Lock } from 'lucide-react';\nimport { motion } from 'framer-motion';\nimport { EmptyState } from '@/components/ui/empty-state';\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n  allowedUserTypes?: ('locataire' | 'proprietaire' | 'agence' | 'admin_ansut')[];\n  requiredRoles?: string[];\n  requireAll?: boolean;\n}\n\nconst ProtectedRoute = ({ \n  children, \n  allowedUserTypes,\n  requiredRoles,\n  requireAll = false \n}: ProtectedRouteProps) => {\n  const { user, profile, hasRole, loading } = useAuth();\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen page-background\">\n        <motion.div\n          initial={{ opacity: 0, scale: 0.8 }}\n          animate={{ opacity: 1, scale: 1 }}\n          transition={{ duration: 0.3 }}\n        >\n          <div className=\"relative\">\n            <div className=\"absolute inset-0 bg-primary/20 rounded-full blur-xl animate-pulse\" />\n            <Lock className=\"h-16 w-16 text-primary animate-pulse relative\" />\n          </div>\n        </motion.div>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return (\n      <>\n        <div className=\"min-h-screen page-background flex items-center justify-center\">\n          <EmptyState\n            icon={Lock}\n            title=\"Connexion requise\"\n            description=\"Vous devez tre connect pour accder  cette page. Redirection en cours...\"\n          />\n        </div>\n        <Navigate to=\"/auth\" replace />\n      </>\n    );\n  }\n\n  // Vrification des user_types\n  if (allowedUserTypes && profile && !allowedUserTypes.includes(profile.user_type)) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center p-4\">\n        <Alert variant=\"destructive\" className=\"max-w-md\">\n          <ShieldAlert className=\"h-5 w-5\" />\n          <AlertTitle>Accs refus</AlertTitle>\n          <AlertDescription>\n            Votre type de compte ne permet pas d'accder  cette page.\n          </AlertDescription>\n        </Alert>\n      </div>\n    );\n  }\n\n  // Vrification des rles\n  if (requiredRoles && requiredRoles.length > 0) {\n    const hasAccess = requireAll\n      ? requiredRoles.every(role => hasRole(role))\n      : requiredRoles.some(role => hasRole(role));\n\n    if (!hasAccess) {\n      return (\n        <div className=\"min-h-screen flex items-center justify-center p-4\">\n          <Alert variant=\"destructive\" className=\"max-w-md\">\n            <ShieldAlert className=\"h-5 w-5\" />\n            <AlertTitle>Accs refus</AlertTitle>\n            <AlertDescription>\n              Vous n'avez pas les permissions ncessaires pour accder  cette page.\n            </AlertDescription>\n          </Alert>\n        </div>\n      );\n    }\n  }\n\n  return <>{children}</>;\n};\n\nexport default ProtectedRoute;\n","import { useState, useEffect, useRef } from \"react\";\nimport { MessageCircle, X, Send, Loader2 } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { supabase } from \"@/lib/supabase\";\nimport { logger } from \"@/services/logger\";\n\ninterface Message {\n  role: 'user' | 'assistant';\n  content: string;\n}\n\nconst QUICK_SUGGESTIONS = [\n  \"Comment crer mon dossier ?\",\n  \"Qu'est-ce qu'ANSUT ?\",\n  \"Comment publier un bien ?\",\n  \"Quels sont les tarifs ?\",\n];\n\nexport const SarahChatbot = () => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [messages, setMessages] = useState<Message[]>([\n    {\n      role: 'assistant',\n      content: \" Bonjour ! Je suis Sarrah, votre assistante Mon Toit. Comment puis-je vous aider aujourd'hui ?\"\n    }\n  ]);\n  const [input, setInput] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [conversationId, setConversationId] = useState<string | null>(null);\n  const [sessionId] = useState(() => crypto.randomUUID());\n  const scrollRef = useRef<HTMLDivElement>(null);\n  const { user } = useAuth();\n\n  useEffect(() => {\n    if (scrollRef.current) {\n      scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\n    }\n  }, [messages]);\n\n  const sendMessage = async (messageText: string) => {\n    if (!messageText.trim() || isLoading) return;\n\n    const userMessage: Message = { role: 'user', content: messageText };\n    setMessages(prev => [...prev, userMessage]);\n    setInput(\"\");\n    setIsLoading(true);\n\n    try {\n      const { data: { session } } = await supabase.auth.getSession();\n      \n      const response = await fetch(\n        `${import.meta.env.VITE_SUPABASE_URL}/functions/v1/sarah-chat`,\n        {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            ...(session?.access_token && {\n              'Authorization': `Bearer ${session.access_token}`\n            }),\n          },\n          body: JSON.stringify({\n            message: messageText,\n            conversationId,\n            sessionId\n          }),\n        }\n      );\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Erreur de communication');\n      }\n\n      const reader = response.body?.getReader();\n      const decoder = new TextDecoder();\n      let assistantMessage = \"\";\n      let currentConversationId = conversationId;\n\n      setMessages(prev => [...prev, { role: 'assistant', content: '' }]);\n\n      while (true) {\n        const { done, value } = await reader!.read();\n        if (done) break;\n\n        const chunk = decoder.decode(value);\n        const lines = chunk.split('\\n');\n\n        for (const line of lines) {\n          if (line.startsWith('data: ')) {\n            const data = line.slice(6);\n            if (data === '[DONE]') continue;\n\n            try {\n              const parsed = JSON.parse(data);\n              \n              if (parsed.conversationId && !currentConversationId) {\n                currentConversationId = parsed.conversationId;\n                setConversationId(currentConversationId);\n              }\n\n              if (parsed.content) {\n                assistantMessage += parsed.content;\n                setMessages(prev => {\n                  const newMessages = [...prev];\n                  newMessages[newMessages.length - 1] = {\n                    role: 'assistant',\n                    content: assistantMessage\n                  };\n                  return newMessages;\n                });\n              }\n            } catch (e) {\n              // Ignore parse errors\n            }\n          }\n        }\n      }\n    } catch (error) {\n      logger.error('Error sending Sarah chat message', { error });\n      setMessages(prev => [\n        ...prev.slice(0, -1),\n        {\n          role: 'assistant',\n          content: \"Dsole, j'ai rencontr un problme. Pouvez-vous ressayer ?\"\n        }\n      ]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleQuickSuggestion = (suggestion: string) => {\n    sendMessage(suggestion);\n  };\n\n  return (\n    <>\n      {/* Floating Button */}\n      <Button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"fixed bottom-6 right-6 h-14 w-14 rounded-full shadow-lg hover:scale-110 transition-transform z-50 bg-gradient-to-br from-primary to-secondary\"\n        size=\"icon\"\n      >\n        {isOpen ? <X className=\"h-6 w-6\" /> : <span className=\"text-2xl\"></span>}\n      </Button>\n\n      {/* Chat Window */}\n      {isOpen && (\n        <div className=\"fixed bottom-24 right-6 w-96 h-[600px] bg-background border rounded-lg shadow-2xl flex flex-col z-50 animate-in slide-in-from-bottom-5\">\n          {/* Header */}\n          <div className=\"flex items-center gap-3 p-4 border-b bg-primary text-primary-foreground rounded-t-lg\">\n            <Avatar className=\"h-10 w-10 bg-gradient-to-br from-primary to-secondary\">\n              <AvatarFallback className=\"bg-transparent text-primary-foreground\">\n                <span className=\"text-2xl\"></span>\n              </AvatarFallback>\n            </Avatar>\n            <div className=\"flex-1\">\n              <h3 className=\"font-semibold\">Sarrah</h3>\n              <p className=\"text-xs opacity-90\">Assistante Mon Toit</p>\n            </div>\n          </div>\n\n          {/* Messages */}\n          <ScrollArea className=\"flex-1 p-4\" ref={scrollRef}>\n            <div className=\"space-y-4\">\n              {messages.map((message, index) => (\n                <div\n                  key={index}\n                  className={`flex gap-2 ${\n                    message.role === 'user' ? 'justify-end' : 'justify-start'\n                  }`}\n                >\n                  {message.role === 'assistant' && (\n                    <Avatar className=\"h-8 w-8 mt-1 bg-gradient-to-br from-primary to-secondary\">\n                      <AvatarFallback className=\"bg-transparent text-primary-foreground\">\n                        <span className=\"text-xl\"></span>\n                      </AvatarFallback>\n                    </Avatar>\n                  )}\n                  <div\n                    className={`max-w-[80%] rounded-lg p-3 ${\n                      message.role === 'user'\n                        ? 'bg-primary text-primary-foreground'\n                        : 'bg-muted'\n                    }`}\n                  >\n                    <p className=\"text-sm whitespace-pre-wrap\">{message.content}</p>\n                  </div>\n                </div>\n              ))}\n              {isLoading && (\n                <div className=\"flex gap-2 justify-start\">\n                  <Avatar className=\"h-8 w-8 mt-1 bg-gradient-to-br from-primary to-secondary\">\n                    <AvatarFallback className=\"bg-transparent text-primary-foreground\">\n                      <span className=\"text-xl\"></span>\n                    </AvatarFallback>\n                  </Avatar>\n                  <div className=\"bg-muted rounded-lg p-3\">\n                    <Loader2 className=\"h-4 w-4 animate-spin\" />\n                  </div>\n                </div>\n              )}\n            </div>\n          </ScrollArea>\n\n          {/* Quick Suggestions */}\n          {messages.length === 1 && !isLoading && (\n            <div className=\"p-3 border-t bg-muted/50\">\n              <p className=\"text-xs text-muted-foreground mb-2\"> Suggestions :</p>\n              <div className=\"flex flex-wrap gap-2\">\n                {QUICK_SUGGESTIONS.map((suggestion, index) => (\n                  <Button\n                    key={index}\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => handleQuickSuggestion(suggestion)}\n                    className=\"text-xs h-7\"\n                  >\n                    {suggestion}\n                  </Button>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Input */}\n          <div className=\"p-4 border-t\">\n            <form\n              onSubmit={(e) => {\n                e.preventDefault();\n                sendMessage(input);\n              }}\n              className=\"flex gap-2\"\n            >\n              <Input\n                value={input}\n                onChange={(e) => setInput(e.target.value)}\n                placeholder=\"Votre message...\"\n                disabled={isLoading}\n                className=\"flex-1\"\n              />\n              <Button type=\"submit\" size=\"icon\" disabled={isLoading || !input.trim()}>\n                <Send className=\"h-4 w-4\" />\n              </Button>\n            </form>\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n","import { useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { useQueryClient } from '@tanstack/react-query';\nimport { supabase } from '@/lib/supabase';\nimport { useAuth } from '@/hooks/useAuth';\n\nexport const usePrefetchRoutes = () => {\n  const location = useLocation();\n  const queryClient = useQueryClient();\n  const { user } = useAuth();\n\n  useEffect(() => {\n    //  SCURIT : Prcharger uniquement si l'utilisateur est authentifi\n    if (!user) return;\n\n    // Page d'accueil  Prcharger proprits populaires (optimis)\n    if (location.pathname === '/') {\n      //  Attendre que la page soit interactive avant de prcharger\n      const prefetchTimer = setTimeout(() => {\n        queryClient.prefetchQuery({\n          queryKey: ['properties', 'public', { limit: 5 }],\n          queryFn: async () => {\n            const { data } = await supabase\n              .from('properties')\n              .select('id, title, price, location, main_image, status, moderation_status, view_count')\n              .eq('moderation_status', 'approved')\n              .eq('status', 'disponible')\n              .order('view_count', { ascending: false })\n              .limit(5);\n            return data;\n          },\n          staleTime: 5 * 60 * 1000,\n        });\n      }, 2000);\n\n      return () => clearTimeout(prefetchTimer);\n    }\n\n    //  SCURIT : Ne JAMAIS prcharger de donnes sensibles\n    // (applications, messages, donnes d'administration)\n  }, [location.pathname, queryClient, user]);\n};\n","import { useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\n/**\n * Hook pour grer les raccourcis clavier globaux\n * Amliore l'accessibilit keyboard-only users\n */\nexport const useKeyboardShortcuts = () => {\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const handleKeyPress = (e: KeyboardEvent) => {\n      // Ignorer si on est dans un input/textarea\n      if (\n        e.target instanceof HTMLInputElement ||\n        e.target instanceof HTMLTextAreaElement\n      ) {\n        return;\n      }\n\n      // Ctrl/Cmd + K : Ouvrir recherche\n      if ((e.ctrlKey || e.metaKey) && e.key === 'k') {\n        e.preventDefault();\n        navigate('/recherche');\n      }\n\n      // Escape : Retour arrire\n      if (e.key === 'Escape') {\n        navigate(-1);\n      }\n\n      // H : Retour accueil\n      if (e.key === 'h' && !e.ctrlKey && !e.metaKey) {\n        navigate('/');\n      }\n\n      // S : Ouvrir recherche\n      if (e.key === 's' && !e.ctrlKey && !e.metaKey) {\n        navigate('/recherche');\n      }\n\n      // P : Ouvrir profil\n      if (e.key === 'p' && !e.ctrlKey && !e.metaKey) {\n        navigate('/profil');\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyPress);\n    return () => document.removeEventListener('keydown', handleKeyPress);\n  }, [navigate]);\n};\n","import { useFavorites } from './useFavorites';\n\n/**\n * Hook to track new favorites count (last 24 hours)\n * Uses the existing useFavorites hook\n */\nexport const useFavoriteCount = () => {\n  const { favorites } = useFavorites();\n  \n  // Count favorites added in the last 24 hours\n  const yesterday = new Date();\n  yesterday.setDate(yesterday.getDate() - 1);\n  \n  const newFavorites = favorites.filter(fav => {\n    // Since favorites is just an array of IDs, we count all for now\n    // In a real scenario, you'd fetch the created_at from the database\n    return true;\n  }).length;\n\n  // Return count only if there are new favorites\n  return newFavorites > 0 ? newFavorites : 0;\n};\n","import { Home, Search, Heart, MessageSquare, User } from \"lucide-react\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useIsMobile } from \"@/hooks/use-mobile\";\nimport { useNotifications } from \"@/hooks/useNotifications\";\nimport { useFavoriteCount } from \"@/hooks/useFavoriteCount\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { cn } from \"@/lib/utils\";\nimport { memo, useMemo } from \"react\";\nimport { triggerHapticFeedback } from \"@/utils/haptics\";\nimport { useLongPress } from \"@/hooks/useLongPress\";\nimport { toast } from \"@/hooks/use-toast\";\n\ninterface NavItem {\n  label: string;\n  icon: typeof Home;\n  path: string;\n  ariaLabel: string;\n  badge?: number;\n}\n\ninterface NavButtonProps {\n  item: NavItem;\n  isActive: boolean;\n}\n\n// Composant spar pour chaque bouton de navigation (optimisation)\nconst NavButton = memo(({ item, isActive }: NavButtonProps) => {\n  const Icon = item.icon;\n  \n  // Feedback haptique cross-platform\n  const handleClick = () => {\n    triggerHapticFeedback('light');\n  };\n\n  // Long press handler for quick actions\n  const handleLongPress = () => {\n    if (item.path === '/messages') {\n      toast({\n        title: \"Actions rapides\",\n        description: \"Ouvrir un nouveau message\",\n      });\n    }\n  };\n\n  const longPressProps = useLongPress({\n    onLongPress: handleLongPress,\n    onClick: handleClick,\n    delay: 500,\n  });\n\n  return (\n    <Link\n      to={item.path}\n      {...longPressProps}\n      className={cn(\n        \"flex flex-col items-center justify-center gap-1 px-3 py-2 rounded-lg transition-all duration-200 active:scale-95 relative min-h-[44px] min-w-[44px] group touch-feedback\",\n        isActive \n          ? \"text-primary bg-primary/10\" \n          : \"text-muted-foreground hover:text-foreground hover:bg-muted/50 active:bg-muted\"\n      )}\n      aria-label={item.ariaLabel}\n      aria-current={isActive ? \"page\" : undefined}\n    >\n      <div className=\"relative\">\n        <Icon \n          className={cn(\n            \"h-5 w-5 transition-all duration-200\",\n            isActive && \"scale-110\",\n            !isActive && \"group-hover:scale-105\"\n          )}\n          aria-hidden=\"true\"\n        />\n        \n        {/* Badge de notification */}\n        {item.badge && item.badge > 0 && (\n          <Badge \n            variant=\"destructive\" \n            className=\"absolute -top-2 -right-2 h-4 min-w-4 px-1 flex items-center justify-center text-xs font-semibold animate-in zoom-in-50\"\n            role=\"status\"\n            aria-live=\"polite\"\n          >\n            <span className=\"sr-only\">{item.badge} notifications non lues</span>\n            {item.badge > 99 ? \"99+\" : item.badge}\n          </Badge>\n        )}\n      </div>\n      \n      <span \n        className={cn(\n          \"text-xs font-medium leading-none transition-all\",\n          isActive && \"font-semibold\"\n        )}\n      >\n        {item.label}\n      </span>\n      \n      {/* Indicateur d'tat actif amlior */}\n      {isActive && (\n        <div \n          className=\"absolute bottom-0 left-1/2 -translate-x-1/2 w-12 h-0.5 bg-primary rounded-t-full animate-in slide-in-from-bottom-1 duration-200\" \n        />\n      )}\n    </Link>\n  );\n});\n\nNavButton.displayName = \"NavButton\";\n\nconst BottomNavigation = () => {\n  const { user } = useAuth();\n  const location = useLocation();\n  const isMobile = useIsMobile();\n  const { unreadCount } = useNotifications();\n  const newFavorites = useFavoriteCount();\n\n  // Ne pas afficher sur desktop ou si l'utilisateur n'est pas connect\n  if (!isMobile || !user) return null;\n\n  // Configuration des items de navigation avec badges rels\n  const navItems: NavItem[] = useMemo(() => [\n    {\n      label: \"Accueil\",\n      icon: Home,\n      path: \"/\",\n      ariaLabel: \"Aller  l'accueil\",\n    },\n    {\n      label: \"Recherche\",\n      icon: Search,\n      path: \"/recherche\",\n      ariaLabel: \"Rechercher des proprits\",\n    },\n    {\n      label: \"Favoris\",\n      icon: Heart,\n      path: \"/favoris\",\n      ariaLabel: \"Voir mes favoris\",\n      badge: newFavorites > 0 ? newFavorites : undefined,\n    },\n    {\n      label: \"Messages\",\n      icon: MessageSquare,\n      path: \"/messages\",\n      ariaLabel: \"Messages\",\n      badge: unreadCount > 0 ? unreadCount : undefined,\n    },\n    {\n      label: \"Profil\",\n      icon: User,\n      path: \"/profil\",\n      ariaLabel: \"Voir mon profil\",\n    },\n  ], [unreadCount, newFavorites]);\n\n  // Fonction pour dterminer si un item est actif\n  const isActive = useMemo(() => {\n    return (path: string) => {\n      if (path === \"/\") return location.pathname === \"/\";\n      return location.pathname.startsWith(path);\n    };\n  }, [location.pathname]);\n\n  return (\n    <nav \n      className={cn(\n        \"fixed bottom-0 left-0 right-0 z-50\",\n        \"bg-background/95 backdrop-blur-md supports-[backdrop-filter]:bg-background/80\",\n        \"border-t border-border shadow-lg\",\n        \"safe-area-inset-bottom\",\n        \"animate-in slide-in-from-bottom-4 duration-300\"\n      )}\n      aria-label=\"Navigation principale mobile\"\n      role=\"navigation\"\n    >\n      <div className=\"flex items-center justify-around h-16 px-2 max-w-screen-xl mx-auto\">\n        {navItems.map((item) => (\n          <NavButton \n            key={item.path} \n            item={item} \n            isActive={isActive(item.path)} \n          />\n        ))}\n      </div>\n      \n      {/* Espace de scurit pour les appareils avec encoche/barre d'accueil */}\n      <div className=\"h-[env(safe-area-inset-bottom)]\" />\n    </nav>\n  );\n};\n\nexport default memo(BottomNavigation);\n","import { Shimmer } from '@/components/ui/shimmer';\nimport { Card, CardContent, CardHeader } from '@/components/ui/card';\nimport { motion } from 'framer-motion';\n\nconst containerVariants = {\n  hidden: { opacity: 0 },\n  visible: {\n    opacity: 1,\n    transition: { staggerChildren: 0.05 },\n  },\n};\n\nconst itemVariants = {\n  hidden: { y: 20, opacity: 0 },\n  visible: {\n    y: 0,\n    opacity: 1,\n    transition: { type: 'spring' as const, stiffness: 100 },\n  },\n};\n\nexport const PropertyDetailSkeleton = () => (\n  <motion.div \n    className=\"min-h-screen bg-background\"\n    variants={containerVariants}\n    initial=\"hidden\"\n    animate=\"visible\"\n  >\n    <div className=\"container mx-auto px-4 py-6 space-y-6\">\n      <motion.div variants={itemVariants}>\n        <Shimmer className=\"h-96 w-full rounded-2xl\" />\n      </motion.div>\n      <div className=\"grid md:grid-cols-3 gap-6\">\n        <div className=\"md:col-span-2 space-y-4\">\n          <motion.div variants={itemVariants}>\n            <Shimmer className=\"h-8 w-3/4\" />\n          </motion.div>\n          <motion.div variants={itemVariants}>\n            <Shimmer className=\"h-6 w-1/2\" />\n          </motion.div>\n          <motion.div variants={itemVariants}>\n            <Shimmer className=\"h-32 w-full\" />\n          </motion.div>\n        </div>\n        <div className=\"space-y-4\">\n          <motion.div variants={itemVariants}>\n            <Shimmer className=\"h-48 w-full rounded-xl\" />\n          </motion.div>\n          <motion.div variants={itemVariants}>\n            <Shimmer className=\"h-12 w-full rounded-xl\" />\n          </motion.div>\n        </div>\n      </div>\n    </div>\n  </motion.div>\n);\n\nexport const PageSkeleton = () => (\n  <motion.div \n    className=\"container mx-auto px-4 py-20\"\n    variants={containerVariants}\n    initial=\"hidden\"\n    animate=\"visible\"\n  >\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n      {[1, 2, 3, 4, 5, 6].map((i) => (\n        <motion.div key={i} variants={itemVariants}>\n          <Card className=\"overflow-hidden\">\n            <Shimmer className=\"aspect-video rounded-none\" />\n            <CardHeader className=\"p-4 sm:p-6 pb-3\">\n              <Shimmer className=\"h-6 w-full mb-2\" />\n              <Shimmer className=\"h-8 w-1/2\" />\n            </CardHeader>\n            <CardContent className=\"space-y-4 p-4 sm:p-6 pt-0\">\n              <Shimmer className=\"h-4 w-3/4\" />\n              <div className=\"flex gap-4\">\n                <Shimmer className=\"h-10 flex-1\" />\n                <Shimmer className=\"h-10 flex-1\" />\n                <Shimmer className=\"h-10 flex-1\" />\n              </div>\n              <Shimmer className=\"h-10 w-full\" />\n            </CardContent>\n          </Card>\n        </motion.div>\n      ))}\n    </div>\n  </motion.div>\n);\n","import { useState, useEffect, useCallback } from 'react';\n\ninterface TimeFormat {\n  includeSeconds?: boolean;\n}\n\ninterface CurrentTimeReturn {\n  formatTime: (options?: TimeFormat) => string;\n  formatDate: () => string;\n  dayPeriod: string;\n  currentTime: Date;\n}\n\nexport const useCurrentTime = (): CurrentTimeReturn => {\n  const [currentTime, setCurrentTime] = useState(new Date());\n\n  useEffect(() => {\n    const timer = setInterval(() => {\n      setCurrentTime(new Date());\n    }, 1000); // Update every second for smoother experience\n\n    return () => clearInterval(timer);\n  }, []);\n\n  const formatTime = useCallback((options?: TimeFormat) => {\n    const timeOptions: Intl.DateTimeFormatOptions = {\n      hour: '2-digit',\n      minute: '2-digit',\n      timeZone: 'Africa/Abidjan',\n      ...(options?.includeSeconds && { second: '2-digit' })\n    };\n    \n    return currentTime.toLocaleTimeString('fr-FR', timeOptions);\n  }, [currentTime]);\n\n  const formatDate = useCallback(() => {\n    return currentTime.toLocaleDateString('fr-FR', {\n      weekday: 'short',\n      day: '2-digit',\n      month: 'short',\n      timeZone: 'Africa/Abidjan'\n    });\n  }, [currentTime]);\n\n  const getDayPeriod = useCallback(() => {\n    const hour = currentTime.getHours();\n    if (hour < 12) return 'Matin';\n    if (hour < 18) return 'Aprs-midi';\n    return 'Soir';\n  }, [currentTime]);\n\n  return {\n    formatTime,\n    formatDate,\n    dayPeriod: getDayPeriod(),\n    currentTime\n  };\n};\n","import { useState, useEffect, useCallback } from 'react';\n\ninterface GeolocationData {\n  city: string;\n  neighborhood?: string;\n  country?: string;\n  latitude?: number;\n  longitude?: number;\n}\n\ninterface GeolocationReturn {\n  location: GeolocationData;\n  isLoading: boolean;\n  error: Error | null;\n  refresh: () => Promise<void>;\n}\n\nconst ABIDJAN_NEIGHBORHOODS = [\n  { name: 'Cocody', lat: 5.3599, lng: -3.9889, bounds: { latMin: 5.32, latMax: 5.40, lngMin: -4.02, lngMax: -3.95 } },\n  { name: 'Plateau', lat: 5.3244, lng: -4.0125, bounds: { latMin: 5.31, latMax: 5.34, lngMin: -4.03, lngMax: -4.00 } },\n  { name: 'Marcory', lat: 5.2869, lng: -3.9967, bounds: { latMin: 5.27, latMax: 5.31, lngMin: -4.01, lngMax: -3.98 } },\n  { name: 'Yopougon', lat: 5.3456, lng: -4.0889, bounds: { latMin: 5.30, latMax: 5.39, lngMin: -4.15, lngMax: -4.05 } },\n  { name: 'Abobo', lat: 5.4167, lng: -4.0167, bounds: { latMin: 5.38, latMax: 5.45, lngMin: -4.05, lngMax: -3.98 } },\n  { name: 'Adjam', lat: 5.3500, lng: -4.0333, bounds: { latMin: 5.33, latMax: 5.37, lngMin: -4.05, lngMax: -4.01 } },\n  { name: 'Treichville', lat: 5.2889, lng: -4.0089, bounds: { latMin: 5.27, latMax: 5.31, lngMin: -4.03, lngMax: -4.00 } },\n  { name: 'Koumassi', lat: 5.3000, lng: -3.9500, bounds: { latMin: 5.28, latMax: 5.32, lngMin: -3.97, lngMax: -3.93 } },\n  { name: 'Port-Bout', lat: 5.2500, lng: -3.9333, bounds: { latMin: 5.23, latMax: 5.27, lngMin: -3.96, lngMax: -3.91 } },\n  { name: 'Attcoub', lat: 5.3333, lng: -4.0500, bounds: { latMin: 5.31, latMax: 5.36, lngMin: -4.08, lngMax: -4.03 } }\n];\n\nconst CACHE_KEY = 'user_location';\nconst CACHE_TIMESTAMP_KEY = 'user_location_timestamp';\nconst CACHE_DURATION = 5 * 60 * 1000; // 5 minutes\n\nconst detectNeighborhood = (lat: number, lng: number): string | undefined => {\n  for (const neighborhood of ABIDJAN_NEIGHBORHOODS) {\n    if (\n      lat >= neighborhood.bounds.latMin &&\n      lat <= neighborhood.bounds.latMax &&\n      lng >= neighborhood.bounds.lngMin &&\n      lng <= neighborhood.bounds.lngMax\n    ) {\n      return neighborhood.name;\n    }\n  }\n  return undefined;\n};\n\nexport const useGeolocation = (): GeolocationReturn => {\n  const [location, setLocation] = useState<GeolocationData>({\n    city: 'Abidjan',\n    country: 'Cte d\\'Ivoire',\n    neighborhood: undefined\n  });\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<Error | null>(null);\n\n  const fetchLocation = useCallback(async () => {\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      // Check cache first (5 min)\n      const cachedLocation = localStorage.getItem(CACHE_KEY);\n      const cachedTime = localStorage.getItem(CACHE_TIMESTAMP_KEY);\n      \n      if (cachedLocation && cachedTime) {\n        const cacheAge = Date.now() - parseInt(cachedTime);\n        if (cacheAge < CACHE_DURATION) {\n          setLocation(JSON.parse(cachedLocation));\n          setIsLoading(false);\n          return;\n        }\n      }\n\n      if ('geolocation' in navigator) {\n        const position = await new Promise<GeolocationPosition>((resolve, reject) => {\n          navigator.geolocation.getCurrentPosition(resolve, reject, {\n            timeout: 5000,\n            maximumAge: CACHE_DURATION\n          });\n        });\n\n        const { latitude, longitude } = position.coords;\n        const neighborhood = detectNeighborhood(latitude, longitude);\n        \n        const locationData: GeolocationData = {\n          city: 'Abidjan',\n          country: 'Cte d\\'Ivoire',\n          neighborhood,\n          latitude,\n          longitude\n        };\n        \n        setLocation(locationData);\n        localStorage.setItem(CACHE_KEY, JSON.stringify(locationData));\n        localStorage.setItem(CACHE_TIMESTAMP_KEY, Date.now().toString());\n      } else {\n        setLocation({ \n          city: 'Abidjan',\n          country: 'Cte d\\'Ivoire'\n        });\n      }\n    } catch (err) {\n      setError(err as Error);\n      setLocation({ \n        city: 'Abidjan',\n        country: 'Cte d\\'Ivoire'\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchLocation();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []); // Execute once on mount to avoid infinite loop\n\n  return {\n    location,\n    isLoading,\n    error,\n    refresh: fetchLocation\n  };\n};\n","import { useState, useEffect, useCallback } from 'react';\nimport { supabase } from '@/lib/supabase';\nimport { logger } from '@/services/logger';\n\ninterface WeatherData {\n  temperature: number;\n  description: string;\n  icon: string;\n  humidity?: number;\n  windSpeed?: number;\n  feelsLike?: number;\n}\n\ninterface WeatherReturn {\n  weather: WeatherData;\n  isLoading: boolean;\n  error: Error | null;\n  refresh: () => Promise<void>;\n}\n\nconst FALLBACK_WEATHER: WeatherData = {\n  temperature: 28,\n  description: 'Ensoleill',\n  icon: 'sun',\n  humidity: 75,\n  windSpeed: 12\n};\n\nconst CACHE_KEY = 'weather_data';\nconst CACHE_TIMESTAMP_KEY = 'weather_timestamp';\nconst CACHE_DURATION = 30 * 60 * 1000; // 30 minutes\nconst AUTO_REFRESH_INTERVAL = 30 * 60 * 1000; // 30 minutes\n\n/**\n * Hook to fetch weather data for Abidjan with localStorage caching\n * Cache duration: 30 minutes\n * Auto-refresh: every 30 minutes\n * Falls back to default sunny weather if API fails\n */\nexport const useWeather = (): WeatherReturn => {\n  const [weather, setWeather] = useState<WeatherData>(FALLBACK_WEATHER);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<Error | null>(null);\n\n  const fetchWeather = useCallback(async () => {\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      // Check cache first (30 min)\n      const cachedWeather = localStorage.getItem(CACHE_KEY);\n      const cachedTime = localStorage.getItem(CACHE_TIMESTAMP_KEY);\n      \n      if (cachedWeather && cachedTime) {\n        const cacheAge = Date.now() - parseInt(cachedTime);\n        if (cacheAge < CACHE_DURATION) {\n          setWeather(JSON.parse(cachedWeather));\n          setIsLoading(false);\n          return;\n        }\n      }\n\n      const { data, error: apiError } = await supabase.functions.invoke('get-weather', {\n        body: { city: 'Abidjan' }\n      });\n\n      if (apiError) {\n        throw new Error('Weather API error');\n      }\n\n      if (data?.weather) {\n        const weatherData: WeatherData = {\n          ...data.weather,\n          feelsLike: data.weather.feelsLike || data.weather.temperature\n        };\n        \n        setWeather(weatherData);\n        localStorage.setItem(CACHE_KEY, JSON.stringify(weatherData));\n        localStorage.setItem(CACHE_TIMESTAMP_KEY, Date.now().toString());\n      } else {\n        setWeather(FALLBACK_WEATHER);\n      }\n    } catch (err) {\n      logger.warn('Weather fetch error', { error: err });\n      setError(err as Error);\n      setWeather(FALLBACK_WEATHER);\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  // Initial fetch on mount\n  useEffect(() => {\n    fetchWeather();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // Auto-refresh every 30 minutes (separate effect to avoid infinite loop)\n  useEffect(() => {\n    const intervalId = setInterval(() => {\n      fetchWeather();\n    }, AUTO_REFRESH_INTERVAL);\n\n    return () => clearInterval(intervalId);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return {\n    weather,\n    isLoading,\n    error,\n    refresh: fetchWeather\n  };\n};\n","import { cn } from '@/lib/utils';\nimport { Skeleton } from '@/components/ui/skeleton';\nimport { AlertTriangle } from 'lucide-react';\nimport type { WidgetProps } from './types';\nimport { logger } from '@/services/logger';\n\nexport const Widget = ({ \n  isLoading, \n  hasError, \n  onClick, \n  children, \n  ariaLabel\n}: Omit<WidgetProps, 'tooltip'>) => {\n  logger.debug('Widget rendering');\n  \n  return (\n    <button\n      onClick={onClick}\n      aria-label={ariaLabel}\n      className={cn(\n        \"group flex items-center gap-2 px-3 py-1.5 rounded-full transition-all duration-300\",\n        \"bg-background/40 hover:bg-background/60 hover:scale-105\",\n        \"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2\",\n        \"active:scale-95\",\n        hasError && \"border border-destructive/50\"\n      )}\n    >\n      {isLoading ? (\n        <>\n          <Skeleton className=\"h-4 w-4 rounded-full\" />\n          <Skeleton className=\"h-4 w-20\" />\n        </>\n      ) : hasError ? (\n        <>\n          <AlertTriangle className=\"h-4 w-4 text-destructive\" />\n          <span className=\"text-sm font-medium text-destructive\">Erreur</span>\n        </>\n      ) : (\n        children\n      )}\n    </button>\n  );\n};\n","import { MapPin } from 'lucide-react';\nimport { Widget } from './Widget';\nimport type { GeolocationData } from './types';\n\ninterface LocationWidgetProps {\n  location: GeolocationData;\n  isLoading: boolean;\n  error: Error | null;\n  onRefresh: () => void;\n}\n\nexport const LocationWidget = ({ \n  location, \n  isLoading, \n  error,\n  onRefresh \n}: LocationWidgetProps) => {\n  return (\n    <Widget\n      isLoading={isLoading}\n      hasError={!!error}\n      onClick={onRefresh}\n      ariaLabel=\"Localisation actuelle - Cliquer pour rafrachir\"\n    >\n      <MapPin className=\"h-4 w-4 text-primary group-hover:animate-pulse\" />\n      <span className=\"font-semibold text-sm\">{location.city}</span>\n      {location.neighborhood && (\n        <span className=\"text-xs text-muted-foreground hidden lg:inline\">\n           {location.neighborhood}\n        </span>\n      )}\n    </Widget>\n  );\n};\n","import { \n  Sun, \n  Cloud, \n  CloudRain, \n  CloudSnow, \n  CloudLightning, \n  CloudSun,\n  CloudMoon,\n  Moon\n} from 'lucide-react';\nimport { Widget } from './Widget';\nimport type { WeatherData } from './types';\n\nconst WEATHER_ICONS = {\n  'sun': Sun,\n  'moon': Moon,\n  'cloud': Cloud,\n  'cloud-sun': CloudSun,\n  'cloud-moon': CloudMoon,\n  'cloud-rain': CloudRain,\n  'cloud-lightning': CloudLightning,\n  'snowflake': CloudSnow\n};\n\ninterface WeatherWidgetProps {\n  weather: WeatherData;\n  isLoading: boolean;\n  error: Error | null;\n  onRefresh: () => void;\n}\n\nexport const WeatherWidget = ({ \n  weather, \n  isLoading, \n  error,\n  onRefresh \n}: WeatherWidgetProps) => {\n  const WeatherIcon = WEATHER_ICONS[weather.icon as keyof typeof WEATHER_ICONS] || Sun;\n\n  return (\n    <Widget\n      isLoading={isLoading}\n      hasError={!!error}\n      onClick={onRefresh}\n      ariaLabel=\"Mto actuelle - Cliquer pour rafrachir\"\n    >\n      <WeatherIcon className=\"h-4 w-4 text-warning group-hover:scale-110 transition-transform\" />\n      <span className=\"font-semibold text-sm\">{weather.temperature}C</span>\n      <span className=\"text-xs text-muted-foreground hidden sm:inline\">\n        {weather.description}\n      </span>\n    </Widget>\n  );\n};\n","import { useState } from 'react';\nimport { Clock } from 'lucide-react';\nimport { Widget } from './Widget';\n\ninterface ClockWidgetProps {\n  formatTime: (options?: { includeSeconds?: boolean }) => string;\n  formatDate: () => string;\n  dayPeriod: string;\n}\n\nexport const ClockWidget = ({ \n  formatTime, \n  formatDate, \n  dayPeriod \n}: ClockWidgetProps) => {\n  const [showSeconds, setShowSeconds] = useState(false);\n\n  return (\n    <Widget\n      onClick={() => setShowSeconds(!showSeconds)}\n      ariaLabel=\"Heure et date actuelles - Cliquer pour basculer l'affichage des secondes\"\n    >\n      <Clock className=\"h-4 w-4 text-primary group-hover:rotate-12 transition-transform\" />\n      <span className=\"font-semibold text-sm\">\n        {formatTime({ includeSeconds: showSeconds })}\n      </span>\n      <span className=\"text-xs text-muted-foreground\">\n        {formatDate()}\n      </span>\n      <span className=\"text-xs text-primary/70 hidden xl:inline\">\n         {dayPeriod}\n      </span>\n    </Widget>\n  );\n};\n","import { useState } from 'react';\nimport { useCurrentTime } from '@/hooks/useCurrentTime';\nimport { useGeolocation } from '@/hooks/useGeolocation';\nimport { useWeather } from '@/hooks/useWeather';\nimport { LocationWidget } from './context-bar/LocationWidget';\nimport { WeatherWidget } from './context-bar/WeatherWidget';\nimport { ClockWidget } from './context-bar/ClockWidget';\nimport { toast } from 'sonner';\nimport { Button } from '@/components/ui/button';\nimport { ChevronDown, ChevronUp } from 'lucide-react';\n\nconst ContextBar = () => {\n  const [isCollapsed, setIsCollapsed] = useState(true);\n  const { formatTime, formatDate, dayPeriod } = useCurrentTime();\n  const { location, isLoading: locationLoading, error: locationError, refresh: refreshLocation } = useGeolocation();\n  const { weather, isLoading: weatherLoading, error: weatherError, refresh: refreshWeather } = useWeather();\n\n  const handleLocationRefresh = async () => {\n    await refreshLocation();\n    toast.success('Localisation actualise');\n  };\n\n  const handleWeatherRefresh = async () => {\n    await refreshWeather();\n    toast.success('Mto actualise');\n  };\n\n  return (\n    <div \n      className=\"w-full bg-gradient-to-r from-primary/5 via-accent/10 to-primary/5 border-b border-border/50 backdrop-blur-md relative z-30\"\n      role=\"banner\"\n      aria-label=\"Barre d'informations contextuelles\"\n    >\n      {isCollapsed ? (\n        <div className=\"container mx-auto px-4 max-w-7xl\">\n          <div className=\"h-8 flex items-center justify-center\">\n            <Button \n              variant=\"ghost\" \n              size=\"sm\" \n              onClick={() => setIsCollapsed(false)}\n              className=\"text-xs text-muted-foreground hover:text-primary\"\n            >\n              <ChevronDown className=\"h-3 w-3 mr-1\" />\n              Infos contextuelles\n            </Button>\n          </div>\n        </div>\n      ) : (\n        <div className=\"container mx-auto px-4 max-w-7xl\">\n          <div className=\"py-3 flex flex-col gap-3\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-4 md:gap-6 text-sm flex-1 justify-center\">\n                <LocationWidget\n                  location={location}\n                  isLoading={locationLoading}\n                  error={locationError}\n                  onRefresh={handleLocationRefresh}\n                />\n\n                <span className=\"text-border/40\" aria-hidden=\"true\"></span>\n\n                <WeatherWidget\n                  weather={weather}\n                  isLoading={weatherLoading}\n                  error={weatherError}\n                  onRefresh={handleWeatherRefresh}\n                />\n\n                <span className=\"text-border/40 hidden md:inline\" aria-hidden=\"true\"></span>\n\n                <div className=\"hidden md:block\">\n                  <ClockWidget\n                    formatTime={formatTime}\n                    formatDate={formatDate}\n                    dayPeriod={dayPeriod}\n                  />\n                </div>\n              </div>\n              <Button \n                variant=\"ghost\" \n                size=\"sm\" \n                onClick={() => setIsCollapsed(true)}\n                className=\"text-xs text-muted-foreground hover:text-primary\"\n              >\n                <ChevronUp className=\"h-3 w-3\" />\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ContextBar;\n","import { motion, useScroll, useSpring } from 'framer-motion';\n\nexport const ScrollProgress = () => {\n  const { scrollYProgress } = useScroll();\n  const scaleX = useSpring(scrollYProgress, {\n    stiffness: 100,\n    damping: 30,\n    restDelta: 0.001\n  });\n\n  return (\n    <motion.div\n      className=\"fixed top-0 left-0 right-0 h-1 bg-gradient-to-r from-primary via-secondary to-primary z-50 origin-left\"\n      style={{ scaleX }}\n    />\n  );\n};\n\n","import { useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { X, Download, Smartphone } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\n/**\n * Prompt d'installation PWA\n * - Dtecte beforeinstallprompt\n * - Affiche un banner lgant\n * - Gre l'installation\n * - Se masque aprs installation ou refus\n */\nexport const InstallPWA = () => {\n  const [deferredPrompt, setDeferredPrompt] = useState<any>(null);\n  const [showInstall, setShowInstall] = useState(false);\n  const [isInstalled, setIsInstalled] = useState(false);\n\n  useEffect(() => {\n    // Vrifier si dj install\n    const checkInstalled = () => {\n      const standalone = \n        window.matchMedia('(display-mode: standalone)').matches ||\n        (window.navigator as any).standalone ||\n        document.referrer.includes('android-app://');\n      \n      setIsInstalled(standalone);\n    };\n\n    checkInstalled();\n\n    // couter l'vnement beforeinstallprompt\n    const handleBeforeInstall = (e: Event) => {\n      e.preventDefault();\n      setDeferredPrompt(e);\n      \n      // Ne pas afficher si dj refus rcemment\n      const dismissed = localStorage.getItem('pwa-install-dismissed');\n      if (!dismissed || Date.now() - parseInt(dismissed) > 7 * 24 * 60 * 60 * 1000) {\n        setShowInstall(true);\n      }\n    };\n\n    window.addEventListener('beforeinstallprompt', handleBeforeInstall);\n\n    // couter l'installation russie\n    window.addEventListener('appinstalled', () => {\n      setIsInstalled(true);\n      setShowInstall(false);\n      localStorage.removeItem('pwa-install-dismissed');\n    });\n\n    return () => {\n      window.removeEventListener('beforeinstallprompt', handleBeforeInstall);\n    };\n  }, []);\n\n  const handleInstall = async () => {\n    if (!deferredPrompt) return;\n\n    // Afficher le prompt natif\n    deferredPrompt.prompt();\n\n    // Attendre la rponse de l'utilisateur\n    const { outcome } = await deferredPrompt.userChoice;\n\n    if (outcome === 'accepted') {\n      console.log('PWA installe avec succs');\n      setShowInstall(false);\n    } else {\n      console.log('Installation PWA refuse');\n      handleDismiss();\n    }\n\n    // Rinitialiser le prompt\n    setDeferredPrompt(null);\n  };\n\n  const handleDismiss = () => {\n    setShowInstall(false);\n    localStorage.setItem('pwa-install-dismissed', Date.now().toString());\n  };\n\n  // Ne pas afficher si dj install ou pas de prompt\n  if (isInstalled || !showInstall) return null;\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ y: 100, opacity: 0 }}\n        animate={{ y: 0, opacity: 1 }}\n        exit={{ y: 100, opacity: 0 }}\n        transition={{ type: 'spring', stiffness: 300, damping: 30 }}\n        className=\"fixed bottom-20 left-4 right-4 md:left-auto md:right-4 md:max-w-md z-50\"\n      >\n        <div className=\"bg-gradient-to-r from-primary via-primary/90 to-secondary text-white p-4 rounded-2xl shadow-2xl border border-white/20 backdrop-blur-sm\">\n          {/* Bouton fermer */}\n          <button\n            onClick={handleDismiss}\n            className=\"absolute top-2 right-2 p-1 hover:bg-white/20 rounded-full transition-colors\"\n            aria-label=\"Fermer\"\n          >\n            <X className=\"h-4 w-4\" />\n          </button>\n\n          {/* Contenu */}\n          <div className=\"flex items-start gap-3 mb-3\">\n            <div className=\"bg-white/20 p-2 rounded-xl\">\n              <Smartphone className=\"h-6 w-6\" />\n            </div>\n            <div className=\"flex-1\">\n              <h3 className=\"font-bold text-lg mb-1\">\n                Installer Mon Toit\n              </h3>\n              <p className=\"text-sm text-white/90\">\n                Accdez rapidement  Mon Toit depuis votre cran d'accueil. \n                Exprience rapide et hors ligne.\n              </p>\n            </div>\n          </div>\n\n          {/* Avantages */}\n          <div className=\"grid grid-cols-3 gap-2 mb-3 text-xs\">\n            <div className=\"bg-white/10 rounded-lg p-2 text-center\">\n              <div className=\"font-semibold\"></div>\n              <div className=\"opacity-90\">Rapide</div>\n            </div>\n            <div className=\"bg-white/10 rounded-lg p-2 text-center\">\n              <div className=\"font-semibold\"></div>\n              <div className=\"opacity-90\">Native</div>\n            </div>\n            <div className=\"bg-white/10 rounded-lg p-2 text-center\">\n              <div className=\"font-semibold\"></div>\n              <div className=\"opacity-90\">Scuris</div>\n            </div>\n          </div>\n\n          {/* Boutons */}\n          <div className=\"flex gap-2\">\n            <Button\n              onClick={handleInstall}\n              className=\"flex-1 bg-white text-primary hover:bg-white/90 font-bold shadow-lg\"\n              size=\"lg\"\n            >\n              <Download className=\"h-4 w-4 mr-2\" />\n              Installer\n            </Button>\n            <Button\n              onClick={handleDismiss}\n              variant=\"ghost\"\n              className=\"text-white hover:bg-white/20\"\n              size=\"lg\"\n            >\n              Plus tard\n            </Button>\n          </div>\n        </div>\n      </motion.div>\n    </AnimatePresence>\n  );\n};\n\n","import { useEffect, useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Home } from 'lucide-react';\n\n/**\n * Splash Screen affich au dmarrage de la PWA\n * - Logo anim\n * - Gradient ivoirien\n * - Disparat aprs 2 secondes\n * - Uniquement en mode standalone (PWA installe)\n */\nexport const SplashScreen = () => {\n  const [show, setShow] = useState(false);\n\n  useEffect(() => {\n    // Vrifier si en mode standalone (PWA installe)\n    const isStandalone = \n      window.matchMedia('(display-mode: standalone)').matches ||\n      (window.navigator as any).standalone ||\n      document.referrer.includes('android-app://');\n\n    // Vrifier si c'est le premier chargement de la session\n    const hasShownSplash = sessionStorage.getItem('splash-shown');\n\n    if (isStandalone && !hasShownSplash) {\n      setShow(true);\n      sessionStorage.setItem('splash-shown', 'true');\n\n      // Masquer aprs 2 secondes\n      const timer = setTimeout(() => {\n        setShow(false);\n      }, 2000);\n\n      return () => clearTimeout(timer);\n    }\n  }, []);\n\n  return (\n    <AnimatePresence>\n      {show && (\n        <motion.div\n          initial={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          transition={{ duration: 0.5 }}\n          className=\"fixed inset-0 z-[9999] flex items-center justify-center bg-gradient-to-br from-primary via-primary/90 to-secondary\"\n        >\n          <div className=\"flex flex-col items-center gap-6\">\n            {/* Logo anim */}\n            <motion.div\n              initial={{ scale: 0.5, opacity: 0 }}\n              animate={{ \n                scale: [0.5, 1.2, 1],\n                opacity: 1\n              }}\n              transition={{ \n                duration: 1,\n                times: [0, 0.6, 1],\n                ease: \"easeOut\"\n              }}\n              className=\"relative\"\n            >\n              {/* Cercle de fond */}\n              <div className=\"absolute inset-0 bg-white/20 rounded-full blur-2xl scale-150\" />\n              \n              {/* Logo */}\n              <div className=\"relative bg-white rounded-3xl p-6 shadow-2xl\">\n                <Home className=\"h-20 w-20 text-primary\" strokeWidth={2} />\n              </div>\n\n              {/* Pulse effect */}\n              <motion.div\n                animate={{\n                  scale: [1, 1.3, 1],\n                  opacity: [0.5, 0, 0.5]\n                }}\n                transition={{\n                  duration: 2,\n                  repeat: Infinity,\n                  ease: \"easeInOut\"\n                }}\n                className=\"absolute inset-0 bg-white rounded-3xl\"\n              />\n            </motion.div>\n\n            {/* Nom de l'app */}\n            <motion.div\n              initial={{ y: 20, opacity: 0 }}\n              animate={{ y: 0, opacity: 1 }}\n              transition={{ delay: 0.3, duration: 0.5 }}\n              className=\"text-center\"\n            >\n              <h1 className=\"text-4xl font-bold text-white mb-2\">\n                Mon Toit\n              </h1>\n              <p className=\"text-white/80 text-sm\">\n                Le logement, en toute confiance\n              </p>\n            </motion.div>\n\n            {/* Loading indicator */}\n            <motion.div\n              initial={{ width: 0 }}\n              animate={{ width: '100%' }}\n              transition={{ duration: 2, ease: \"easeInOut\" }}\n              className=\"w-32 h-1 bg-white/30 rounded-full overflow-hidden\"\n            >\n              <motion.div\n                animate={{\n                  x: ['-100%', '100%']\n                }}\n                transition={{\n                  duration: 1,\n                  repeat: Infinity,\n                  ease: \"easeInOut\"\n                }}\n                className=\"h-full w-1/2 bg-white rounded-full\"\n              />\n            </motion.div>\n          </div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n};\n\n","import { motion } from 'framer-motion';\nimport { useState, MouseEvent } from 'react';\nimport { Button, ButtonProps } from '@/components/ui/button';\n\ninterface RippleButtonProps extends ButtonProps {\n  children: React.ReactNode;\n}\n\nexport const RippleButton = ({ children, onClick, ...props }: RippleButtonProps) => {\n  const [ripples, setRipples] = useState<Array<{ x: number; y: number; id: number }>>([]);\n\n  const handleClick = (e: MouseEvent<HTMLButtonElement>) => {\n    const rect = e.currentTarget.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n    \n    const newRipple = { x, y, id: Date.now() };\n    setRipples([...ripples, newRipple]);\n    \n    setTimeout(() => {\n      setRipples(prev => prev.filter(r => r.id !== newRipple.id));\n    }, 600);\n    \n    if (onClick) onClick(e);\n  };\n\n  return (\n    <Button\n      {...props}\n      onClick={handleClick}\n      className={`relative overflow-hidden ${props.className || ''}`}\n    >\n      {ripples.map(ripple => (\n        <motion.span\n          key={ripple.id}\n          className=\"absolute bg-white/30 rounded-full pointer-events-none\"\n          style={{\n            left: ripple.x,\n            top: ripple.y,\n          }}\n          initial={{ width: 0, height: 0, opacity: 1 }}\n          animate={{ \n            width: 300, \n            height: 300, \n            opacity: 0,\n            x: -150,\n            y: -150\n          }}\n          transition={{ duration: 0.6, ease: \"easeOut\" }}\n        />\n      ))}\n      {children}\n    </Button>\n  );\n};\n\n","import { motion, useSpring, useTransform, useInView } from 'framer-motion';\nimport { useEffect, useRef } from 'react';\n\ninterface CountUpProps {\n  value: number;\n  duration?: number;\n  suffix?: string;\n  prefix?: string;\n}\n\nexport const CountUp = ({ \n  value, \n  duration = 2,\n  suffix = \"\",\n  prefix = \"\"\n}: CountUpProps) => {\n  const ref = useRef(null);\n  const isInView = useInView(ref, { once: true });\n  const spring = useSpring(0, { duration: duration * 1000 });\n  const display = useTransform(spring, (current) =>\n    Math.round(current).toLocaleString('fr-FR')\n  );\n\n  useEffect(() => {\n    if (isInView) {\n      spring.set(value);\n    }\n  }, [spring, value, isInView]);\n\n  return (\n    <span ref={ref}>\n      {prefix}\n      <motion.span>{display}</motion.span>\n      {suffix}\n    </span>\n  );\n};\n\n","import { useState } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Search, PlusCircle, Users, ShieldCheck, FileSignature, MapPin, Home, DollarSign, Sparkles } from 'lucide-react';\nimport { RippleButton } from '@/components/animations/RippleButton';\nimport { CountUp } from '@/components/animations/CountUp';\nimport { motion } from 'framer-motion';\n\nexport const PremiumHero = () => {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [city, setCity] = useState('all');\n  const [propertyType, setPropertyType] = useState('all');\n  const [budget, setBudget] = useState('');\n  const navigate = useNavigate();\n\n  const handleSearch = () => {\n    const params = new URLSearchParams();\n    \n    if (searchQuery.trim()) params.append('q', searchQuery.trim());\n    if (city !== 'all') params.append('city', city);\n    if (propertyType !== 'all') params.append('type', propertyType);\n    if (budget) params.append('budget', budget);\n    \n    const queryString = params.toString();\n    navigate(`/explorer${queryString ? '?' + queryString : ''}`);\n  };\n\n  return (\n    <section className=\"relative min-h-[600px] flex items-center justify-center overflow-hidden\">\n      {/* Image de fond avec overlay */}\n      <div className=\"absolute inset-0 z-0\">\n        {/* Image d'Abidjan (Unsplash placeholder) */}\n        <div \n          className=\"absolute inset-0 bg-cover bg-center\"\n          style={{\n            backgroundImage: `url('https://images.unsplash.com/photo-1566073771259-6a8506099945?w=1920&q=80')`,\n          }}\n        />\n        \n        {/* Overlay gradient pour lisibilit */}\n        <div className=\"absolute inset-0 bg-gradient-to-br from-primary/90 via-primary/70 to-secondary/80\" />\n        \n        {/* Pattern culturel Kente en overlay subtil */}\n        <div \n          className=\"absolute inset-0 opacity-10\"\n          style={{\n            backgroundImage: `repeating-linear-gradient(\n              45deg,\n              transparent,\n              transparent 10px,\n              rgba(255, 255, 255, 0.1) 10px,\n              rgba(255, 255, 255, 0.1) 20px\n            ),\n            repeating-linear-gradient(\n              -45deg,\n              transparent,\n              transparent 10px,\n              rgba(255, 255, 255, 0.05) 10px,\n              rgba(255, 255, 255, 0.05) 20px\n            )`\n          }}\n        />\n      </div>\n\n      {/* Contenu */}\n      <div className=\"relative z-10 container mx-auto px-4 py-16 max-w-5xl\">\n        <motion.div \n          className=\"flex flex-col gap-8 items-center justify-center text-center\"\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.6 }}\n        >\n          {/* Badge Premium */}\n          <motion.div\n            className=\"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-yellow-400 to-orange-500 text-white font-semibold shadow-lg\"\n            initial={{ scale: 0.9, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            transition={{ delay: 0.2, duration: 0.5 }}\n          >\n            <Sparkles className=\"h-4 w-4\" />\n            Plateforme N1 en Cte d'Ivoire\n          </motion.div>\n\n          {/* Titre Principal avec Gradient */}\n          <motion.h1 \n            className=\"text-5xl md:text-7xl font-bold text-white leading-tight\"\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.3, duration: 0.6 }}\n          >\n            Trouvez votre{' '}\n            <span className=\"bg-gradient-to-r from-yellow-300 via-orange-400 to-yellow-300 bg-clip-text text-transparent animate-pulse-slow\">\n              Toit Idal\n            </span>\n          </motion.h1>\n\n          {/* Sous-titre */}\n          <motion.p \n            className=\"text-xl md:text-2xl text-white/90 max-w-2xl\"\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            transition={{ delay: 0.4, duration: 0.6 }}\n          >\n            Location immobilire certifie ANSUT  Baux scuriss  Paiement en ligne\n          </motion.p>\n\n          {/* Formulaire de Recherche */}\n          <motion.div \n            className=\"w-full max-w-4xl bg-white/95 backdrop-blur-md rounded-2xl shadow-2xl p-6 md:p-8\"\n            initial={{ opacity: 0, y: 30 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.5, duration: 0.6 }}\n          >\n            <div className=\"flex flex-col gap-4\">\n              {/* Ligne de filtres */}\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\n                {/* Ville */}\n                <Select value={city} onValueChange={setCity}>\n                  <SelectTrigger className=\"h-14 border-2 focus:border-primary bg-white\">\n                    <MapPin className=\"h-5 w-5 mr-2 text-primary\" />\n                    <SelectValue placeholder=\"Ville\" />\n                  </SelectTrigger>\n                  <SelectContent className=\"bg-white border border-border z-50\">\n                    <SelectItem value=\"all\">Toutes les villes</SelectItem>\n                    <SelectItem value=\"Abidjan\">Abidjan</SelectItem>\n                    <SelectItem value=\"Yopougon\">Yopougon</SelectItem>\n                    <SelectItem value=\"Cocody\">Cocody</SelectItem>\n                    <SelectItem value=\"Marcory\">Marcory</SelectItem>\n                    <SelectItem value=\"Koumassi\">Koumassi</SelectItem>\n                    <SelectItem value=\"Plateau\">Plateau</SelectItem>\n                  </SelectContent>\n                </Select>\n\n                {/* Type de bien */}\n                <Select value={propertyType} onValueChange={setPropertyType}>\n                  <SelectTrigger className=\"h-14 border-2 focus:border-primary bg-white\">\n                    <Home className=\"h-5 w-5 mr-2 text-primary\" />\n                    <SelectValue placeholder=\"Type de bien\" />\n                  </SelectTrigger>\n                  <SelectContent className=\"bg-white border border-border z-50\">\n                    <SelectItem value=\"all\">Tous les types</SelectItem>\n                    <SelectItem value=\"Appartement\">Appartement</SelectItem>\n                    <SelectItem value=\"Villa\">Villa</SelectItem>\n                    <SelectItem value=\"Studio\">Studio</SelectItem>\n                    <SelectItem value=\"Bureau\">Bureau</SelectItem>\n                    <SelectItem value=\"Magasin\">Magasin</SelectItem>\n                  </SelectContent>\n                </Select>\n\n                {/* Budget */}\n                <div className=\"relative\">\n                  <DollarSign className=\"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground\" />\n                  <Input\n                    type=\"text\"\n                    placeholder=\"Budget max (FCFA)\"\n                    value={budget}\n                    onChange={(e) => {\n                      const value = e.target.value.replace(/\\D/g, '');\n                      setBudget(value);\n                    }}\n                    className=\"pl-12 h-14 border-2 focus:border-primary bg-white\"\n                  />\n                </div>\n              </div>\n\n              {/* Boutons d'action */}\n              <div className=\"flex gap-3\">\n                <RippleButton\n                  onClick={handleSearch}\n                  size=\"lg\"\n                  className=\"flex-1 h-14 text-lg font-bold shadow-lg hover:shadow-xl transition-shadow\"\n                >\n                  <Search className=\"h-5 w-5 mr-2\" />\n                  Rechercher\n                </RippleButton>\n                <Button\n                  variant=\"secondary\"\n                  size=\"lg\"\n                  asChild\n                  className=\"h-14 px-6 font-bold shadow-lg hover:shadow-xl transition-shadow\"\n                >\n                  <a href=\"/publier\">\n                    <PlusCircle className=\"h-5 w-5 mr-2\" />\n                    Publier\n                  </a>\n                </Button>\n              </div>\n            </div>\n          </motion.div>\n\n          {/* Trust Signals */}\n          <motion.div \n            className=\"w-full max-w-4xl\"\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            transition={{ delay: 0.7, duration: 0.6 }}\n          >\n            <div className=\"flex flex-wrap items-center justify-center gap-6 md:gap-10 text-white\">\n              {/* toiles */}\n              <div className=\"flex items-center gap-2\">\n                <div className=\"flex\">\n                  {[...Array(5)].map((_, i) => (\n                    <span key={i} className=\"text-yellow-300 text-xl\"></span>\n                  ))}\n                </div>\n                <span className=\"font-bold text-lg\">4.8/5</span>\n              </div>\n              \n              {/* Utilisateurs */}\n              <div className=\"flex items-center gap-2\">\n                <Users className=\"h-5 w-5\" />\n                <span className=\"text-lg\">\n                  <strong className=\"font-bold\"><CountUp value={10000} suffix=\"+\" /></strong> Ivoiriens\n                </span>\n              </div>\n              \n              {/* Gratuit */}\n              <div className=\"flex items-center gap-2\">\n                <ShieldCheck className=\"h-5 w-5\" />\n                <span className=\"text-lg\"><strong className=\"font-bold\">100%</strong> Gratuit</span>\n              </div>\n              \n              {/* ANSUT */}\n              <div className=\"flex items-center gap-2\">\n                <FileSignature className=\"h-5 w-5 text-yellow-300\" />\n                <span className=\"text-lg font-semibold\">Certifi ANSUT</span>\n              </div>\n            </div>\n            \n            {/* Lien vers  propos */}\n            <p className=\"text-center text-white/80 mt-4 text-sm\">\n              <Link to=\"/a-propos\" className=\"underline hover:text-yellow-300 transition-colors\">\n                Pourquoi nous faire confiance ?\n              </Link>\n            </p>\n          </motion.div>\n        </motion.div>\n      </div>\n\n      {/* Vague dcorative en bas */}\n      <div className=\"absolute bottom-0 left-0 right-0 z-10\">\n        <svg viewBox=\"0 0 1440 120\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" className=\"w-full h-auto\">\n          <path \n            d=\"M0,64L48,69.3C96,75,192,85,288,80C384,75,480,53,576,48C672,43,768,53,864,58.7C960,64,1056,64,1152,58.7C1248,53,1344,43,1392,37.3L1440,32L1440,120L1392,120C1344,120,1248,120,1152,120C1056,120,960,120,864,120C768,120,672,120,576,120C480,120,384,120,288,120C192,120,96,120,48,120L0,120Z\" \n            fill=\"currentColor\"\n            className=\"text-background\"\n          />\n        </svg>\n      </div>\n    </section>\n  );\n};\n\n","import { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Search, MapPin, Home, Sparkles } from 'lucide-react';\nimport { motion } from 'framer-motion';\n\n/**\n * Hero optimis pour mobile\n * - Plus compact (300px vs 600px)\n * - Recherche en 1 colonne\n * - Boutons plus gros (48px min)\n * - Statistiques en 2x2\n */\nexport const MobileHero = () => {\n  const [city, setCity] = useState('all');\n  const [propertyType, setPropertyType] = useState('all');\n  const navigate = useNavigate();\n\n  const handleSearch = () => {\n    const params = new URLSearchParams();\n    if (city !== 'all') params.append('city', city);\n    if (propertyType !== 'all') params.append('type', propertyType);\n    \n    const queryString = params.toString();\n    navigate(`/explorer${queryString ? '?' + queryString : ''}`);\n  };\n\n  return (\n    <section className=\"relative min-h-[400px] flex items-center justify-center overflow-hidden bg-gradient-to-br from-primary via-primary/90 to-secondary\">\n      {/* Pattern culturel subtil */}\n      <div \n        className=\"absolute inset-0 opacity-5\"\n        style={{\n          backgroundImage: `repeating-linear-gradient(\n            45deg,\n            transparent,\n            transparent 10px,\n            rgba(255, 255, 255, 0.1) 10px,\n            rgba(255, 255, 255, 0.1) 20px\n          )`\n        }}\n      />\n\n      {/* Contenu */}\n      <div className=\"relative z-10 w-full px-4 py-8\">\n        <motion.div \n          className=\"flex flex-col gap-6 items-center text-center\"\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.5 }}\n        >\n          {/* Badge */}\n          <div className=\"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-sm font-semibold shadow-lg\">\n            <Sparkles className=\"h-3 w-3\" />\n            N1 en Cte d'Ivoire\n          </div>\n\n          {/* Titre */}\n          <h1 className=\"text-3xl font-bold text-white leading-tight\">\n            Trouvez votre{' '}\n            <span className=\"bg-gradient-to-r from-yellow-300 via-orange-400 to-yellow-300 bg-clip-text text-transparent\">\n              Toit Idal\n            </span>\n          </h1>\n\n          {/* Sous-titre */}\n          <p className=\"text-sm text-white/90 max-w-sm\">\n            Location certifie ANSUT  Baux scuriss\n          </p>\n\n          {/* Recherche Rapide */}\n          <div className=\"w-full max-w-md bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl p-4\">\n            <div className=\"flex flex-col gap-3\">\n              {/* Ville */}\n              <Select value={city} onValueChange={setCity}>\n                <SelectTrigger className=\"h-12 border-2 focus:border-primary bg-white\">\n                  <MapPin className=\"h-4 w-4 mr-2 text-primary\" />\n                  <SelectValue placeholder=\"Ville\" />\n                </SelectTrigger>\n                <SelectContent className=\"bg-white border border-border z-50\">\n                  <SelectItem value=\"all\">Toutes les villes</SelectItem>\n                  <SelectItem value=\"Abidjan\">Abidjan</SelectItem>\n                  <SelectItem value=\"Cocody\">Cocody</SelectItem>\n                  <SelectItem value=\"Marcory\">Marcory</SelectItem>\n                  <SelectItem value=\"Yopougon\">Yopougon</SelectItem>\n                  <SelectItem value=\"Plateau\">Plateau</SelectItem>\n                </SelectContent>\n              </Select>\n\n              {/* Type */}\n              <Select value={propertyType} onValueChange={setPropertyType}>\n                <SelectTrigger className=\"h-12 border-2 focus:border-primary bg-white\">\n                  <Home className=\"h-4 w-4 mr-2 text-primary\" />\n                  <SelectValue placeholder=\"Type de bien\" />\n                </SelectTrigger>\n                <SelectContent className=\"bg-white border border-border z-50\">\n                  <SelectItem value=\"all\">Tous les types</SelectItem>\n                  <SelectItem value=\"Appartement\">Appartement</SelectItem>\n                  <SelectItem value=\"Villa\">Villa</SelectItem>\n                  <SelectItem value=\"Studio\">Studio</SelectItem>\n                  <SelectItem value=\"Bureau\">Bureau</SelectItem>\n                </SelectContent>\n              </Select>\n\n              {/* Bouton Recherche */}\n              <Button\n                onClick={handleSearch}\n                size=\"lg\"\n                className=\"h-12 text-base font-bold shadow-lg\"\n              >\n                <Search className=\"h-5 w-5 mr-2\" />\n                Rechercher\n              </Button>\n            </div>\n          </div>\n\n          {/* Statistiques Compactes */}\n          <div className=\"grid grid-cols-2 gap-3 w-full max-w-md text-white\">\n            <div className=\"bg-white/10 backdrop-blur-sm rounded-lg p-3\">\n              <div className=\"text-2xl font-bold\">3500+</div>\n              <div className=\"text-xs opacity-90\">Biens</div>\n            </div>\n            <div className=\"bg-white/10 backdrop-blur-sm rounded-lg p-3\">\n              <div className=\"text-2xl font-bold\">10000+</div>\n              <div className=\"text-xs opacity-90\">Utilisateurs</div>\n            </div>\n            <div className=\"bg-white/10 backdrop-blur-sm rounded-lg p-3\">\n              <div className=\"text-2xl font-bold\">98%</div>\n              <div className=\"text-xs opacity-90\">Satisfaction</div>\n            </div>\n            <div className=\"bg-white/10 backdrop-blur-sm rounded-lg p-3\">\n              <div className=\"text-2xl font-bold\">24h</div>\n              <div className=\"text-xs opacity-90\">Support</div>\n            </div>\n          </div>\n        </motion.div>\n      </div>\n    </section>\n  );\n};\n\n","import { useState, useEffect } from 'react';\n\n/**\n * Hook pour dtecter si l'utilisateur est sur mobile\n * Combine la largeur d'cran et le user agent\n */\nexport const useIsMobile = () => {\n  const [isMobile, setIsMobile] = useState(false);\n\n  useEffect(() => {\n    const checkMobile = () => {\n      const mobileWidth = window.innerWidth < 768;\n      const mobileUserAgent = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n        navigator.userAgent\n      );\n      \n      setIsMobile(mobileWidth || mobileUserAgent);\n    };\n\n    // Check initial\n    checkMobile();\n\n    // Listen for resize\n    window.addEventListener('resize', checkMobile);\n    \n    return () => window.removeEventListener('resize', checkMobile);\n  }, []);\n\n  return isMobile;\n};\n\n/**\n * Hook pour dtecter si l'app est installe en mode standalone (PWA)\n */\nexport const useIsStandalone = () => {\n  const [isStandalone, setIsStandalone] = useState(false);\n\n  useEffect(() => {\n    const checkStandalone = () => {\n      const standalone = \n        window.matchMedia('(display-mode: standalone)').matches ||\n        (window.navigator as any).standalone ||\n        document.referrer.includes('android-app://');\n      \n      setIsStandalone(standalone);\n    };\n\n    checkStandalone();\n  }, []);\n\n  return isStandalone;\n};\n\n/**\n * Hook pour dtecter le type d'appareil\n */\nexport const useDeviceType = () => {\n  const [deviceType, setDeviceType] = useState<'mobile' | 'tablet' | 'desktop'>('desktop');\n\n  useEffect(() => {\n    const checkDevice = () => {\n      const width = window.innerWidth;\n      \n      if (width < 768) {\n        setDeviceType('mobile');\n      } else if (width < 1024) {\n        setDeviceType('tablet');\n      } else {\n        setDeviceType('desktop');\n      }\n    };\n\n    checkDevice();\n    window.addEventListener('resize', checkDevice);\n    \n    return () => window.removeEventListener('resize', checkDevice);\n  }, []);\n\n  return deviceType;\n};\n\n","import * as React from \"react\";\nimport * as SliderPrimitive from \"@radix-ui/react-slider\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\"relative flex w-full touch-none select-none items-center\", className)}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n));\nSlider.displayName = SliderPrimitive.Root.displayName;\n\nexport { Slider };\n","import { useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { Slider } from '@/components/ui/slider';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Filter, X } from 'lucide-react';\nimport { Collapsible, CollapsibleContent, CollapsibleTrigger } from '@/components/ui/collapsible';\nimport { CITIES, PROPERTY_TYPES } from '@/constants';\n\nexport interface PropertyFilters {\n  city?: string;\n  propertyType?: string;\n  minPrice?: number;\n  maxPrice?: number;\n  minSurface?: number;\n  maxSurface?: number;\n  bedrooms?: number;\n  bathrooms?: number;\n  isFurnished?: boolean;\n  hasAc?: boolean;\n  hasParking?: boolean;\n  hasGarden?: boolean;\n  hasVideo?: boolean;\n  has360View?: boolean;\n  hasVirtualTour?: boolean;\n  status?: string;\n  isAnsutCertified?: boolean;\n  addedPeriod?: 'today' | 'week' | 'month' | 'all';\n}\n\ninterface PropertyFiltersProps {\n  onFilterChange: (filters: PropertyFilters) => void;\n  onReset: () => void;\n}\n\nconst PropertyFiltersComponent = ({ onFilterChange, onReset }: PropertyFiltersProps) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [filters, setFilters] = useState<PropertyFilters>({});\n  const [priceRange, setPriceRange] = useState([0, 1000000]);\n  const [surfaceRange, setSurfaceRange] = useState([0, 500]);\n\n  const handleFilterChange = (key: keyof PropertyFilters, value: any) => {\n    const newFilters = { ...filters, [key]: value };\n    setFilters(newFilters);\n    onFilterChange(newFilters);\n  };\n\n  const handleReset = () => {\n    setFilters({});\n    setPriceRange([0, 1000000]);\n    setSurfaceRange([0, 500]);\n    onReset();\n  };\n\n  const activeFiltersCount = Object.keys(filters).filter(key => filters[key as keyof PropertyFilters] !== undefined).length;\n\n  return (\n    <Card className=\"mb-6\">\n      <CardHeader>\n        <Collapsible open={isOpen} onOpenChange={setIsOpen}>\n          <CollapsibleTrigger asChild>\n            <Button variant=\"ghost\" className=\"w-full justify-between\">\n              <div className=\"flex items-center gap-2\">\n                <Filter className=\"h-4 w-4\" />\n                <CardTitle>Filtres de recherche</CardTitle>\n                {activeFiltersCount > 0 && (\n                  <span className=\"bg-primary text-primary-foreground text-xs px-2 py-1 rounded-full\">\n                    {activeFiltersCount}\n                  </span>\n                )}\n              </div>\n              <span className=\"text-muted-foreground text-sm\">\n                {isOpen ? 'Masquer' : 'Afficher'}\n              </span>\n            </Button>\n          </CollapsibleTrigger>\n          <CollapsibleContent>\n            <CardContent className=\"space-y-6 pt-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                {/* City */}\n                <div className=\"space-y-2\">\n                  <Label>Ville</Label>\n                  <Select onValueChange={(value) => handleFilterChange('city', value)} value={filters.city}>\n                    <SelectTrigger>\n                      <SelectValue placeholder=\"Ex: Abidjan, Yopougon, Cocody...\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {CITIES.map(city => (\n                        <SelectItem key={city} value={city}>{city}</SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n\n                {/* Property Type */}\n                <div className=\"space-y-2\">\n                  <Label>Type de bien</Label>\n                  <Select onValueChange={(value) => handleFilterChange('propertyType', value)} value={filters.propertyType}>\n                    <SelectTrigger>\n                      <SelectValue placeholder=\"Ex: Appartement, Villa, Studio...\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {PROPERTY_TYPES.map(type => (\n                        <SelectItem key={type} value={type}>{type}</SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n\n                {/* Status */}\n                <div className=\"space-y-2\">\n                  <Label>Statut</Label>\n                  <Select onValueChange={(value) => handleFilterChange('status', value)} value={filters.status}>\n                    <SelectTrigger>\n                      <SelectValue placeholder=\"Tous\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"disponible\">Disponible</SelectItem>\n                      <SelectItem value=\"lou\">Lou</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n\n                {/* Added Period */}\n                <div className=\"space-y-2\">\n                  <Label>Ajout</Label>\n                  <Select onValueChange={(value) => handleFilterChange('addedPeriod', value)} value={filters.addedPeriod}>\n                    <SelectTrigger>\n                      <SelectValue placeholder=\"Tout\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"today\">Aujourd'hui</SelectItem>\n                      <SelectItem value=\"week\">Cette semaine</SelectItem>\n                      <SelectItem value=\"month\">Ce mois-ci</SelectItem>\n                      <SelectItem value=\"all\">Tout</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n\n                {/* Bedrooms */}\n                <div className=\"space-y-2\">\n                  <Label>Chambres (min)</Label>\n                  <Input\n                    type=\"number\"\n                    min={0}\n                    placeholder=\"0\"\n                    value={filters.bedrooms || ''}\n                    onChange={(e) => handleFilterChange('bedrooms', e.target.value ? parseInt(e.target.value) : undefined)}\n                  />\n                </div>\n\n                {/* Bathrooms */}\n                <div className=\"space-y-2\">\n                  <Label>Salles de bain (min)</Label>\n                  <Input\n                    type=\"number\"\n                    min={0}\n                    placeholder=\"0\"\n                    value={filters.bathrooms || ''}\n                    onChange={(e) => handleFilterChange('bathrooms', e.target.value ? parseInt(e.target.value) : undefined)}\n                  />\n                </div>\n              </div>\n\n              {/* Price Range */}\n              <div className=\"space-y-2\">\n                <Label>Prix mensuel (FCFA)</Label>\n                <div className=\"flex items-center gap-4\">\n                  <Input\n                    type=\"number\"\n                    placeholder=\"Min\"\n                    value={priceRange[0]}\n                    onChange={(e) => {\n                      const newRange = [parseInt(e.target.value) || 0, priceRange[1]];\n                      setPriceRange(newRange);\n                      handleFilterChange('minPrice', newRange[0]);\n                    }}\n                  />\n                  <span>-</span>\n                  <Input\n                    type=\"number\"\n                    placeholder=\"Max\"\n                    value={priceRange[1]}\n                    onChange={(e) => {\n                      const newRange = [priceRange[0], parseInt(e.target.value) || 1000000];\n                      setPriceRange(newRange);\n                      handleFilterChange('maxPrice', newRange[1]);\n                    }}\n                  />\n                </div>\n                <Slider\n                  min={0}\n                  max={1000000}\n                  step={10000}\n                  value={priceRange}\n                  onValueChange={(value) => {\n                    setPriceRange(value);\n                    handleFilterChange('minPrice', value[0]);\n                    handleFilterChange('maxPrice', value[1]);\n                  }}\n                />\n                <p className=\"text-sm text-muted-foreground\">\n                  {priceRange[0].toLocaleString()} - {priceRange[1].toLocaleString()} FCFA\n                </p>\n              </div>\n\n              {/* Surface Range */}\n              <div className=\"space-y-2\">\n                <Label>Surface (m)</Label>\n                <div className=\"flex items-center gap-4\">\n                  <Input\n                    type=\"number\"\n                    placeholder=\"Min\"\n                    value={surfaceRange[0]}\n                    onChange={(e) => {\n                      const newRange = [parseInt(e.target.value) || 0, surfaceRange[1]];\n                      setSurfaceRange(newRange);\n                      handleFilterChange('minSurface', newRange[0]);\n                    }}\n                  />\n                  <span>-</span>\n                  <Input\n                    type=\"number\"\n                    placeholder=\"Max\"\n                    value={surfaceRange[1]}\n                    onChange={(e) => {\n                      const newRange = [surfaceRange[0], parseInt(e.target.value) || 500];\n                      setSurfaceRange(newRange);\n                      handleFilterChange('maxSurface', newRange[1]);\n                    }}\n                  />\n                </div>\n                <Slider\n                  min={0}\n                  max={500}\n                  step={10}\n                  value={surfaceRange}\n                  onValueChange={(value) => {\n                    setSurfaceRange(value);\n                    handleFilterChange('minSurface', value[0]);\n                    handleFilterChange('maxSurface', value[1]);\n                  }}\n                />\n                <p className=\"text-sm text-muted-foreground\">\n                  {surfaceRange[0]} - {surfaceRange[1]} m\n                </p>\n              </div>\n\n              {/* Amenities */}\n              <div className=\"space-y-3\">\n                <Label>quipements</Label>\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                  <div className=\"flex items-center space-x-2\">\n                    <Checkbox\n                      id=\"furnished\"\n                      checked={filters.isFurnished}\n                      onCheckedChange={(checked) => handleFilterChange('isFurnished', checked)}\n                    />\n                    <Label htmlFor=\"furnished\" className=\"font-normal cursor-pointer\">Meubl</Label>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <Checkbox\n                      id=\"ac\"\n                      checked={filters.hasAc}\n                      onCheckedChange={(checked) => handleFilterChange('hasAc', checked)}\n                    />\n                    <Label htmlFor=\"ac\" className=\"font-normal cursor-pointer\">Climatisation</Label>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <Checkbox\n                      id=\"parking\"\n                      checked={filters.hasParking}\n                      onCheckedChange={(checked) => handleFilterChange('hasParking', checked)}\n                    />\n                    <Label htmlFor=\"parking\" className=\"font-normal cursor-pointer\">Parking</Label>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <Checkbox\n                      id=\"garden\"\n                      checked={filters.hasGarden}\n                      onCheckedChange={(checked) => handleFilterChange('hasGarden', checked)}\n                    />\n                    <Label htmlFor=\"garden\" className=\"font-normal cursor-pointer\">Jardin</Label>\n                  </div>\n                </div>\n              </div>\n\n              {/* Multimedia */}\n              <div className=\"space-y-3\">\n                <Label>Visites & Mdias</Label>\n                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\n                  <div className=\"flex items-center space-x-2\">\n                    <Checkbox\n                      id=\"video\"\n                      checked={filters.hasVideo}\n                      onCheckedChange={(checked) => handleFilterChange('hasVideo', checked)}\n                    />\n                    <Label htmlFor=\"video\" className=\"font-normal cursor-pointer\">Avec vido</Label>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <Checkbox\n                      id=\"360view\"\n                      checked={filters.has360View}\n                      onCheckedChange={(checked) => handleFilterChange('has360View', checked)}\n                    />\n                    <Label htmlFor=\"360view\" className=\"font-normal cursor-pointer\">Vue 360</Label>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <Checkbox\n                      id=\"virtualtour\"\n                      checked={filters.hasVirtualTour}\n                      onCheckedChange={(checked) => handleFilterChange('hasVirtualTour', checked)}\n                    />\n                    <Label htmlFor=\"virtualtour\" className=\"font-normal cursor-pointer\">Visite virtuelle</Label>\n                  </div>\n                </div>\n              </div>\n\n              {/* Certification ANSUT */}\n              <div className=\"space-y-3\">\n                <Label>Certification</Label>\n                <div className=\"flex items-center space-x-2\">\n                  <Checkbox\n                    id=\"ansutCertified\"\n                    checked={filters.isAnsutCertified}\n                    onCheckedChange={(checked) => handleFilterChange('isAnsutCertified', checked)}\n                  />\n                  <Label htmlFor=\"ansutCertified\" className=\"font-normal cursor-pointer flex items-center gap-2\">\n                    <span className=\"text-secondary\"></span> Baux certifis ANSUT uniquement\n                  </Label>\n                </div>\n              </div>\n\n              <div className=\"flex justify-end gap-2\">\n                <Button variant=\"outline\" onClick={handleReset}>\n                  <X className=\"h-4 w-4 mr-2\" />\n                  Rinitialiser\n                </Button>\n              </div>\n            </CardContent>\n          </CollapsibleContent>\n        </Collapsible>\n      </CardHeader>\n    </Card>\n  );\n};\n\nexport default PropertyFiltersComponent;\n","import { motion } from 'framer-motion';\n\ninterface SkeletonProps {\n  className?: string;\n  variant?: \"default\" | \"card\" | \"text\" | \"circle\";\n}\n\nexport const Skeleton = ({ \n  className = \"\",\n  variant = \"default\" \n}: SkeletonProps) => {\n  const baseClass = \"bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded\";\n  \n  const variants = {\n    default: \"h-4 w-full\",\n    card: \"h-64 w-full\",\n    text: \"h-3 w-3/4\",\n    circle: \"h-16 w-16 rounded-full\"\n  };\n\n  return (\n    <motion.div\n      className={`${baseClass} ${variants[variant]} ${className}`}\n      animate={{\n        backgroundPosition: [\"0% 50%\", \"100% 50%\", \"0% 50%\"]\n      }}\n      transition={{\n        duration: 2,\n        repeat: Infinity,\n        ease: \"linear\"\n      }}\n      style={{\n        backgroundSize: \"200% 100%\"\n      }}\n    />\n  );\n};\n\n","import { motion } from 'framer-motion';\nimport { Card, CardHeader, CardContent } from '@/components/ui/card';\nimport { Skeleton } from '@/components/animations/Skeleton';\n\nconst containerVariants = {\n  hidden: { opacity: 0 },\n  visible: {\n    opacity: 1,\n    transition: {\n      staggerChildren: 0.1,\n    },\n  },\n};\n\nconst itemVariants = {\n  hidden: { y: 20, opacity: 0 },\n  visible: {\n    y: 0,\n    opacity: 1,\n    transition: { type: 'spring' as const, stiffness: 100, damping: 15 },\n  },\n};\n\nexport const PropertyCardSkeleton = () => (\n  <motion.div\n    className=\"bg-white rounded-xl shadow-md overflow-hidden\"\n    initial={{ opacity: 0 }}\n    animate={{ opacity: 1 }}\n    transition={{ duration: 0.3 }}\n  >\n    <Skeleton variant=\"card\" />\n    <div className=\"p-4 space-y-3\">\n      <Skeleton variant=\"default\" className=\"h-6\" />\n      <Skeleton variant=\"text\" />\n      <div className=\"flex gap-4\">\n        <Skeleton variant=\"default\" className=\"h-4 w-16\" />\n        <Skeleton variant=\"default\" className=\"h-4 w-16\" />\n        <Skeleton variant=\"default\" className=\"h-4 w-16\" />\n      </div>\n      <Skeleton variant=\"default\" className=\"h-8 w-32\" />\n    </div>\n  </motion.div>\n);\n","import { motion } from 'framer-motion';\nimport { ReactNode } from 'react';\n\ninterface FadeInViewProps {\n  children: ReactNode;\n  delay?: number;\n  direction?: 'up' | 'down' | 'left' | 'right';\n}\n\nexport const FadeInView = ({ \n  children, \n  delay = 0,\n  direction = 'up' \n}: FadeInViewProps) => {\n  const directions = {\n    up: { y: 50 },\n    down: { y: -50 },\n    left: { x: 50 },\n    right: { x: -50 }\n  };\n\n  return (\n    <motion.div\n      initial={{ \n        opacity: 0, \n        ...directions[direction]\n      }}\n      whileInView={{ \n        opacity: 1, \n        y: 0,\n        x: 0\n      }}\n      transition={{ \n        duration: 0.6,\n        delay,\n        ease: [0.25, 0.46, 0.45, 0.94] // easeOutQuad\n      }}\n      viewport={{ once: true, margin: \"-100px\" }}\n    >\n      {children}\n    </motion.div>\n  );\n};\n\n","import { useState } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { supabase } from '@/lib/supabase';\nimport { PropertyCard } from '@/components/properties/PropertyCard';\nimport PropertyFiltersComponent, { PropertyFilters } from '@/components/PropertyFilters';\nimport { PropertyCardSkeleton } from '@/components/properties/PropertyCardSkeleton';\nimport { Button } from '@/components/ui/button';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { ArrowDown } from 'lucide-react';\nimport { FadeInView } from '@/components/animations/FadeInView';\nimport { useAuth } from '@/hooks/useAuth';\nimport { toast } from '@/hooks/use-toast';\nimport type { Property } from '@/types';\n\ninterface PropertyGridProps {\n  limit?: number;\n  showFilters?: boolean;\n}\n\nexport const PropertyGrid = ({ \n  limit = 16, \n  showFilters = true,\n}: PropertyGridProps) => {\n  console.log('[PropertyGrid] Rendering with limit:', limit);\n  const { user } = useAuth();\n  const [displayLimit, setDisplayLimit] = useState(limit);\n  const [sortBy, setSortBy] = useState<'recent' | 'price_asc' | 'price_desc'>('recent');\n  const [filters, setFilters] = useState<PropertyFilters>({});\n\n  // Fetch properties\n  const { data: properties = [], isLoading, isError, error } = useQuery({\n    queryKey: ['properties'],\n    queryFn: async () => {\n      const { data, error } = await supabase\n        .from('properties')\n        .select('*')\n        .eq('moderation_status', 'approved')\n        .order('created_at', { ascending: false });\n      \n      if (error) throw error;\n      return data as Property[];\n    },\n  });\n\n  // Apply filters\n  const filteredProperties = properties.filter(property => {\n    if (filters.city && property.city !== filters.city) return false;\n    if (filters.propertyType && property.property_type !== filters.propertyType) return false;\n    if (filters.minPrice && property.monthly_rent < filters.minPrice) return false;\n    if (filters.maxPrice && property.monthly_rent > filters.maxPrice) return false;\n    if (filters.minSurface && property.surface_area && property.surface_area < filters.minSurface) return false;\n    if (filters.maxSurface && property.surface_area && property.surface_area > filters.maxSurface) return false;\n    if (filters.bedrooms && property.bedrooms < filters.bedrooms) return false;\n    if (filters.bathrooms && property.bathrooms < filters.bathrooms) return false;\n    if (filters.isFurnished && !property.is_furnished) return false;\n    if (filters.hasAc && !property.has_ac) return false;\n    if (filters.hasParking && !property.has_parking) return false;\n    if (filters.hasGarden && !property.has_garden) return false;\n    if (filters.status && property.status !== filters.status) return false;\n    return true;\n  });\n\n  // Sorting\n  const sortedProperties = [...filteredProperties].sort((a, b) => {\n    if (sortBy === 'recent') return new Date(b.created_at).getTime() - new Date(a.created_at).getTime();\n    if (sortBy === 'price_asc') return a.monthly_rent - b.monthly_rent;\n    if (sortBy === 'price_desc') return b.monthly_rent - a.monthly_rent;\n    return 0;\n  });\n\n  const displayedProperties = sortedProperties.slice(0, displayLimit);\n  const hasMore = sortedProperties.length > displayLimit;\n\n  const handleLoadMore = () => {\n    setDisplayLimit(prev => prev + 12);\n  };\n\n  const handleFilterChange = (newFilters: PropertyFilters) => {\n    setFilters(newFilters);\n  };\n\n  const handleReset = () => {\n    setFilters({});\n  };\n\n  return (\n    <section className=\"bg-background\">\n      <div className=\"container mx-auto px-4 py-8 max-w-[1400px]\">\n        {/* Header: Filters toggle + Sort */}\n        <div className=\"flex flex-wrap items-center justify-between gap-4 mb-6\">\n          <p className=\"text-sm text-muted-foreground\">\n            <strong>{filteredProperties.length}</strong> bien{filteredProperties.length > 1 ? 's' : ''} disponible{filteredProperties.length > 1 ? 's' : ''}\n          </p>\n\n          <div className=\"flex items-center gap-2\">\n            <select\n              value={sortBy}\n              onChange={(e) => setSortBy(e.target.value as any)}\n              className=\"text-sm border rounded-md px-3 py-1.5 bg-background\"\n              aria-label=\"Trier les rsultats\"\n            >\n              <option value=\"recent\">Plus rcents</option>\n              <option value=\"price_asc\">Prix croissant</option>\n              <option value=\"price_desc\">Prix dcroissant</option>\n            </select>\n          </div>\n        </div>\n\n        {showFilters && (\n          <PropertyFiltersComponent\n            onFilterChange={handleFilterChange}\n            onReset={handleReset}\n          />\n        )}\n\n        {/* Property Grid */}\n        <div className=\"mt-6\">\n          {isLoading ? (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5\">\n              {Array.from({ length: 12 }).map((_, i) => (\n                <PropertyCardSkeleton key={i} />\n              ))}\n            </div>\n          ) : isError ? (\n            <Alert variant=\"destructive\">\n              <AlertDescription>\n                Erreur lors du chargement des proprits. {(error as Error)?.message}\n              </AlertDescription>\n            </Alert>\n          ) : filteredProperties.length === 0 ? (\n            <div className=\"text-center py-16\">\n              <p className=\"text-xl text-muted-foreground mb-4\">\n                Aucun bien ne correspond  vos critres\n              </p>\n              <Button onClick={handleReset} variant=\"outline\">\n                Rinitialiser les filtres\n              </Button>\n            </div>\n          ) : (\n            <>\n              <div \n                className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5\"\n                role=\"list\"\n                aria-label=\"Liste des biens immobiliers\"\n              >\n                {displayedProperties.map((property, index) => (\n                  <FadeInView key={property.id} delay={Math.min(index * 0.05, 0.4)} direction=\"up\">\n                    <div role=\"listitem\">\n                      <PropertyCard\n                        property={property}\n                        variant=\"compact\"\n                        onFavoriteClick={(id) => {\n                          if (!user) {\n                            toast({\n                              title: \"Connexion requise\",\n                              description: \"Connectez-vous pour ajouter des favoris\",\n                              variant: \"destructive\",\n                            });\n                            return;\n                          }\n                          // Toggle favorite logic would go here\n                        }}\n                        isFavorite={false}\n                      />\n                    </div>\n                  </FadeInView>\n                ))}\n              </div>\n\n              {/* Load More Button */}\n              {hasMore && (\n                <div className=\"text-center mt-8\">\n                  <Button\n                    onClick={handleLoadMore}\n                    size=\"lg\"\n                    variant=\"outline\"\n                    className=\"min-w-[200px]\"\n                  >\n                    <ArrowDown className=\"h-4 w-4 mr-2\" />\n                    Charger plus de biens ({sortedProperties.length - displayLimit} restants)\n                  </Button>\n                </div>\n              )}\n            </>\n          )}\n        </div>\n      </div>\n    </section>\n  );\n};\n","import { useState, useEffect } from \"react\";\nimport { Home, Building, Building2, X } from \"lucide-react\";\nimport { Link } from \"react-router-dom\";\nimport { Button } from \"./ui/button\";\nimport { Card } from \"./ui/card\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"./ui/dialog\";\n\nconst OnboardingModal = () => {\n  const [isOpen, setIsOpen] = useState(false);\n\n  useEffect(() => {\n    const hasSeenOnboarding = localStorage.getItem(\"onboarding_seen\");\n    if (!hasSeenOnboarding) {\n      // Dlai de 1 seconde pour laisser la page se charger\n      setTimeout(() => {\n        setIsOpen(true);\n      }, 1000);\n    }\n  }, []);\n\n  const handleClose = () => {\n    localStorage.setItem(\"onboarding_seen\", \"true\");\n    setIsOpen(false);\n  };\n\n  const handleChoice = () => {\n    localStorage.setItem(\"onboarding_seen\", \"true\");\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={setIsOpen}>\n      <DialogContent className=\"w-full h-full md:h-auto md:max-w-5xl md:w-auto mx-auto\">\n        <button\n          onClick={handleClose}\n          className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\"\n          aria-label=\"Fermer\"\n        >\n          <X className=\"h-4 w-4\" />\n        </button>\n\n        <DialogHeader>\n          <DialogTitle className=\"text-3xl md:text-4xl font-bold text-center\">\n            Bienvenue sur Mon Toit ! \n          </DialogTitle>\n          <DialogDescription className=\"text-lg text-center mt-2\">\n            Que souhaitez-vous faire aujourd'hui ?\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mt-8\">\n          {/* Carte 1 - Locataire */}\n          <Link to=\"/explorer\" onClick={handleChoice} className=\"group\">\n            <Card className=\"p-6 text-center hover:shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer border-2 hover:border-blue-600\">\n              <div className=\"flex justify-center mb-4\">\n                <div className=\"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center group-hover:bg-blue-600 transition-colors\">\n                  <Home className=\"h-8 w-8 text-blue-600 group-hover:text-white transition-colors\" />\n                </div>\n              </div>\n              <h3 className=\"text-xl font-bold mb-2\">Je cherche un logement</h3>\n              <p className=\"text-muted-foreground\">Trouvez votre logement idal en 48h</p>\n            </Card>\n          </Link>\n\n          {/* Carte 2 - Propritaire */}\n          <Link to=\"/publier\" onClick={handleChoice} className=\"group\">\n            <Card className=\"p-6 text-center hover:shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer border-2 hover:border-primary\">\n              <div className=\"flex justify-center mb-4\">\n                <div className=\"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center group-hover:bg-primary transition-colors\">\n                  <Building className=\"h-8 w-8 text-primary group-hover:text-white transition-colors\" />\n                </div>\n              </div>\n              <h3 className=\"text-xl font-bold mb-2\">Je suis propritaire</h3>\n              <p className=\"text-muted-foreground\">Publiez votre bien gratuitement</p>\n            </Card>\n          </Link>\n\n          {/* Carte 3 - Agence */}\n          <Link to=\"/agence\" onClick={handleChoice} className=\"group\">\n            <Card className=\"p-6 text-center hover:shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer border-2 hover:border-secondary\">\n              <div className=\"flex justify-center mb-4\">\n                <div className=\"w-16 h-16 bg-secondary/10 rounded-full flex items-center justify-center group-hover:bg-secondary transition-colors\">\n                  <Building2 className=\"h-8 w-8 text-secondary group-hover:text-white transition-colors\" />\n                </div>\n              </div>\n              <h3 className=\"text-xl font-bold mb-2\">Je suis une agence</h3>\n              <p className=\"text-muted-foreground\">Grez vos biens avec notre CRM</p>\n            </Card>\n          </Link>\n        </div>\n\n        <div className=\"border-t pt-4 mt-6\">\n          <Button\n            variant=\"ghost\"\n            className=\"w-full\"\n            onClick={handleClose}\n          >\n            Explorer sans compte\n          </Button>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default OnboardingModal;\n","import { MainLayout } from \"@/components/layout/MainLayout\";\nimport { PremiumHero } from \"@/components/PremiumHero\";\nimport { MobileHero } from \"@/components/MobileHero\";\nimport { useIsMobile } from \"@/hooks/useIsMobile\";\nimport { PropertyGrid } from \"@/components/PropertyGrid\";\nimport OnboardingModal from \"@/components/OnboardingModal\";\nimport { Helmet } from \"react-helmet-async\";\nimport { Button } from \"@/components/ui/button\";\nimport { Link } from \"react-router-dom\";\nimport { Search, ShieldCheck } from \"lucide-react\";\n\nconst Index = () => {\n  console.log('[Index] Rendering Index page');\n  return (\n    <MainLayout>\n      <Helmet>\n        <title>Mon Toit - Location Immobilire Certifie ANSUT en Cte d'Ivoire</title>\n        <meta \n          name=\"description\" \n          content=\"Trouvez votre logement idal en Cte d'Ivoire. Baux certifis ANSUT, dossiers vrifis, signature lectronique. Plus de 3,500 logements  Abidjan, Yopougon, Cocody.\" \n        />\n        <link rel=\"canonical\" href=\"https://montoit.ci\" />\n      </Helmet>\n\n      <main role=\"main\">\n        {/* Hero adaptatif : Mobile ou Desktop */}\n        {useIsMobile() ? <MobileHero /> : <PremiumHero />}\n        \n        {/* Main Property Grid - Dynamic height */}\n        <PropertyGrid\n          limit={16}\n          showFilters={true}\n        />\n\n        {/* Mini CTA - Subtle, non-intrusive */}\n        <section className=\"py-8 bg-gradient-to-b from-primary/5 to-background border-t border-primary/10\">\n          <div className=\"container mx-auto px-4 max-w-4xl\">\n            <div className=\"text-center\">\n              <h2 className=\"text-2xl font-bold mb-2 text-foreground\">\n                Pas encore trouv votre toit idal ?\n              </h2>\n              <p className=\"text-sm text-muted-foreground mb-6\">\n                Explorez plus de biens ou dcouvrez pourquoi 10 000+ Ivoiriens nous font confiance\n              </p>\n              <div className=\"flex flex-col sm:flex-row gap-3 justify-center items-center\">\n                <Button asChild size=\"lg\" className=\"shadow-md min-w-[200px]\">\n                  <Link to=\"/explorer\">\n                    <Search className=\"h-4 w-4 mr-2\" />\n                    Explorer plus de biens\n                  </Link>\n                </Button>\n                <Button asChild variant=\"outline\" size=\"lg\" className=\"shadow-sm min-w-[200px]\">\n                  <Link to=\"/a-propos\">\n                    <ShieldCheck className=\"h-4 w-4 mr-2\" />\n                    Pourquoi Mon Toit ?\n                  </Link>\n                </Button>\n              </div>\n            </div>\n          </div>\n        </section>\n      </main>\n\n      <OnboardingModal />\n    </MainLayout>\n  );\n};\n\nexport default Index;\n","import { useState, useEffect } from 'react';\nimport { supabase } from '@/lib/supabase';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { toast } from '@/hooks/use-toast';\nimport { Shield, AlertTriangle, Loader2 } from 'lucide-react';\n\ninterface TwoFactorVerifyProps {\n  onVerified: () => void;\n  onCancel: () => void;\n}\n\nexport const TwoFactorVerify = ({ onVerified, onCancel }: TwoFactorVerifyProps) => {\n  const [code, setCode] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [useBackupCode, setUseBackupCode] = useState(false);\n  const [isRateLimited, setIsRateLimited] = useState(false);\n  const [attemptCount, setAttemptCount] = useState(0);\n\n  useEffect(() => {\n    const checkRateLimit = async () => {\n      const { data, error } = await supabase.rpc('check_mfa_rate_limit');\n      if (!error && data === false) {\n        setIsRateLimited(true);\n      }\n    };\n    checkRateLimit();\n  }, [attemptCount]);\n\n  const handleVerify = async () => {\n    if (code.length < 6) return;\n\n    if (isRateLimited) {\n      toast({\n        title: 'Trop de tentatives',\n        description: 'Veuillez ressayer dans 15 minutes',\n        variant: 'destructive',\n      });\n      return;\n    }\n\n    setLoading(true);\n    let success = false;\n\n    try {\n      if (useBackupCode) {\n        // Verify using backup code\n        const { data, error } = await supabase.rpc('verify_backup_code', {\n          _backup_code: code,\n        });\n\n        if (error) throw error;\n\n        if (data) {\n          success = true;\n          await supabase.rpc('log_mfa_attempt', {\n            _success: true,\n            _attempt_type: 'backup_code',\n          });\n\n          toast({\n            title: 'Code de rcupration valide',\n            description: 'Connexion en cours...',\n          });\n          onVerified();\n        } else {\n          throw new Error('Code de rcupration invalide');\n        }\n      } else {\n        // Verify using TOTP\n        const { data: factors } = await supabase.auth.mfa.listFactors();\n        const totpFactor = factors?.totp?.[0];\n\n        if (!totpFactor) {\n          throw new Error('Aucun facteur 2FA trouv');\n        }\n\n        const challenge = await supabase.auth.mfa.challenge({ \n          factorId: totpFactor.id \n        });\n\n        if (challenge.error) throw challenge.error;\n\n        const verify = await supabase.auth.mfa.verify({\n          factorId: totpFactor.id,\n          challengeId: challenge.data.id,\n          code,\n        });\n\n        if (verify.error) throw verify.error;\n\n        success = true;\n        await supabase.rpc('log_mfa_attempt', {\n          _success: true,\n          _attempt_type: 'totp',\n        });\n\n        toast({\n          title: 'Vrification russie',\n          description: 'Connexion en cours...',\n        });\n        onVerified();\n      }\n    } catch (error: any) {\n      await supabase.rpc('log_mfa_attempt', {\n        _success: false,\n        _attempt_type: useBackupCode ? 'backup_code' : 'totp',\n      });\n\n      setAttemptCount(prev => prev + 1);\n\n      toast({\n        title: useBackupCode ? 'Code de rcupration invalide' : 'Code invalide',\n        description: 'Veuillez vrifier le code et ressayer',\n        variant: 'destructive',\n      });\n      setCode('');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Card className=\"w-full max-w-md\">\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <Shield className=\"h-5 w-5\" />\n          Authentification  deux facteurs\n        </CardTitle>\n        <CardDescription>\n          {useBackupCode \n            ? 'Entrez un code de rcupration' \n            : \"Entrez le code  6 chiffres de votre application d'authentification\"\n          }\n        </CardDescription>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        {isRateLimited && (\n          <Alert variant=\"destructive\">\n            <AlertTriangle className=\"h-4 w-4\" />\n            <AlertDescription>\n              Trop de tentatives choues. Veuillez ressayer dans 15 minutes.\n            </AlertDescription>\n          </Alert>\n        )}\n\n        <Input\n          type=\"text\"\n          placeholder={useBackupCode ? \"XXXXXXXX\" : \"000000\"}\n          maxLength={useBackupCode ? 8 : 6}\n          value={code}\n          onChange={(e) => setCode(useBackupCode ? e.target.value.toUpperCase() : e.target.value.replace(/\\D/g, ''))}\n          className=\"text-center text-2xl tracking-widest\"\n          autoFocus\n          disabled={isRateLimited}\n        />\n\n        <div className=\"flex flex-col gap-2\">\n          <div className=\"flex gap-2\">\n            <Button \n              onClick={handleVerify} \n              disabled={loading || code.length < 6 || isRateLimited}\n              className=\"flex-1\"\n            >\n              {loading && <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />}\n              Vrifier\n            </Button>\n            <Button \n              variant=\"outline\" \n              onClick={onCancel}\n            >\n              Annuler\n            </Button>\n          </div>\n\n          <Button\n            variant=\"link\"\n            onClick={() => {\n              setUseBackupCode(!useBackupCode);\n              setCode('');\n            }}\n            className=\"text-sm\"\n          >\n            {useBackupCode \n              ? \"Utiliser le code d'authentification\" \n              : 'Utiliser un code de rcupration'\n            }\n          </Button>\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n","/**\n * Utilitaires pour la gestion des IPs et fingerprints\n * Utilis pour le rate limiting et la protection DDoS\n */\n\n/**\n * Rcupre l'IP du client via un service externe\n * Fallback sur '0.0.0.0' en cas d'chec\n */\nimport { logger } from '@/services/logger';\n\nexport const getClientIP = async (): Promise<string> => {\n  try {\n    const response = await fetch('https://api.ipify.org?format=json');\n    const data = await response.json();\n    return data.ip || '0.0.0.0';\n  } catch (error) {\n    logger.logError(error, { context: 'ipUtils', action: 'getClientIP' });\n    return '0.0.0.0';\n  }\n};\n\n/**\n * Gnre un fingerprint unique bas sur les caractristiques du navigateur\n * Utilis pour identifier les tentatives de connexion suspectes\n */\nexport const getDeviceFingerprint = (): string => {\n  const canvas = document.createElement('canvas');\n  const ctx = canvas.getContext('2d');\n  if (!ctx) return 'unknown';\n  \n  ctx.textBaseline = 'top';\n  ctx.font = '14px Arial';\n  ctx.fillText('Fingerprint', 2, 2);\n  \n  const canvasHash = canvas.toDataURL().slice(-50);\n  \n  const fingerprint = {\n    userAgent: navigator.userAgent,\n    language: navigator.language,\n    colorDepth: screen.colorDepth,\n    screenResolution: `${screen.width}x${screen.height}`,\n    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n    canvas: canvasHash,\n  };\n  \n  return btoa(JSON.stringify(fingerprint)).slice(0, 64);\n};\n\n/**\n * Formate un timestamp pour affichage du temps restant\n */\nexport const formatRetryAfter = (retryAfter: string): string => {\n  const diff = new Date(retryAfter).getTime() - Date.now();\n  if (diff <= 0) return 'maintenant';\n  \n  const minutes = Math.ceil(diff / 60000);\n  if (minutes < 60) return `${minutes} minute${minutes > 1 ? 's' : ''}`;\n  \n  const hours = Math.ceil(minutes / 60);\n  return `${hours} heure${hours > 1 ? 's' : ''}`;\n};\n","import { Link } from \"react-router-dom\";\nimport { Search, BookOpen, HelpCircle, Home } from \"lucide-react\";\nimport { Card } from \"@/components/ui/card\";\n\ninterface QuickNavProps {\n  variant?: \"auth\" | \"dashboard\" | \"property\";\n}\n\nexport const QuickNav = ({ variant = \"auth\" }: QuickNavProps) => {\n  const links = {\n    auth: [\n      { to: \"/explorer\", icon: Home, label: \"Explorer les biens\" },\n      { to: \"/guide\", icon: BookOpen, label: \"Comment a marche\" },\n      { to: \"/guide#aide\", icon: HelpCircle, label: \"Besoin d'aide ?\" }\n    ],\n    dashboard: [\n      { to: \"/recherche\", icon: Search, label: \"Rechercher\" },\n      { to: \"/explorer\", icon: Home, label: \"Explorer\" },\n      { to: \"/guide\", icon: BookOpen, label: \"Guide\" }\n    ],\n    property: [\n      { to: \"/recherche\", icon: Search, label: \"Autres biens\" },\n      { to: \"/dashboard\", icon: Home, label: \"Mon espace\" },\n      { to: \"/guide\", icon: HelpCircle, label: \"Aide\" }\n    ]\n  };\n\n  const currentLinks = links[variant];\n\n  return (\n    <Card className=\"p-4 bg-muted/30 border-border/50\">\n      <p className=\"text-sm font-medium text-foreground/80 mb-3\">Accs rapide</p>\n      <div className=\"flex flex-wrap gap-2\">\n        {currentLinks.map(({ to, icon: Icon, label }) => (\n          <Link\n            key={to}\n            to={to}\n            className=\"flex items-center gap-2 px-3 py-1.5 rounded-md bg-background hover:bg-primary/10 text-sm font-medium text-foreground/70 hover:text-primary transition-smooth border border-border/50\"\n          >\n            <Icon className=\"h-4 w-4\" />\n            {label}\n          </Link>\n        ))}\n      </div>\n    </Card>\n  );\n};\n","import { Link } from \"react-router-dom\";\nimport { Home, ArrowLeft } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\n\ninterface NavigationHelpProps {\n  backTo?: string;\n  backLabel?: string;\n  showHome?: boolean;\n}\n\nexport const NavigationHelp = ({ \n  backTo, \n  backLabel = \"Retour\", \n  showHome = true \n}: NavigationHelpProps) => {\n  return (\n    <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n      {backTo && (\n        <Button variant=\"ghost\" size=\"sm\" asChild>\n          <Link to={backTo} className=\"gap-2\">\n            <ArrowLeft className=\"h-4 w-4\" />\n            {backLabel}\n          </Link>\n        </Button>\n      )}\n      {showHome && (\n        <Button variant=\"ghost\" size=\"sm\" asChild>\n          <Link to=\"/\" className=\"gap-2\">\n            <Home className=\"h-4 w-4\" />\n            <span className=\"hidden sm:inline\">Accueil</span>\n          </Link>\n        </Button>\n      )}\n    </div>\n  );\n};\n","import { useState, useEffect } from 'react';\nimport { useAuth } from '@/hooks/useAuth';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Shield, Home, Eye, EyeOff, AlertTriangle } from 'lucide-react';\nimport { Link } from 'react-router-dom';\nimport { z } from 'zod';\nimport { supabase } from '@/lib/supabase';\nimport { TwoFactorVerify } from '@/components/auth/TwoFactorVerify';\nimport { toast } from '@/hooks/use-toast';\nimport { getClientIP, getDeviceFingerprint, formatRetryAfter } from '@/lib/ipUtils';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { logger } from '@/services/logger';\nimport { PageTransition } from '@/components/navigation/PageTransition';\nimport { BrandBar } from '@/components/ui/brand-bar';\nimport Navbar from \"@/components/Navbar\";\nimport Footer from \"@/components/Footer\";\nimport { DynamicBreadcrumb } from \"@/components/navigation/DynamicBreadcrumb\";\nimport { QuickNav } from \"@/components/navigation/QuickNav\";\nimport { NavigationHelp } from \"@/components/navigation/NavigationHelp\";\nimport { LazyIllustration } from \"@/components/illustrations/LazyIllustration\";\nimport { getIllustrationPath } from \"@/lib/utils\";\n\nconst signUpSchema = z.object({\n  email: z.string().email({ message: \"Email invalide\" }),\n  password: z\n    .string()\n    .min(8, { message: \"Le mot de passe doit contenir au moins 8 caractres\" })\n    .regex(/[A-Z]/, { message: \"Le mot de passe doit contenir au moins une majuscule\" })\n    .regex(/[a-z]/, { message: \"Le mot de passe doit contenir au moins une minuscule\" })\n    .regex(/[0-9]/, { message: \"Le mot de passe doit contenir au moins un chiffre\" })\n    .regex(/[^A-Za-z0-9]/, { message: \"Le mot de passe doit contenir au moins un caractre spcial\" }),\n  fullName: z.string().min(2, { message: \"Le nom complet doit contenir au moins 2 caractres\" }),\n  userType: z.enum(['locataire', 'proprietaire', 'agence']),\n});\n\nconst signInSchema = z.object({\n  email: z.string().email({ message: \"Email invalide\" }),\n  password: z.string().min(6, { message: \"Le mot de passe doit contenir au moins 6 caractres\" }),\n});\n\ntype ValidationErrors = Partial<Record<'email' | 'password' | 'fullName' | 'userType', string>>;\n\nconst Auth = () => {\n  const { signUp, signIn, user, hasRole } = useAuth();\n  const navigate = useNavigate();\n  const [searchParams] = useSearchParams();\n  \n  // Lire le type depuis l'URL\n  const userTypeFromUrl = searchParams.get('type') as 'locataire' | 'proprietaire' | 'agence' | null;\n\n  // Sign Up form\n  const [signUpEmail, setSignUpEmail] = useState('');\n  const [signUpPassword, setSignUpPassword] = useState('');\n  const [fullName, setFullName] = useState('');\n  const [userType, setUserType] = useState<'locataire' | 'proprietaire' | 'agence'>(userTypeFromUrl || 'locataire');\n  const [signUpErrors, setSignUpErrors] = useState<ValidationErrors>({});\n\n  // Sign In form\n  const [signInEmail, setSignInEmail] = useState('');\n  const [signInPassword, setSignInPassword] = useState('');\n  const [signInErrors, setSignInErrors] = useState<ValidationErrors>({});\n\n  const [loading, setLoading] = useState(false);\n  const [show2FA, setShow2FA] = useState(false);\n  const [pendingUserId, setPendingUserId] = useState<string | null>(null);\n  \n  // Password visibility toggles\n  const [showSignInPassword, setShowSignInPassword] = useState(false);\n  const [showSignUpPassword, setShowSignUpPassword] = useState(false);\n\n  // Rate limiting states\n  const [isBlocked, setIsBlocked] = useState(false);\n  const [blockMessage, setBlockMessage] = useState('');\n  const [retryAfter, setRetryAfter] = useState<string | null>(null);\n\n  // Redirect if already authenticated\n  useEffect(() => {\n    if (user) {\n      // Si l'utilisateur est dj connect et essaie d'accder  /auth avec un type\n      // (ex: /auth?type=agence), on le redirige vers son profil pour grer ses rles\n      if (userTypeFromUrl && userTypeFromUrl !== user.user_metadata?.user_type) {\n        toast({\n          title: \"Dj connect\",\n          description: \"Vous tes dj connect. Rendez-vous dans votre profil pour grer vos rles.\",\n        });\n        navigate('/profil', { replace: true });\n      } else {\n        navigate('/', { replace: true });\n      }\n    }\n  }, [user, navigate, userTypeFromUrl]);\n\n  const handleSignUp = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setSignUpErrors({});\n    \n    const validation = signUpSchema.safeParse({\n      email: signUpEmail,\n      password: signUpPassword,\n      fullName,\n      userType,\n    });\n\n    if (!validation.success) {\n      const errors: ValidationErrors = {};\n      validation.error.errors.forEach((err) => {\n        const field = err.path[0] as keyof ValidationErrors;\n        errors[field] = err.message;\n      });\n      setSignUpErrors(errors);\n      return;\n    }\n\n    setLoading(true);\n    const { error } = await signUp(signUpEmail, signUpPassword, fullName, userType);\n    setLoading(false);\n\n    if (!error) {\n      navigate('/');\n    }\n  };\n\n  const handleSignIn = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setSignInErrors({});\n    setIsBlocked(false);\n\n    const validation = signInSchema.safeParse({\n      email: signInEmail,\n      password: signInPassword,\n    });\n\n    if (!validation.success) {\n      const errors: ValidationErrors = {};\n      validation.error.errors.forEach((err) => {\n        const field = err.path[0] as keyof ValidationErrors;\n        errors[field] = err.message;\n      });\n      setSignInErrors(errors);\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      // Get IP and fingerprint\n      const ipAddress = await getClientIP();\n      const fingerprint = getDeviceFingerprint();\n\n      // Check rate limit before attempting sign in\n      const { data: rateLimitCheck } = await supabase.rpc('check_login_rate_limit', {\n        _email: signInEmail,\n        _ip_address: ipAddress\n      }) as { data: { allowed: boolean; reason?: string; retry_after?: string; blocked?: boolean; show_captcha?: boolean; failed_count?: number } | null };\n\n      if (rateLimitCheck && typeof rateLimitCheck === 'object' && 'allowed' in rateLimitCheck && !rateLimitCheck.allowed) {\n        setIsBlocked(true);\n        setBlockMessage(rateLimitCheck.reason || 'Trop de tentatives');\n        if (rateLimitCheck.retry_after) {\n          setRetryAfter(formatRetryAfter(rateLimitCheck.retry_after));\n        }\n        setLoading(false);\n        return;\n      }\n\n      const { error } = await signIn(signInEmail, signInPassword);\n\n      // Log login attempt\n      await supabase.from('login_attempts').insert({\n        email: signInEmail,\n        ip_address: ipAddress,\n        user_agent: navigator.userAgent,\n        success: !error,\n        fingerprint: fingerprint\n      });\n\n      setLoading(false);\n\n      if (!error) {\n        // Check if user is admin and requires 2FA\n        const { data: { user: currentUser } } = await supabase.auth.getUser();\n        \n        if (currentUser) {\n          const { data: roles } = await supabase\n            .from('user_roles')\n            .select('role')\n            .eq('user_id', currentUser.id);\n\n          const isAdmin = roles?.some(r => r.role === 'admin');\n\n          if (isAdmin) {\n            // Check if 2FA is enabled\n            const { data: factors } = await supabase.auth.mfa.listFactors();\n            \n            if (factors?.totp && factors.totp.length > 0) {\n              setPendingUserId(currentUser.id);\n              setShow2FA(true);\n              return;\n            }\n          }\n        }\n\n        navigate('/');\n      }\n    } catch (err) {\n      logger.logError(err, { context: 'Auth', action: 'signIn', email: signInEmail });\n      setLoading(false);\n    }\n  };\n\n  const handle2FAVerified = () => {\n    setShow2FA(false);\n    setPendingUserId(null);\n    navigate('/');\n  };\n\n  const handle2FACancel = async () => {\n    await supabase.auth.signOut();\n    setShow2FA(false);\n    setPendingUserId(null);\n  };\n\n  const handleForgotPassword = async () => {\n    if (!signInEmail) {\n      toast({\n        title: \"Email requis\",\n        description: \"Veuillez entrer votre email d'abord\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    const { error } = await supabase.auth.resetPasswordForEmail(signInEmail, {\n      redirectTo: `${window.location.origin}/reset-password`,\n    });\n\n    if (error) {\n      toast({\n        title: \"Erreur\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    } else {\n      toast({\n        title: \"Email envoy\",\n        description: \"Consultez votre bote mail pour rinitialiser votre mot de passe\",\n      });\n    }\n  };\n\n  const handleGoogleSignIn = async () => {\n    try {\n      setLoading(true);\n      \n      const { data, error } = await supabase.auth.signInWithOAuth({\n        provider: 'google',\n        options: {\n          redirectTo: `${window.location.origin}/`,\n          queryParams: {\n            access_type: 'offline',\n            prompt: 'consent',\n          }\n        }\n      });\n      \n      if (error) {\n        logger.logError(error, { context: 'Auth', action: 'googleOAuth', stage: 'initial' });\n        throw error;\n      }\n\n      if (!data.url) {\n        throw new Error('Aucune URL de redirection OAuth reue');\n      }\n\n      // La redirection vers Google se fera automatiquement\n      logger.debug('Redirection vers Google OAuth', { url: data.url });\n      \n    } catch (error: any) {\n      logger.logError(error, { context: 'Auth', action: 'googleSignIn', stage: 'complete' });\n      \n      let errorMessage = 'Impossible de se connecter avec Google';\n      \n      if (error.message?.includes('OAuth')) {\n        errorMessage = 'Le service Google OAuth n\\'est pas configur ou temporairement indisponible. Veuillez utiliser l\\'email et le mot de passe pour vous connecter.';\n      } else if (error.message?.includes('network')) {\n        errorMessage = 'Erreur de connexion. Vrifiez votre connexion internet et ressayez.';\n      } else if (error.message) {\n        errorMessage = error.message;\n      }\n      \n      toast({\n        title: \"Erreur de connexion Google\",\n        description: errorMessage,\n        variant: \"destructive\",\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (show2FA) {\n    return (\n      <>\n        <Navbar />\n        <div className=\"min-h-screen bg-background pt-20\">\n          <div className=\"container mx-auto px-4 py-8 max-w-md\">\n            <TwoFactorVerify \n              onVerified={handle2FAVerified}\n              onCancel={handle2FACancel}\n            />\n          </div>\n        </div>\n        <Footer />\n      </>\n    );\n  }\n\n  return (\n    <>\n      <Navbar />\n      <div className=\"min-h-screen bg-background pt-20\">\n        <div className=\"container mx-auto px-4 py-8 max-w-6xl\">\n          <DynamicBreadcrumb />\n          \n          {/* Hero Illustration */}\n          <div className=\"mb-8\">\n            <LazyIllustration\n              src={getIllustrationPath(\"ivorian-family-house\")}\n              alt=\"Trouvez votre logement en Cte d'Ivoire\"\n              className=\"w-full h-[250px] md:h-[300px] rounded-2xl\"\n              animate={true}\n            />\n          </div>\n\n          <div className=\"grid md:grid-cols-2 gap-8 items-start\">\n            {/* Left Side - Benefits */}\n            <div className=\"space-y-6\">\n              <NavigationHelp backTo=\"/\" backLabel=\"Retour  l'accueil\" />\n              \n              <div className=\"space-y-4\">\n                <h1 className=\"text-4xl font-bold text-foreground\">\n                  Bienvenue sur Mon Toit\n                </h1>\n                <p className=\"text-lg text-muted-foreground\">\n                  La plateforme immobilire certifie ANSUT pour la Cte d'Ivoire\n                </p>\n                <ul className=\"space-y-3\">\n                  <li className=\"flex items-start gap-3\">\n                    <Shield className=\"h-5 w-5 text-primary mt-0.5 flex-shrink-0\" />\n                    <div>\n                      <p className=\"font-medium text-foreground\">Scurit garantie</p>\n                      <p className=\"text-sm text-muted-foreground\">Tous les utilisateurs sont vrifis par l'ANSUT</p>\n                    </div>\n                  </li>\n                  <li className=\"flex items-start gap-3\">\n                    <Home className=\"h-5 w-5 text-primary mt-0.5 flex-shrink-0\" />\n                    <div>\n                      <p className=\"font-medium text-foreground\">Biens certifis</p>\n                      <p className=\"text-sm text-muted-foreground\">Des logements vrifis et conformes</p>\n                    </div>\n                  </li>\n                </ul>\n              </div>\n              \n              <QuickNav variant=\"auth\" />\n            </div>\n\n            {/* Right Side - Auth Form */}\n            <div className=\"space-y-6\">\n              <Tabs defaultValue=\"signin\" className=\"w-full\">\n          <TabsList className=\"grid w-full grid-cols-2\">\n            <TabsTrigger value=\"signin\">Connexion</TabsTrigger>\n            <TabsTrigger value=\"signup\">Inscription</TabsTrigger>\n          </TabsList>\n\n          {/* Sign In Tab */}\n          <TabsContent value=\"signin\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Connexion</CardTitle>\n                <CardDescription>Connectez-vous  votre compte Mon Toit</CardDescription>\n                {userTypeFromUrl && (\n                  <p className=\"text-xs text-muted-foreground mt-2 bg-muted/50 p-2 rounded\">\n                     <strong>Vous avez dj un compte ?</strong> Connectez-vous puis grez vos rles depuis <Link to=\"/profil\" className=\"text-primary hover:underline font-medium\">votre profil</Link>\n                  </p>\n                )}\n              </CardHeader>\n              <form onSubmit={handleSignIn}>\n                <CardContent className=\"space-y-4\">\n                  {isBlocked && (\n                    <Alert variant=\"destructive\">\n                      <AlertTriangle className=\"h-4 w-4\" />\n                      <AlertDescription>\n                        {blockMessage}\n                        {retryAfter && ` Ressayez dans ${retryAfter}.`}\n                      </AlertDescription>\n                    </Alert>\n                  )}\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"signin-email\">Email</Label>\n                    <Input\n                      id=\"signin-email\"\n                      type=\"email\"\n                      inputMode=\"email\"\n                      autoComplete=\"email\"\n                      placeholder=\"votre@email.com\"\n                      value={signInEmail}\n                      onChange={(e) => setSignInEmail(e.target.value)}\n                      required\n                    />\n                    {signInErrors.email && (\n                      <p className=\"text-sm text-destructive\">{signInErrors.email}</p>\n                    )}\n                  </div>\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"signin-password\">Mot de passe</Label>\n                    <div className=\"relative\">\n                      <Input\n                        id=\"signin-password\"\n                        type={showSignInPassword ? \"text\" : \"password\"}\n                        autoComplete=\"current-password\"\n                        placeholder=\"\"\n                        value={signInPassword}\n                        onChange={(e) => setSignInPassword(e.target.value)}\n                        required\n                      />\n                      <button\n                        type=\"button\"\n                        onClick={() => setShowSignInPassword(!showSignInPassword)}\n                        className=\"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors\"\n                        aria-label={showSignInPassword ? 'Masquer le mot de passe' : 'Afficher le mot de passe'}\n                      >\n                        {showSignInPassword ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\n                      </button>\n                    </div>\n                    {signInErrors.password && (\n                      <p className=\"text-sm text-destructive\">{signInErrors.password}</p>\n                    )}\n                  </div>\n                  <div className=\"flex justify-end\">\n                    <button\n                      type=\"button\"\n                      onClick={handleForgotPassword}\n                      className=\"text-sm text-primary hover:underline\"\n                    >\n                      Mot de passe oubli ?\n                    </button>\n                  </div>\n                </CardContent>\n                <CardFooter className=\"flex-col gap-3\">\n                  <Button type=\"submit\" className=\"w-full\" disabled={loading}>\n                    {loading ? 'Connexion...' : 'Se connecter'}\n                  </Button>\n                  \n                  <div className=\"relative w-full\">\n                    <div className=\"absolute inset-0 flex items-center\">\n                      <span className=\"w-full border-t\" />\n                    </div>\n                    <div className=\"relative flex justify-center text-xs uppercase\">\n                      <span className=\"bg-background px-2 text-muted-foreground\">\n                        Ou continuer avec\n                      </span>\n                    </div>\n                  </div>\n\n                  <Button \n                    type=\"button\" \n                    variant=\"outline\" \n                    className=\"w-full\" \n                    onClick={handleGoogleSignIn}\n                  >\n                    <svg className=\"mr-2 h-4 w-4\" viewBox=\"0 0 24 24\">\n                      <path\n                        fill=\"currentColor\"\n                        d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"\n                      />\n                      <path\n                        fill=\"currentColor\"\n                        d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"\n                      />\n                      <path\n                        fill=\"currentColor\"\n                        d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"\n                      />\n                      <path\n                        fill=\"currentColor\"\n                        d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"\n                      />\n                    </svg>\n                    Continuer avec Google\n                  </Button>\n                </CardFooter>\n              </form>\n            </Card>\n          </TabsContent>\n\n          {/* Sign Up Tab */}\n          <TabsContent value=\"signup\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Inscription</CardTitle>\n                <CardDescription>\n                  {userTypeFromUrl === 'agence' && 'Crez votre compte Agence immobilire'}\n                  {userTypeFromUrl === 'proprietaire' && 'Crez votre compte Propritaire'}\n                  {userTypeFromUrl === 'locataire' && 'Crez votre compte Locataire'}\n                  {!userTypeFromUrl && 'Crez votre compte Mon Toit'}\n                </CardDescription>\n                {userTypeFromUrl && (\n                  <p className=\"text-xs text-muted-foreground mt-2 bg-muted/50 p-2 rounded\">\n                     <strong>Vous voulez ajouter ce rle  un compte existant ?</strong> Connectez-vous puis <Link to=\"/profil\" className=\"text-primary hover:underline font-medium\">grez vos rles depuis votre profil</Link>\n                  </p>\n                )}\n              </CardHeader>\n              <form onSubmit={handleSignUp}>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"fullname\">Nom complet</Label>\n                    <Input\n                      id=\"fullname\"\n                      type=\"text\"\n                      placeholder=\"Jean Kouam\"\n                      value={fullName}\n                      onChange={(e) => setFullName(e.target.value)}\n                      required\n                    />\n                    {signUpErrors.fullName && (\n                      <p className=\"text-sm text-destructive\">{signUpErrors.fullName}</p>\n                    )}\n                  </div>\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"signup-email\">Email</Label>\n                    <Input\n                      id=\"signup-email\"\n                      type=\"email\"\n                      inputMode=\"email\"\n                      autoComplete=\"email\"\n                      placeholder=\"votre@email.com\"\n                      value={signUpEmail}\n                      onChange={(e) => setSignUpEmail(e.target.value)}\n                      required\n                    />\n                    {signUpErrors.email && (\n                      <p className=\"text-sm text-destructive\">{signUpErrors.email}</p>\n                    )}\n                  </div>\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"signup-password\">Mot de passe</Label>\n                    <div className=\"relative\">\n                      <Input\n                        id=\"signup-password\"\n                        type={showSignUpPassword ? \"text\" : \"password\"}\n                        autoComplete=\"new-password\"\n                        placeholder=\"\"\n                        value={signUpPassword}\n                        onChange={(e) => setSignUpPassword(e.target.value)}\n                        required\n                      />\n                      <button\n                        type=\"button\"\n                        onClick={() => setShowSignUpPassword(!showSignUpPassword)}\n                        className=\"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors\"\n                        aria-label={showSignUpPassword ? 'Masquer le mot de passe' : 'Afficher le mot de passe'}\n                      >\n                        {showSignUpPassword ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\n                      </button>\n                    </div>\n                    {signUpErrors.password && (\n                      <p className=\"text-sm text-destructive\">{signUpErrors.password}</p>\n                    )}\n                  </div>\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"usertype\">Type de compte</Label>\n                    <Select value={userType} onValueChange={(value: 'locataire' | 'proprietaire' | 'agence') => setUserType(value)}>\n                      <SelectTrigger id=\"usertype\">\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"locataire\"> Locataire - Je cherche un logement</SelectItem>\n                        <SelectItem value=\"proprietaire\"> Propritaire - Je loue mes biens</SelectItem>\n                        <SelectItem value=\"agence\"> Agence - Je gre un portfolio</SelectItem>\n                      </SelectContent>\n                    </Select>\n                    {signUpErrors.userType && (\n                      <p className=\"text-sm text-destructive\">{signUpErrors.userType}</p>\n                    )}\n                  </div>\n                </CardContent>\n                <CardFooter className=\"flex-col gap-2\">\n                  <Button type=\"submit\" className=\"w-full\" disabled={loading}>\n                    {loading ? 'Cration...' : 'Crer mon compte'}\n                  </Button>\n                  <div className=\"flex items-center gap-1 text-xs text-muted-foreground\">\n                    <Shield className=\"h-3 w-3\" />\n                    <span>Plateforme certifie ANSUT</span>\n                  </div>\n                </CardFooter>\n              </form>\n            </Card>\n          </TabsContent>\n        </Tabs>\n\n        {/* Footer */}\n        <p className=\"text-center text-sm text-muted-foreground\">\n          En crant un compte, vous acceptez nos{' '}\n          <Link to=\"/conditions\" className=\"text-primary hover:underline\">\n            conditions d'utilisation\n          </Link>\n        </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      <Footer />\n    </>\n  );\n};\n\nexport default Auth;\n","export const KentePattern = () => (\n  <svg className=\"absolute inset-0 w-full h-full opacity-5 pointer-events-none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <defs>\n      <pattern id=\"kente\" x=\"0\" y=\"0\" width=\"100\" height=\"100\" patternUnits=\"userSpaceOnUse\">\n        {/* Lignes horizontales */}\n        <rect x=\"0\" y=\"0\" width=\"100\" height=\"10\" fill=\"hsl(30 100% 50%)\" />\n        <rect x=\"0\" y=\"20\" width=\"100\" height=\"10\" fill=\"hsl(142 76% 36%)\" />\n        <rect x=\"0\" y=\"40\" width=\"100\" height=\"10\" fill=\"hsl(45 100% 51%)\" />\n        \n        {/* Lignes verticales */}\n        <rect x=\"0\" y=\"0\" width=\"10\" height=\"100\" fill=\"hsl(30 100% 50%)\" opacity=\"0.5\" />\n        <rect x=\"30\" y=\"0\" width=\"10\" height=\"100\" fill=\"hsl(142 76% 36%)\" opacity=\"0.5\" />\n        <rect x=\"60\" y=\"0\" width=\"10\" height=\"100\" fill=\"hsl(45 100% 51%)\" opacity=\"0.5\" />\n        \n        {/* Motifs gomtriques */}\n        <circle cx=\"25\" cy=\"25\" r=\"5\" fill=\"hsl(30 100% 50%)\" />\n        <circle cx=\"75\" cy=\"75\" r=\"5\" fill=\"hsl(142 76% 36%)\" />\n      </pattern>\n    </defs>\n    <rect width=\"100%\" height=\"100%\" fill=\"url(#kente)\" />\n  </svg>\n);\n\nexport const BogolanPattern = () => (\n  <svg className=\"absolute inset-0 w-full h-full opacity-5 pointer-events-none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <defs>\n      <pattern id=\"bogolan\" x=\"0\" y=\"0\" width=\"80\" height=\"80\" patternUnits=\"userSpaceOnUse\">\n        {/* Lignes organiques */}\n        <path d=\"M 0 20 Q 20 10, 40 20 T 80 20\" stroke=\"hsl(30 25% 35%)\" strokeWidth=\"2\" fill=\"none\" />\n        <path d=\"M 0 40 Q 20 30, 40 40 T 80 40\" stroke=\"hsl(30 25% 35%)\" strokeWidth=\"2\" fill=\"none\" />\n        <path d=\"M 0 60 Q 20 50, 40 60 T 80 60\" stroke=\"hsl(30 25% 35%)\" strokeWidth=\"2\" fill=\"none\" />\n        \n        {/* Points dcoratifs */}\n        <circle cx=\"10\" cy=\"10\" r=\"2\" fill=\"hsl(30 25% 35%)\" />\n        <circle cx=\"30\" cy=\"30\" r=\"2\" fill=\"hsl(30 25% 35%)\" />\n        <circle cx=\"50\" cy=\"50\" r=\"2\" fill=\"hsl(30 25% 35%)\" />\n        <circle cx=\"70\" cy=\"70\" r=\"2\" fill=\"hsl(30 25% 35%)\" />\n      </pattern>\n    </defs>\n    <rect width=\"100%\" height=\"100%\" fill=\"url(#bogolan)\" />\n  </svg>\n);\n\nexport const AkanPattern = () => (\n  <svg className=\"absolute inset-0 w-full h-full opacity-5 pointer-events-none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <defs>\n      <pattern id=\"akan\" x=\"0\" y=\"0\" width=\"60\" height=\"60\" patternUnits=\"userSpaceOnUse\">\n        {/* Spirales Akan (symbole de sagesse) */}\n        <path \n          d=\"M 30 15 Q 35 20, 30 25 Q 25 30, 20 25 Q 15 20, 20 15 Q 25 10, 30 15\" \n          stroke=\"hsl(45 100% 51%)\" \n          strokeWidth=\"1.5\" \n          fill=\"none\" \n        />\n        \n        {/* Croix (symbole d'unit) */}\n        <line x1=\"30\" y1=\"35\" x2=\"30\" y2=\"55\" stroke=\"hsl(142 76% 36%)\" strokeWidth=\"2\" />\n        <line x1=\"20\" y1=\"45\" x2=\"40\" y2=\"45\" stroke=\"hsl(142 76% 36%)\" strokeWidth=\"2\" />\n      </pattern>\n    </defs>\n    <rect width=\"100%\" height=\"100%\" fill=\"url(#akan)\" />\n  </svg>\n);\n\n","import { useEffect, useRef } from 'react';\n\n/**\n * Hook pour piger le focus dans un conteneur (modal, drawer)\n * Conforme WCAG 2.1 - Gestion du focus accessible\n */\nexport const useFocusTrap = (isOpen: boolean) => {\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (!isOpen) return;\n\n    const container = containerRef.current;\n    if (!container) return;\n\n    // Slectionner tous les lments focusables\n    const focusableElements = container.querySelectorAll<HTMLElement>(\n      'button:not([disabled]), [href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex=\"-1\"])'\n    );\n\n    const firstElement = focusableElements[0];\n    const lastElement = focusableElements[focusableElements.length - 1];\n\n    // Grer la navigation Tab\n    const handleTab = (e: KeyboardEvent) => {\n      if (e.key !== 'Tab') return;\n\n      if (e.shiftKey) {\n        // Shift+Tab : retour arrire\n        if (document.activeElement === firstElement) {\n          e.preventDefault();\n          lastElement?.focus();\n        }\n      } else {\n        // Tab : avancer\n        if (document.activeElement === lastElement) {\n          e.preventDefault();\n          firstElement?.focus();\n        }\n      }\n    };\n\n    // Focus automatique au premier lment  l'ouverture\n    firstElement?.focus();\n\n    document.addEventListener('keydown', handleTab);\n    return () => document.removeEventListener('keydown', handleTab);\n  }, [isOpen]);\n\n  return containerRef;\n};\n","import { useState } from 'react';\nimport { useFocusTrap } from '@/hooks/useFocusTrap';\nimport { Button } from '@/components/ui/button';\nimport { Sheet, SheetContent, SheetHeader, SheetTitle, SheetTrigger } from '@/components/ui/sheet';\nimport { Badge } from '@/components/ui/badge';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Slider } from '@/components/ui/slider';\nimport { Filter, X, ChevronRight, ChevronLeft } from 'lucide-react';\nimport { CITIES, PROPERTY_TYPES } from '@/constants';\nimport { triggerHapticFeedback } from '@/utils/haptics';\nimport { toast } from '@/hooks/use-toast';\nimport type { PropertyFilters } from '@/components/PropertyFilters';\n\ninterface MobileFiltersProps {\n  onFilterChange: (filters: PropertyFilters) => void;\n  onReset: () => void;\n  currentFilters?: PropertyFilters;\n}\n\nconst MobileFilters = ({ onFilterChange, onReset, currentFilters = {} }: MobileFiltersProps) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [step, setStep] = useState(1);\n  const containerRef = useFocusTrap(isOpen);\n  const [filters, setFilters] = useState<PropertyFilters>(currentFilters);\n  const [priceRange, setPriceRange] = useState<[number, number]>([\n    currentFilters.minPrice ?? 0,\n    currentFilters.maxPrice ?? 1000000\n  ]);\n  const [surfaceRange, setSurfaceRange] = useState<[number, number]>([\n    currentFilters.minSurface ?? 0,\n    currentFilters.maxSurface ?? 500\n  ]);\n\n  const validateFilters = (): boolean => {\n    if (priceRange[0] > priceRange[1]) {\n      toast({\n        title: \"Erreur de validation\",\n        description: \"Le prix minimum ne peut pas tre suprieur au prix maximum\",\n        variant: \"destructive\",\n      });\n      return false;\n    }\n    if (surfaceRange[0] > surfaceRange[1]) {\n      toast({\n        title: \"Erreur de validation\",\n        description: \"La surface minimum ne peut pas tre suprieure  la surface maximum\",\n        variant: \"destructive\",\n      });\n      return false;\n    }\n    return true;\n  };\n\n  const handleApply = () => {\n    if (!validateFilters()) return;\n    \n    const finalFilters: PropertyFilters = {\n      ...filters,\n      minPrice: priceRange[0],\n      maxPrice: priceRange[1],\n      minSurface: surfaceRange[0],\n      maxSurface: surfaceRange[1],\n    };\n    \n    triggerHapticFeedback('medium');\n    onFilterChange(finalFilters);\n    setIsOpen(false);\n    toast({\n      description: \" Filtres appliqus\",\n      duration: 2000,\n    });\n  };\n\n  const handleResetSection = () => {\n    triggerHapticFeedback('light');\n    if (step === 1) {\n      setFilters({ ...filters, city: undefined });\n    } else if (step === 2) {\n      setPriceRange([0, 1000000]);\n      setSurfaceRange([0, 500]);\n    } else if (step === 3) {\n      setFilters({ ...filters, propertyType: undefined, bedrooms: undefined, bathrooms: undefined });\n    } else if (step === 4) {\n      setFilters({\n        ...filters,\n        isFurnished: undefined,\n        hasAc: undefined,\n        hasParking: undefined,\n        hasGarden: undefined,\n        hasVideo: undefined,\n        has360View: undefined,\n        hasVirtualTour: undefined,\n        isAnsutCertified: undefined,\n      });\n    }\n  };\n\n  const handleResetAll = () => {\n    triggerHapticFeedback('medium');\n    setFilters({});\n    setPriceRange([0, 1000000]);\n    setSurfaceRange([0, 500]);\n    onReset();\n    setIsOpen(false);\n    toast({\n      description: \"Tous les filtres ont t rinitialiss\",\n      duration: 2000,\n    });\n  };\n\n  const activeFiltersCount = Object.keys(filters).filter(\n    key => filters[key as keyof PropertyFilters] !== undefined\n  ).length;\n\n  const steps = [\n    { number: 1, title: 'Localisation' },\n    { number: 2, title: 'Budget' },\n    { number: 3, title: 'Type de bien' },\n    { number: 4, title: 'Options' },\n  ];\n\n  return (\n    <Sheet open={isOpen} onOpenChange={setIsOpen}>\n      <SheetTrigger asChild>\n        <Button \n          variant=\"outline\" \n          className=\"relative\"\n          aria-label=\"Ouvrir les filtres de recherche\"\n        >\n          <Filter className=\"h-4 w-4 mr-2\" aria-hidden=\"true\" />\n          Filtres\n          {activeFiltersCount > 0 && (\n            <Badge className=\"ml-2 h-5 w-5 rounded-full p-0 flex items-center justify-center\">\n              {activeFiltersCount}\n            </Badge>\n          )}\n        </Button>\n      </SheetTrigger>\n      <SheetContent \n        ref={containerRef}\n        side=\"bottom\" \n        className=\"h-[90vh] flex flex-col\"\n        aria-labelledby=\"filters-title\"\n      >\n        <SheetHeader>\n          <SheetTitle id=\"filters-title\">Filtres de recherche</SheetTitle>\n          \n          {/* Progress Stepper */}\n          <div className=\"flex justify-between items-center pt-4\">\n            {steps.map((s, idx) => (\n              <div key={s.number} className=\"flex items-center flex-1\">\n                <div className=\"flex flex-col items-center flex-1\">\n                  <div\n                    className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold transition-colors ${\n                      step === s.number\n                        ? 'bg-primary text-primary-foreground'\n                        : step > s.number\n                        ? 'bg-primary/20 text-primary'\n                        : 'bg-muted text-muted-foreground'\n                    }`}\n                  >\n                    {s.number}\n                  </div>\n                  <span className=\"text-xs mt-1 text-center\">{s.title}</span>\n                </div>\n                {idx < steps.length - 1 && (\n                  <div\n                    className={`h-0.5 flex-1 -mt-5 ${\n                      step > s.number ? 'bg-primary' : 'bg-muted'\n                    }`}\n                  />\n                )}\n              </div>\n            ))}\n          </div>\n        </SheetHeader>\n\n        {/* Step Content */}\n        <div className=\"flex-1 overflow-y-auto py-6 space-y-4\">\n          {step === 1 && (\n            <div className=\"space-y-4\">\n              <div className=\"space-y-2\">\n                <Label>Ville</Label>\n                <Select\n                  value={filters.city}\n                  onValueChange={(value) => {\n                    triggerHapticFeedback('light');\n                    setFilters({ ...filters, city: value });\n                  }}\n                >\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Slectionnez une ville\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {CITIES.map(city => (\n                      <SelectItem key={city} value={city}>{city}</SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n          )}\n\n          {step === 2 && (\n            <div className=\"space-y-6\">\n              <div className=\"space-y-3\">\n                <Label>Prix mensuel (FCFA)</Label>\n                <div className=\"flex items-center gap-2\">\n                  <Input\n                    type=\"number\"\n                    inputMode=\"numeric\"\n                    pattern=\"[0-9]*\"\n                    placeholder=\"Min\"\n                    value={priceRange[0]}\n                    onChange={(e) => {\n                      const val = parseInt(e.target.value) || 0;\n                      setPriceRange([val, priceRange[1]]);\n                    }}\n                  />\n                  <span>-</span>\n                  <Input\n                    type=\"number\"\n                    inputMode=\"numeric\"\n                    pattern=\"[0-9]*\"\n                    placeholder=\"Max\"\n                    value={priceRange[1]}\n                    onChange={(e) => {\n                      const val = parseInt(e.target.value) || 1000000;\n                      setPriceRange([priceRange[0], val]);\n                    }}\n                  />\n                </div>\n                <Slider\n                  min={0}\n                  max={1000000}\n                  step={10000}\n                  value={priceRange}\n                  onValueChange={(value) => {\n                    triggerHapticFeedback('light');\n                    setPriceRange(value as [number, number]);\n                  }}\n                  className=\"py-4\"\n                />\n                <p className=\"text-sm text-muted-foreground text-center\">\n                  {priceRange[0].toLocaleString()} - {priceRange[1].toLocaleString()} FCFA\n                </p>\n              </div>\n\n              <div className=\"space-y-3\">\n                <Label>Surface (m)</Label>\n                <div className=\"flex items-center gap-2\">\n                  <Input\n                    type=\"number\"\n                    inputMode=\"numeric\"\n                    pattern=\"[0-9]*\"\n                    placeholder=\"Min\"\n                    value={surfaceRange[0]}\n                    onChange={(e) => {\n                      const val = parseInt(e.target.value) || 0;\n                      setSurfaceRange([val, surfaceRange[1]]);\n                    }}\n                  />\n                  <span>-</span>\n                  <Input\n                    type=\"number\"\n                    inputMode=\"numeric\"\n                    pattern=\"[0-9]*\"\n                    placeholder=\"Max\"\n                    value={surfaceRange[1]}\n                    onChange={(e) => {\n                      const val = parseInt(e.target.value) || 500;\n                      setSurfaceRange([surfaceRange[0], val]);\n                    }}\n                  />\n                </div>\n                <Slider\n                  min={0}\n                  max={500}\n                  step={10}\n                  value={surfaceRange}\n                  onValueChange={(value) => {\n                    triggerHapticFeedback('light');\n                    setSurfaceRange(value as [number, number]);\n                  }}\n                  className=\"py-4\"\n                />\n                <p className=\"text-sm text-muted-foreground text-center\">\n                  {surfaceRange[0]} - {surfaceRange[1]} m\n                </p>\n              </div>\n            </div>\n          )}\n\n          {step === 3 && (\n            <div className=\"space-y-4\">\n              <div className=\"space-y-2\">\n                <Label>Type de bien</Label>\n                <Select\n                  value={filters.propertyType}\n                  onValueChange={(value) => {\n                    triggerHapticFeedback('light');\n                    setFilters({ ...filters, propertyType: value });\n                  }}\n                >\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Slectionnez un type\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {PROPERTY_TYPES.map(type => (\n                      <SelectItem key={type} value={type}>{type}</SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label>Chambres (min)</Label>\n                  <Input\n                    type=\"number\"\n                    inputMode=\"numeric\"\n                    pattern=\"[0-9]*\"\n                    min={0}\n                    placeholder=\"0\"\n                    value={filters.bedrooms || ''}\n                    onChange={(e) => {\n                      triggerHapticFeedback('light');\n                      setFilters({ ...filters, bedrooms: e.target.value ? parseInt(e.target.value) : undefined });\n                    }}\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label>Salles de bain (min)</Label>\n                  <Input\n                    type=\"number\"\n                    inputMode=\"numeric\"\n                    pattern=\"[0-9]*\"\n                    min={0}\n                    placeholder=\"0\"\n                    value={filters.bathrooms || ''}\n                    onChange={(e) => {\n                      triggerHapticFeedback('light');\n                      setFilters({ ...filters, bathrooms: e.target.value ? parseInt(e.target.value) : undefined });\n                    }}\n                  />\n                </div>\n              </div>\n            </div>\n          )}\n\n          {step === 4 && (\n            <div className=\"space-y-6\">\n              <div className=\"space-y-3\">\n                <Label>quipements</Label>\n                <div className=\"grid grid-cols-2 gap-3\">\n                  {[\n                    { key: 'isFurnished', label: 'Meubl' },\n                    { key: 'hasAc', label: 'Climatisation' },\n                    { key: 'hasParking', label: 'Parking' },\n                    { key: 'hasGarden', label: 'Jardin' },\n                  ].map(({ key, label }) => (\n                    <Button\n                      key={key}\n                      variant={filters[key as keyof PropertyFilters] ? 'default' : 'outline'}\n                      className=\"min-h-[44px] py-3\"\n                      onClick={() => {\n                        triggerHapticFeedback('light');\n                        setFilters({\n                          ...filters,\n                          [key]: !filters[key as keyof PropertyFilters],\n                        });\n                      }}\n                    >\n                      {label}\n                    </Button>\n                  ))}\n                </div>\n              </div>\n\n              <div className=\"space-y-3\">\n                <Label>Visites & Mdias</Label>\n                <div className=\"grid grid-cols-2 gap-3\">\n                  {[\n                    { key: 'hasVideo', label: 'Avec vido' },\n                    { key: 'has360View', label: 'Vue 360' },\n                    { key: 'hasVirtualTour', label: 'Visite virtuelle' },\n                    { key: 'isAnsutCertified', label: 'Certifi ANSUT' },\n                  ].map(({ key, label }) => (\n                    <Button\n                      key={key}\n                      variant={filters[key as keyof PropertyFilters] ? 'default' : 'outline'}\n                      className=\"min-h-[44px] py-3\"\n                      onClick={() => {\n                        triggerHapticFeedback('light');\n                        setFilters({\n                          ...filters,\n                          [key]: !filters[key as keyof PropertyFilters],\n                        });\n                      }}\n                    >\n                      {label}\n                    </Button>\n                  ))}\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Footer Navigation */}\n        <div className=\"border-t pt-4 pb-safe space-y-3\">\n          <div className=\"flex gap-2\">\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={handleResetSection}\n              className=\"flex-1\"\n            >\n              <X className=\"h-4 w-4 mr-1\" />\n              Reset section\n            </Button>\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={handleResetAll}\n              className=\"flex-1\"\n            >\n              Reset tout\n            </Button>\n          </div>\n\n          <div className=\"flex gap-2\">\n            {step > 1 && (\n              <Button\n                variant=\"outline\"\n                onClick={() => {\n                  triggerHapticFeedback('light');\n                  setStep(step - 1);\n                }}\n                className=\"flex-1\"\n              >\n                <ChevronLeft className=\"h-4 w-4 mr-1\" />\n                Prcdent\n              </Button>\n            )}\n            {step < 4 ? (\n              <Button\n                onClick={() => {\n                  triggerHapticFeedback('light');\n                  setStep(step + 1);\n                }}\n                className=\"flex-1\"\n              >\n                Suivant\n                <ChevronRight className=\"h-4 w-4 ml-1\" />\n              </Button>\n            ) : (\n              <Button onClick={handleApply} className=\"flex-1\">\n                Appliquer les filtres\n              </Button>\n            )}\n          </div>\n        </div>\n      </SheetContent>\n    </Sheet>\n  );\n};\n\nexport default MobileFilters;\n","import { useState, useEffect } from 'react';\n\n/**\n * Hook pour dtecter si l'utilisateur prfre des animations rduites\n * Essentiel pour accessibilit (pilepsie, troubles vestibulaires)\n */\nexport const usePrefersReducedMotion = () => {\n  const [prefersReducedMotion, setPrefersReducedMotion] = useState(false);\n\n  useEffect(() => {\n    // Dtecter la prfrence systme\n    const mediaQuery = window.matchMedia('(prefers-reduced-motion: reduce)');\n    setPrefersReducedMotion(mediaQuery.matches);\n\n    // couter les changements\n    const handleChange = (e: MediaQueryListEvent) => {\n      setPrefersReducedMotion(e.matches);\n    };\n\n    mediaQuery.addEventListener('change', handleChange);\n    return () => mediaQuery.removeEventListener('change', handleChange);\n  }, []);\n\n  return prefersReducedMotion;\n};\n","import { useState, useRef, useEffect } from 'react';\nimport { Loader2, ChevronDown } from 'lucide-react';\nimport { useSpring, animated } from '@react-spring/web';\nimport { triggerHapticFeedback } from '@/utils/haptics';\nimport { toast } from '@/hooks/use-toast';\nimport { usePrefersReducedMotion } from '@/hooks/usePrefersReducedMotion';\n\ninterface PullToRefreshProps {\n  onRefresh: () => Promise<void>;\n  children: React.ReactNode;\n}\n\nexport const PullToRefresh = ({ onRefresh, children }: PullToRefreshProps) => {\n  const [isRefreshing, setIsRefreshing] = useState(false);\n  const lastRefresh = useRef(Date.now());\n  const startY = useRef(0);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const hapticTriggered = useRef(false);\n  const prefersReducedMotion = usePrefersReducedMotion();\n  \n  // Use react-spring for elastic animation\n  const [{ y }, api] = useSpring(() => ({ y: 0 }));\n\n  useEffect(() => {\n    const container = containerRef.current;\n    if (!container) return;\n\n    const handleTouchStart = (e: TouchEvent) => {\n      // Only start tracking if we're at the top of the scroll\n      if (window.scrollY === 0 && !isRefreshing) {\n        startY.current = e.touches[0].clientY;\n        hapticTriggered.current = false;\n      }\n    };\n\n    const handleTouchMove = (e: TouchEvent) => {\n      if (startY.current === 0 || isRefreshing) return;\n\n      const currentY = e.touches[0].clientY;\n      const deltaY = currentY - startY.current;\n\n      // Only pull down with progressive resistance\n      if (deltaY > 0) {\n        // Progressive resistance (harder to pull as you go further)\n        const resistance = Math.pow(deltaY / 300, 0.7);\n        const adjustedY = Math.min(deltaY * resistance, 120);\n        \n        api.start({ y: adjustedY, immediate: true });\n\n        // Trigger haptic at threshold\n        if (adjustedY > 80 && !hapticTriggered.current) {\n          triggerHapticFeedback('medium');\n          hapticTriggered.current = true;\n        }\n\n        // Prevent default scroll if pulling\n        if (deltaY > 10) {\n          e.preventDefault();\n        }\n      }\n    };\n\n    const handleTouchEnd = async () => {\n      const currentY = y.get();\n      \n      if (currentY > 80 && !isRefreshing) {\n        const timeSinceLastRefresh = Date.now() - lastRefresh.current;\n\n        // Throttle: minimum 5 seconds between refreshes\n        if (timeSinceLastRefresh < 5000) {\n          toast({\n            description: \" Veuillez patienter avant de rafrachir  nouveau\",\n            duration: 2000,\n          });\n          api.start({ y: 0, config: { tension: 200, friction: 20 } });\n          startY.current = 0;\n          return;\n        }\n\n        // Snap to refresh position\n        api.start({ y: 60 });\n        setIsRefreshing(true);\n        lastRefresh.current = Date.now();\n        \n        try {\n          await onRefresh();\n          toast({\n            description: \" Liste rafrachie\",\n            duration: 2000,\n          });\n        } catch (error) {\n          toast({\n            title: \"Erreur\",\n            description: \"Impossible de rafrachir la liste\",\n            variant: \"destructive\",\n          });\n        } finally {\n          setIsRefreshing(false);\n        }\n      }\n\n      // Elastic bounce back (instant if reduced motion)\n      api.start({ \n        y: 0, \n        config: prefersReducedMotion \n          ? { tension: 500, friction: 50 } // Instant\n          : { tension: 200, friction: 20 }  // Elastic\n      });\n      startY.current = 0;\n      hapticTriggered.current = false;\n    };\n\n    container.addEventListener('touchstart', handleTouchStart, { passive: true });\n    container.addEventListener('touchmove', handleTouchMove, { passive: false });\n    container.addEventListener('touchend', handleTouchEnd);\n\n    return () => {\n      container.removeEventListener('touchstart', handleTouchStart);\n      container.removeEventListener('touchmove', handleTouchMove);\n      container.removeEventListener('touchend', handleTouchEnd);\n    };\n  }, [isRefreshing, onRefresh, api, y]);\n\n  return (\n    <div ref={containerRef} className=\"relative\">\n      {/* Pull indicator with elastic animation */}\n      <animated.div\n        className=\"absolute top-0 left-0 right-0 flex justify-center items-center -translate-y-full\"\n        style={{\n          opacity: y.to(val => val > 0 ? 1 : 0),\n          height: y.to(val => `${val}px`),\n        }}\n      >\n        {isRefreshing ? (\n          <Loader2 className=\"h-6 w-6 animate-spin text-primary\" />\n        ) : (\n          <animated.div\n            style={{\n              transform: y.to(val => `rotate(${Math.min(val / 80 * 180, 180)}deg) rotate(${val * 3}deg)`),\n            }}\n          >\n            <ChevronDown className=\"h-6 w-6 text-primary\" />\n          </animated.div>\n        )}\n      </animated.div>\n\n      {/* Content with elastic pull */}\n      <animated.div\n        style={{\n          transform: y.to(val => `translateY(${val}px)`),\n        }}\n      >\n        {children}\n      </animated.div>\n    </div>\n  );\n};\n","import { useEffect, useRef, useState } from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport { Button } from './ui/button';\nimport { Locate, Map, Satellite, Layers } from 'lucide-react';\nimport { Card } from './ui/card';\nimport { Input } from './ui/input';\nimport { logger } from '@/services/logger';\n\ninterface Property {\n  id: string;\n  title: string;\n  city: string;\n  monthly_rent: number;\n  latitude: number | null;\n  longitude: number | null;\n  main_image: string | null;\n}\n\ninterface PropertyMapProps {\n  properties: Property[];\n  onPropertyClick?: (propertyId: string) => void;\n  onLocationSearch?: (lat: number, lng: number) => void;\n  showLocationButton?: boolean;\n}\n\nconst getStoredMapboxToken = () => {\n  // Priorit 1: Variable d'environnement (supporte plusieurs noms)\n  const envToken = import.meta.env.VITE_MAPBOX_TOKEN || \n                   import.meta.env.VITE_MAPBOX_PUBLIC_TOKEN ||\n                   import.meta.env.MAPBOX_PUBLIC_TOKEN;\n  if (envToken) return envToken;\n  \n  // Priorit 2: localStorage (fallback)\n  return localStorage.getItem('mapbox_token') || '';\n};\nconst MAPBOX_TOKEN = getStoredMapboxToken();\n\ntype MapStyle = 'streets' | 'satellite' | 'hybrid';\n\nconst MAP_STYLES: Record<MapStyle, string> = {\n  streets: 'mapbox://styles/mapbox/streets-v12',\n  satellite: 'mapbox://styles/mapbox/satellite-v9',\n  hybrid: 'mapbox://styles/mapbox/satellite-streets-v12',\n};\n\nconst PropertyMap = ({ \n  properties, \n  onPropertyClick, \n  onLocationSearch,\n  showLocationButton = true \n}: PropertyMapProps) => {\n  const mapContainer = useRef<HTMLDivElement>(null);\n  const map = useRef<mapboxgl.Map | null>(null);\n  const markers = useRef<mapboxgl.Marker[]>([]);\n  const [mapReady, setMapReady] = useState(false);\n  const [locating, setLocating] = useState(false);\n  const [mapStyle, setMapStyle] = useState<MapStyle>(() => {\n    return (localStorage.getItem('preferredMapStyle') as MapStyle) || 'streets';\n  });\n  const [mapboxToken, setMapboxToken] = useState(getStoredMapboxToken());\n  const [tokenInput, setTokenInput] = useState('');\n\n  const handleSaveToken = () => {\n    if (tokenInput.trim()) {\n      localStorage.setItem('mapbox_token', tokenInput.trim());\n      setMapboxToken(tokenInput.trim());\n      window.location.reload();\n    }\n  };\n\n  // Initialize map\n  useEffect(() => {\n    if (!mapContainer.current || map.current) return;\n\n    try {\n      if (!mapboxToken) {\n        logger.warn('Mapbox token not configured');\n        return;\n      }\n\n      mapboxgl.accessToken = mapboxToken;\n\n      map.current = new mapboxgl.Map({\n        container: mapContainer.current,\n        style: MAP_STYLES[mapStyle],\n        center: [-4.0305, 5.3599], // Abidjan coordinates\n        zoom: 11,\n      });\n\n      map.current.addControl(new mapboxgl.NavigationControl(), 'top-right');\n      map.current.addControl(new mapboxgl.FullscreenControl(), 'top-right');\n\n      map.current.on('load', () => {\n        setMapReady(true);\n      });\n    } catch (error) {\n      logger.logError(error, { context: 'Map initialization' });\n    }\n\n    return () => {\n      map.current?.remove();\n      map.current = null;\n    };\n  }, [mapStyle, mapboxToken]);\n\n  // Function to add markers to the map\n  const addMarkersToMap = () => {\n    if (!map.current || !mapReady) return;\n\n    // Clear existing markers\n    markers.current.forEach(marker => marker.remove());\n    markers.current = [];\n\n    // Filter properties with valid coordinates\n    const validProperties = properties.filter(\n      p => p.latitude !== null && p.longitude !== null\n    );\n\n    if (validProperties.length === 0) return;\n\n    // Add markers for each property with enhanced styling\n    validProperties.forEach(property => {\n      const el = document.createElement('div');\n      el.className = 'property-marker';\n      \n      // Enhanced marker styling with ANSUT colors\n      el.innerHTML = `\n        <div class=\"relative group\">\n          <div class=\"absolute -inset-1 bg-gradient-to-r from-primary to-secondary rounded-full blur opacity-25 group-hover:opacity-50 transition-opacity\"></div>\n          <div class=\"relative w-10 h-10 rounded-full bg-primary border-2 border-white shadow-lg flex items-center justify-center text-white font-bold text-xs group-hover:scale-110 transition-transform\">\n            ${(property.monthly_rent / 1000).toFixed(0)}k\n          </div>\n        </div>\n      `;\n      el.style.cursor = 'pointer';\n\n      // Enhanced popup with image and better styling\n      const popupHTML = `\n        <div class=\"min-w-[200px]\">\n          ${property.main_image ? `\n            <img \n              src=\"${property.main_image}\" \n              alt=\"${property.title}\"\n              class=\"w-full h-32 object-cover rounded-t-lg mb-2\"\n            />\n          ` : ''}\n          <div class=\"p-3\">\n            <h3 class=\"font-semibold text-sm mb-2 text-foreground\">${property.title}</h3>\n            <div class=\"flex items-center gap-1 text-xs text-muted-foreground mb-2\">\n              <svg class=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\"/>\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\"/>\n              </svg>\n              <span>${property.city}</span>\n            </div>\n            <p class=\"text-base font-bold text-primary\">${property.monthly_rent.toLocaleString()} FCFA<span class=\"text-xs font-normal\">/mois</span></p>\n          </div>\n        </div>\n      `;\n\n      const popup = new mapboxgl.Popup({ \n        offset: 25,\n        className: 'property-popup'\n      }).setHTML(popupHTML);\n\n      const marker = new mapboxgl.Marker(el)\n        .setLngLat([property.longitude!, property.latitude!])\n        .setPopup(popup)\n        .addTo(map.current!);\n\n      el.addEventListener('click', () => {\n        if (onPropertyClick) {\n          onPropertyClick(property.id);\n        }\n      });\n\n      markers.current.push(marker);\n    });\n\n    // Fit map to show all markers\n    if (validProperties.length > 0) {\n      const bounds = new mapboxgl.LngLatBounds();\n      validProperties.forEach(property => {\n        bounds.extend([property.longitude!, property.latitude!]);\n      });\n      map.current.fitBounds(bounds, { padding: 50, maxZoom: 15 });\n    }\n  };\n\n  // Update markers when properties change\n  useEffect(() => {\n    addMarkersToMap();\n  }, [properties, mapReady, onPropertyClick]);\n\n  // Handle map style change\n  const handleStyleChange = (newStyle: MapStyle) => {\n    if (!map.current || mapStyle === newStyle) return;\n    \n    setMapStyle(newStyle);\n    localStorage.setItem('preferredMapStyle', newStyle);\n    \n    map.current.once('style.load', () => {\n      addMarkersToMap();\n    });\n    \n    map.current.setStyle(MAP_STYLES[newStyle]);\n  };\n\n  const handleLocateMe = () => {\n    setLocating(true);\n    \n    if ('geolocation' in navigator) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          const { latitude, longitude } = position.coords;\n          \n          if (map.current) {\n            map.current.flyTo({\n              center: [longitude, latitude],\n              zoom: 13,\n              essential: true\n            });\n\n            // Add user location marker\n            new mapboxgl.Marker({ color: '#3b82f6' })\n              .setLngLat([longitude, latitude])\n              .addTo(map.current);\n          }\n\n          if (onLocationSearch) {\n            onLocationSearch(latitude, longitude);\n          }\n          \n          setLocating(false);\n        },\n        (error) => {\n          logger.logError(error, { context: 'Geolocation' });\n          setLocating(false);\n        }\n      );\n    } else {\n      setLocating(false);\n    }\n  };\n\n  return (\n    <div className=\"relative w-full h-[600px]\">\n      {!mapboxToken ? (\n        <Card className=\"p-6 flex flex-col items-center justify-center h-full\">\n          <h3 className=\"text-lg font-semibold mb-4\">Configuration Mapbox requise</h3>\n          <p className=\"text-sm text-muted-foreground mb-4 text-center max-w-md\">\n            Veuillez entrer votre token PUBLIC Mapbox (pk.xxx) pour afficher la carte.\n            <br />\n            <a href=\"https://account.mapbox.com/access-tokens/\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-primary underline\">\n              Obtenez votre token ici\n            </a>\n          </p>\n          <div className=\"flex gap-2 w-full max-w-md\">\n            <Input\n              type=\"text\"\n              placeholder=\"pk.xxxxxxxxxxxxx\"\n              value={tokenInput}\n              onChange={(e) => setTokenInput(e.target.value)}\n              className=\"flex-1\"\n            />\n            <Button onClick={handleSaveToken} disabled={!tokenInput.trim()}>\n              Enregistrer\n            </Button>\n          </div>\n        </Card>\n      ) : (\n        <div ref={mapContainer} className=\"absolute inset-0 rounded-lg\" />\n      )}\n      \n      {mapboxToken && showLocationButton && (\n        <div className=\"absolute top-4 left-4 z-10\">\n          <Button\n            onClick={handleLocateMe}\n            disabled={locating}\n            size=\"sm\"\n            className=\"shadow-lg\"\n          >\n            <Locate className=\"h-4 w-4 mr-2\" />\n            {locating ? 'Localisation...' : 'Autour de moi'}\n          </Button>\n        </div>\n      )}\n\n      {mapboxToken && (\n        <div className=\"absolute top-16 left-4 z-10 flex flex-col gap-2\">\n        <Button\n          onClick={() => handleStyleChange('streets')}\n          size=\"sm\"\n          variant={mapStyle === 'streets' ? 'default' : 'outline'}\n          className=\"shadow-lg\"\n        >\n          <Map className=\"h-4 w-4 md:mr-2\" />\n          <span className=\"hidden md:inline\">Rues</span>\n        </Button>\n        <Button\n          onClick={() => handleStyleChange('satellite')}\n          size=\"sm\"\n          variant={mapStyle === 'satellite' ? 'default' : 'outline'}\n          className=\"shadow-lg\"\n        >\n          <Satellite className=\"h-4 w-4 md:mr-2\" />\n          <span className=\"hidden md:inline\">Satellite</span>\n        </Button>\n        <Button\n          onClick={() => handleStyleChange('hybrid')}\n          size=\"sm\"\n          variant={mapStyle === 'hybrid' ? 'default' : 'outline'}\n          className=\"shadow-lg\"\n        >\n          <Layers className=\"h-4 w-4 md:mr-2\" />\n          <span className=\"hidden md:inline\">Hybride</span>\n        </Button>\n        </div>\n      )}\n\n      {mapboxToken && properties.filter(p => p.latitude === null || p.longitude === null).length > 0 && (\n        <Card className=\"absolute bottom-4 left-4 right-4 p-3 z-10 bg-background/95 backdrop-blur\">\n          <p className=\"text-sm text-muted-foreground\">\n            {properties.filter(p => p.latitude === null || p.longitude === null).length} bien(s) sans golocalisation\n          </p>\n        </Card>\n      )}\n    </div>\n  );\n};\n\nexport default PropertyMap;\n","import { supabase } from '@/lib/supabase';\nimport type { Property, SearchFilters } from '@/types';\nimport { logger } from '@/services/logger';\n\n/**\n * Helper to determine if a property should be shown to a user\n */\nexport const shouldShowProperty = (property: Property, currentUserId?: string): boolean => {\n  // ALWAYS show to property owner\n  if (currentUserId && property.owner_id === currentUserId) {\n    return true;\n  }\n  // Hide rented properties from everyone else\n  return property.status !== 'lou';\n};\n\n/**\n * Parse Supabase/Postgres errors into user-friendly messages\n */\nexport function parsePropertyError(error: any): string {\n  if (!error) return 'Une erreur inconnue est survenue';\n\n  const errorMessage = error?.message || String(error);\n  const errorCode = error?.code;\n\n  // Postgres constraint violations\n  if (errorCode === '23505') {\n    return 'Une proprit similaire existe dj. Vrifiez vos donnes.';\n  }\n  \n  if (errorCode === '23503') {\n    return 'Rfrence invalide. Assurez-vous que toutes les informations sont correctes.';\n  }\n\n  if (errorCode === '23502') {\n    return 'Champs obligatoires manquants. Veuillez remplir tous les champs requis.';\n  }\n\n  // RLS policy violations\n  if (errorMessage.includes('RLS') || errorMessage.includes('policy')) {\n    return 'Permissions insuffisantes. Connectez-vous avec un compte propritaire.';\n  }\n\n  // Geolocation errors\n  if (errorMessage.includes('latitude') || errorMessage.includes('longitude')) {\n    return 'Erreur de localisation. Veuillez slectionner un emplacement valide sur la carte.';\n  }\n\n  // Network/timeout errors\n  if (errorMessage.includes('timeout') || errorMessage.includes('network')) {\n    return 'Problme de connexion. Vrifiez votre connexion internet et ressayez.';\n  }\n\n  // Generic validation errors\n  if (errorMessage.includes('invalid') || errorMessage.includes('invalide')) {\n    return 'Donnes invalides. Vrifiez que tous les champs sont correctement remplis.';\n  }\n\n  // Return original message if no pattern matches\n  return errorMessage.length > 100 \n    ? 'Erreur lors de la cration de la proprit. Veuillez ressayer.' \n    : errorMessage;\n}\n\n/**\n * Centralized property service for all property-related database operations\n */\nexport const propertyService = {\n  /**\n   * Fetch all properties with optional filters\n   * Uses secure RPC to hide owner_id from public queries\n   */\n  async fetchAll(filters?: SearchFilters): Promise<Property[]> {\n    logger.debug('PropertyService fetchAll called with filters', { filters });\n    \n    // SECURITY: Use RPC for public property browsing (hides owner_id)\n    // For ANSUT certified properties, still use direct query with join\n    if (filters?.isAnsutCertified) {\n      const { data, error } = await supabase\n        .from('properties')\n        .select(`\n          *,\n          leases!inner(certification_status)\n        `)\n        .eq('leases.certification_status', 'certified')\n        .order('created_at', { ascending: false });\n\n      if (error) {\n        logger.logError(error, { context: 'propertyService', action: 'fetchCertifiedProperties' });\n        throw error;\n      }\n      \n      // Remove duplicates if multiple certified leases for the same property\n      const uniqueProperties = data.reduce((acc, current) => {\n        const exists = acc.find(item => item.id === current.id);\n        if (!exists) {\n          acc.push(current);\n        }\n        return acc;\n      }, [] as any[]);\n\n      logger.info('ANSUT certified properties found', { count: uniqueProperties.length });\n      return uniqueProperties as Property[];\n    }\n\n    // Use secure RPC for public browsing - exclude rented properties\n    const { data, error } = await supabase.rpc('get_public_properties', {\n      p_city: filters?.city || null,\n      p_property_type: filters?.propertyType?.[0] || null,\n      p_min_rent: filters?.minPrice || null,\n      p_max_rent: filters?.maxPrice || null,\n      p_min_bedrooms: filters?.minBedrooms || null,\n      p_status: null, // RPC handles filtering\n    });\n\n    if (error) {\n      logger.logError(error, { context: 'propertyService', action: 'fetchAllProperties' });\n\n      // Provide more context in error message\n      const enhancedError = new Error(\n        `Failed to fetch properties: ${error.message || 'Unknown error'}. ${\n          error.code ? `Error code: ${error.code}` : ''\n        }`\n      );\n      (enhancedError as any).originalError = error;\n      throw enhancedError;\n    }\n\n    logger.debug('Properties received from API', { count: data?.length || 0 });\n\n    // Apply client-side filters not supported by RPC\n    let results = data || [];\n    \n    // CRITICAL: Filter out rented properties from public view (unless user is owner)\n    const { data: { user } } = await supabase.auth.getUser();\n    const beforeFilter = results.length;\n    results = results.filter(p => shouldShowProperty(p as any, user?.id));\n    logger.debug('Properties filtered by visibility', { before: beforeFilter, after: results.length });\n    \n    if (filters?.propertyType && filters.propertyType.length > 1) {\n      const before = results.length;\n      results = results.filter(p => filters.propertyType?.includes(p.property_type));\n      logger.debug('Properties filtered by type', { before, after: results.length });\n    }\n    if (filters?.minBathrooms) {\n      const before = results.length;\n      results = results.filter(p => p.bathrooms >= filters.minBathrooms!);\n      logger.debug('Properties filtered by bathrooms', { before, after: results.length });\n    }\n    if (filters?.minSurface) {\n      const before = results.length;\n      results = results.filter(p => p.surface_area && p.surface_area >= filters.minSurface!);\n      logger.debug('Properties filtered by surface', { before, after: results.length });\n    }\n    if (filters?.isFurnished !== undefined) {\n      const before = results.length;\n      results = results.filter(p => p.is_furnished === filters.isFurnished);\n      logger.debug('Properties filtered by furnished status', { before, after: results.length });\n    }\n    if (filters?.hasParking !== undefined) {\n      const before = results.length;\n      results = results.filter(p => p.has_parking === filters.hasParking);\n      logger.debug('Properties filtered by parking', { before, after: results.length });\n    }\n    if (filters?.hasGarden !== undefined) {\n      const before = results.length;\n      results = results.filter(p => p.has_garden === filters.hasGarden);\n      logger.debug('Properties filtered by garden', { before, after: results.length });\n    }\n    if (filters?.hasAc !== undefined) {\n      const before = results.length;\n      results = results.filter(p => p.has_ac === filters.hasAc);\n      logger.debug('Properties filtered by AC', { before, after: results.length });\n    }\n\n    logger.info('Final property results after filtering', { count: results.length });\n\n    // Note: owner_id is intentionally excluded by RPC for security\n    return results as unknown as Property[];\n  },\n\n  /**\n   * Fetch a single property by ID\n   * SECURITY: If user is authenticated, try direct query first (allows owners to see pending properties)\n   * Otherwise, use public RPC for approved properties\n   */\n  async fetchById(id: string): Promise<Property | null> {\n    // Check if user is authenticated\n    const { data: { user } } = await supabase.auth.getUser();\n    \n    // If authenticated, try direct query first (RLS will grant access if user is owner/admin)\n    if (user) {\n      const { data, error } = await supabase\n        .from('properties')\n        .select('*')\n        .eq('id', id)\n        .maybeSingle();\n      \n      // If success and data exists, return (owner can see their pending property)\n      if (!error && data) {\n        return data;\n      }\n    }\n    \n    // Otherwise, try public RPC (for approved properties)\n    const { data: publicData, error: publicError } = await supabase.rpc('get_public_property', {\n      p_property_id: id\n    });\n\n    if (!publicError && publicData && publicData.length > 0) {\n      return publicData[0] as unknown as Property;\n    }\n\n    // No method found the property\n    return null;\n  },\n\n  /**\n   * Fetch properties by owner ID\n   */\n  async fetchByOwner(ownerId: string): Promise<Property[]> {\n    const { data, error } = await supabase\n      .from('properties')\n      .select('*')\n      .eq('owner_id', ownerId)\n      .order('created_at', { ascending: false });\n\n    if (error) {\n      logger.logError(error, { context: 'propertyService', action: 'fetchByOwner', ownerId });\n      throw error;\n    }\n\n    return data || [];\n  },\n\n  /**\n   * Update a property\n   */\n  async update(id: string, updates: Partial<Property>): Promise<Property> {\n    const { data, error } = await supabase\n      .from('properties')\n      .update(updates)\n      .eq('id', id)\n      .select()\n      .single();\n\n    if (error) {\n      logger.logError(error, { context: 'propertyService', action: 'updateProperty', propertyId: id });\n      const userMessage = parsePropertyError(error);\n      throw new Error(userMessage);\n    }\n\n    return data;\n  },\n\n  /**\n   * Delete a property\n   */\n  async delete(id: string): Promise<void> {\n    const { error } = await supabase\n      .from('properties')\n      .delete()\n      .eq('id', id);\n\n    if (error) {\n      logger.logError(error, { context: 'propertyService', action: 'deleteProperty', propertyId: id });\n      const userMessage = parsePropertyError(error);\n      throw new Error(userMessage);\n    }\n  },\n\n  /**\n   * Increment view count for a property\n   */\n  async incrementViewCount(id: string): Promise<void> {\n    // Manually increment view count\n    const { data: property } = await supabase\n      .from('properties')\n      .select('view_count')\n      .eq('id', id)\n      .single();\n\n    if (property) {\n      const { error } = await supabase\n        .from('properties')\n        .update({ view_count: (property.view_count || 0) + 1 })\n        .eq('id', id);\n\n      if (error) {\n        logger.logError(error, { context: 'propertyService', action: 'incrementViewCount', propertyId: id });\n        throw error;\n      }\n    }\n  },\n\n  /**\n   * Get property statistics\n   */\n  async getStats(propertyId: string) {\n    const [favoritesResult, applicationsResult, propertyResult] = await Promise.all([\n      supabase\n        .from('user_favorites')\n        .select('*', { count: 'exact', head: true })\n        .eq('property_id', propertyId),\n      supabase\n        .from('rental_applications')\n        .select('*', { count: 'exact', head: true })\n        .eq('property_id', propertyId),\n      supabase\n        .from('properties')\n        .select('view_count')\n        .eq('id', propertyId)\n        .single(),\n    ]);\n\n    const views = propertyResult.data?.view_count || 0;\n    const applications = applicationsResult.count || 0;\n\n    return {\n      views,\n      favorites: favoritesResult.count || 0,\n      applications,\n      conversionRate: views > 0 ? Math.round((applications / views) * 100) : 0,\n    };\n  },\n\n  /**\n   * Search properties with geo-location filtering\n   */\n  async searchNearby(\n    latitude: number,\n    longitude: number,\n    radiusKm: number,\n    filters?: SearchFilters\n  ): Promise<Property[]> {\n    // First fetch all properties with filters\n    const properties = await this.fetchAll(filters);\n\n    // Filter by distance (using Haversine formula in geo.ts)\n    const { calculateDistance } = await import('@/lib/geo');\n\n    return properties.filter((property) => {\n      if (!property.latitude || !property.longitude) return false;\n\n      const distance = calculateDistance(\n        latitude,\n        longitude,\n        property.latitude,\n        property.longitude\n      );\n\n      return distance <= radiusKm;\n    });\n  },\n};\n","import { useQuery } from '@tanstack/react-query';\nimport { propertyService } from '@/services/propertyService';\nimport type { SearchFilters } from '@/types';\n\n/**\n * Hook to fetch all properties with optional filters using TanStack Query\n */\nexport const useProperties = (filters?: SearchFilters & { currentUserId?: string }) => {\n  return useQuery({\n    queryKey: ['properties', filters],\n    queryFn: () => propertyService.fetchAll(filters),\n    staleTime: 60_000, // 1 minute\n    retry: 2,\n  });\n};\n\n/**\n * Hook to fetch properties by owner ID using TanStack Query\n */\nexport const useOwnerProperties = (ownerId: string) => {\n  return useQuery({\n    queryKey: ['properties', 'owner', ownerId],\n    queryFn: () => propertyService.fetchByOwner(ownerId),\n    staleTime: 30_000, // 30 seconds\n    enabled: !!ownerId,\n  });\n};\n","/**\n * Geographic utility functions\n */\n\nimport type { Property } from '@/types';\n\n/**\n * Type guard to check if a property has valid coordinates\n */\nexport const hasCoordinates = (\n  property: Property\n): property is Property & { latitude: number; longitude: number } => {\n  return property.latitude != null && property.longitude != null;\n};\n\n/**\n * Calculate distance between two coordinates using Haversine formula\n * @param lat1 - Latitude of first point\n * @param lon1 - Longitude of first point\n * @param lat2 - Latitude of second point\n * @param lon2 - Longitude of second point\n * @returns Distance in kilometers\n */\nexport function calculateDistance(\n  lat1: number,\n  lon1: number,\n  lat2: number,\n  lon2: number\n): number {\n  const R = 6371; // Earth's radius in kilometers\n  const dLat = toRad(lat2 - lat1);\n  const dLon = toRad(lon2 - lon1);\n\n  const a =\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.cos(toRad(lat1)) *\n      Math.cos(toRad(lat2)) *\n      Math.sin(dLon / 2) *\n      Math.sin(dLon / 2);\n\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  return R * c;\n}\n\n/**\n * Convert degrees to radians\n */\nfunction toRad(degrees: number): number {\n  return (degrees * Math.PI) / 180;\n}\n\n/**\n * Format distance for display\n * @param distanceKm - Distance in kilometers\n * @returns Formatted string\n */\nexport function formatDistance(distanceKm: number): string {\n  if (distanceKm < 1) {\n    return `${Math.round(distanceKm * 1000)}m`;\n  }\n  return `${distanceKm.toFixed(1)}km`;\n}\n\n/**\n * Get user's current location\n * @returns Promise with latitude and longitude\n */\nexport function getCurrentLocation(): Promise<{ latitude: number; longitude: number }> {\n  return new Promise((resolve, reject) => {\n    if (!navigator.geolocation) {\n      reject(new Error('Geolocation is not supported by your browser'));\n      return;\n    }\n\n    navigator.geolocation.getCurrentPosition(\n      (position) => {\n        resolve({\n          latitude: position.coords.latitude,\n          longitude: position.coords.longitude,\n        });\n      },\n      (error) => {\n        reject(error);\n      }\n    );\n  });\n}\n","import { useState, useEffect } from 'react';\nimport { Property, SearchFilters, GeoLocation } from '@/types';\nimport { calculateDistance, getCurrentLocation, hasCoordinates } from '@/lib/geo';\nimport { logger } from '@/services/logger';\nimport { supabase } from '@/lib/supabase';\nimport { useAuth } from '@/hooks/useAuth';\n\nexport const usePropertyFilters = (properties: Property[]) => {\n  const { user } = useAuth();\n  const [filteredProperties, setFilteredProperties] = useState<Property[]>(properties);\n  const [userLocation, setUserLocation] = useState<GeoLocation | null>(null);\n\n  useEffect(() => {\n    setFilteredProperties(properties);\n  }, [properties]);\n\n  const handleFilterChange = (filters: SearchFilters) => {\n    let filtered = [...properties];\n\n    // City filter\n    if (filters.city) {\n      filtered = filtered.filter(p => \n        p.city.toLowerCase().includes(filters.city!.toLowerCase())\n      );\n    }\n\n    // Price range\n    if (filters.minPrice) {\n      filtered = filtered.filter(p => p.monthly_rent >= filters.minPrice!);\n    }\n    if (filters.maxPrice) {\n      filtered = filtered.filter(p => p.monthly_rent <= filters.maxPrice!);\n    }\n\n    // Property type\n    if (filters.propertyType && filters.propertyType.length > 0) {\n      filtered = filtered.filter(p => \n        filters.propertyType!.includes(p.property_type)\n      );\n    }\n\n    // Bedrooms\n    if (filters.minBedrooms) {\n      filtered = filtered.filter(p => p.bedrooms >= filters.minBedrooms!);\n    }\n\n    // Bathrooms\n    if (filters.minBathrooms) {\n      filtered = filtered.filter(p => p.bathrooms >= filters.minBathrooms!);\n    }\n\n    // Surface area\n    if (filters.minSurface) {\n      filtered = filtered.filter(p => \n        p.surface_area && p.surface_area >= filters.minSurface!\n      );\n    }\n\n    // Amenities\n    if (filters.furnished) {\n      filtered = filtered.filter(p => p.is_furnished);\n    }\n    if (filters.parking) {\n      filtered = filtered.filter(p => p.has_parking);\n    }\n    if (filters.garden) {\n      filtered = filtered.filter(p => p.has_garden);\n    }\n    if (filters.ac) {\n      filtered = filtered.filter(p => p.has_ac);\n    }\n\n    setFilteredProperties(filtered);\n  };\n\n  const handleLocationSearch = async (radiusKm: number = 5) => {\n    try {\n      const location = await getCurrentLocation();\n      setUserLocation(location);\n\n      const filtered = properties\n        .filter(hasCoordinates)\n        .filter(property => {\n          const distance = calculateDistance(\n            location.latitude,\n            location.longitude,\n            property.latitude,\n            property.longitude\n          );\n\n          return distance <= radiusKm;\n        });\n\n      setFilteredProperties(filtered);\n\n      // Track search for recommendations\n      if (user) {\n        await supabase.functions.invoke('track-search', {\n          body: {\n            userId: user.id,\n            filters: { location, radius: radiusKm },\n            resultCount: filtered.length,\n          },\n        });\n      }\n    } catch (error) {\n      logger.error('Error getting location', { error, userId: user?.id, radiusKm });\n    }\n  };\n\n  const handleReset = () => {\n    setFilteredProperties(properties);\n    setUserLocation(null);\n  };\n\n  return {\n    filteredProperties,\n    userLocation,\n    handleFilterChange,\n    handleLocationSearch,\n    handleReset,\n  };\n};\n","import { useState, useEffect } from 'react';\nimport { useSearchParams, useNavigate, Link } from 'react-router-dom';\nimport Navbar from '@/components/Navbar';\nimport Footer from '@/components/Footer';\nimport { DynamicBreadcrumb } from '@/components/navigation/DynamicBreadcrumb';\nimport { KentePattern } from '@/components/ui/african-patterns';\nimport PropertyFiltersComponent, { PropertyFilters } from '@/components/PropertyFilters';\nimport MobileFilters from '@/components/properties/MobileFilters';\nimport { PullToRefresh } from '@/components/properties/PullToRefresh';\nimport PropertyMap from '@/components/PropertyMap';\nimport { Card } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Grid, List, Map, Search as SearchIcon, Eye, CheckCircle2, Lock } from 'lucide-react';\nimport { useAuth } from '@/hooks/useAuth';\nimport { useFavorites } from '@/hooks/useFavorites';\nimport { useProperties } from '@/hooks/useProperties';\nimport { usePropertyFilters } from '@/hooks/usePropertyFilters';\nimport { useIsMobile } from '@/hooks/use-mobile';\nimport { PropertyCard } from '@/components/properties/PropertyCard';\nimport { PropertyCardSkeleton } from '@/components/properties/PropertyCardSkeleton';\nimport { RecommendationsSection } from '@/components/recommendations/RecommendationsSection';\nimport { hasCoordinates } from '@/lib/geo';\nimport { toast } from 'sonner';\n\ntype ViewMode = 'grid' | 'list' | 'map';\n\nconst Search = () => {\n  const navigate = useNavigate();\n  const [searchParams] = useSearchParams();\n  const { user, profile } = useAuth();\n  const { toggleFavorite, isFavorite } = useFavorites();\n  const { data: properties = [], isLoading, error, refetch } = useProperties({ currentUserId: user?.id });\n  const [viewMode, setViewMode] = useState<ViewMode>('grid');\n  const isMobile = useIsMobile();\n  \n  const { filteredProperties, handleFilterChange, handleLocationSearch, handleReset } = \n    usePropertyFilters(properties);\n\n  const handleNavigateToProperty = (propertyId: string) => {\n    navigate(`/properties/${propertyId}`);\n  };\n\n  useEffect(() => {\n    if (properties.length > 0) {\n      const location = searchParams.get('location');\n      const type = searchParams.get('type');\n      const maxPrice = searchParams.get('maxPrice');\n\n      if (location || type || maxPrice) {\n        const filters: PropertyFilters = {};\n        if (location) {\n          filters.city = location;\n        }\n        if (type) filters.propertyType = type;\n        if (maxPrice) filters.maxPrice = parseInt(maxPrice);\n        handleFilterChange(filters as any);\n      }\n    }\n  }, [searchParams, properties.length]);\n\n  const handleFavoriteClick = async (propertyId: string) => {\n    if (!user) {\n      toast.error(\"Vous devez tre connect pour ajouter des favoris\");\n      return;\n    }\n    await toggleFavorite(propertyId);\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col page-background\">\n      <Navbar />\n\n      <main className=\"flex-1 page-container section-spacing pt-24\">\n        <DynamicBreadcrumb />\n\n        {/* Header with improved typography */}\n        <div className=\"mb-8 relative\">\n          <KentePattern />\n          <div className=\"relative z-10\">\n            <h1 className=\"text-h1 mb-4\">\n              <span className=\"text-gradient-primary\">Rechercher</span> un bien\n            </h1>\n          </div>\n          <p className=\"text-lg text-muted-foreground\">\n            Trouvez le logement idal parmi {properties.length} annonces\n          </p>\n        </div>\n\n        {/* Filters */}\n        <div className=\"mb-6\">\n          {isMobile ? (\n            <MobileFilters\n              onFilterChange={handleFilterChange as any}\n              onReset={handleReset}\n              currentFilters={{}}\n            />\n          ) : (\n            <PropertyFiltersComponent\n              onFilterChange={handleFilterChange as any}\n              onReset={handleReset}\n            />\n          )}\n        </div>\n\n        {/* View Mode Toggle */}\n        <div className=\"flex items-center justify-between mb-6\">\n          <p className=\"text-sm text-muted-foreground\">\n            {filteredProperties.length} {filteredProperties.length > 1 ? 'biens trouvs' : 'bien trouv'}\n          </p>\n          \n          <div className=\"flex gap-2\">\n            <Button\n              variant={viewMode === 'grid' ? 'default' : 'outline'}\n              size=\"sm\"\n              onClick={() => setViewMode('grid')}\n            >\n              <Grid className=\"h-4 w-4\" />\n            </Button>\n            <Button\n              variant={viewMode === 'list' ? 'default' : 'outline'}\n              size=\"sm\"\n              onClick={() => setViewMode('list')}\n            >\n              <List className=\"h-4 w-4\" />\n            </Button>\n            <Button\n              variant={viewMode === 'map' ? 'default' : 'outline'}\n              size=\"sm\"\n              onClick={() => setViewMode('map')}\n            >\n              <Map className=\"h-4 w-4\" />\n            </Button>\n          </div>\n        </div>\n\n        <PullToRefresh onRefresh={async () => { await refetch(); }}>\n          {/* Properties Grid/List */}\n          {viewMode === 'map' ? (\n            <Card className=\"p-4\">\n              <PropertyMap properties={filteredProperties.filter(hasCoordinates)} />\n            </Card>\n          ) : (\n            <>\n              {isLoading ? (\n                <div className={viewMode === 'grid' ? 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6' : 'space-y-4'}>\n                  {[1, 2, 3, 4, 5, 6].map((i) => (\n                    <PropertyCardSkeleton key={i} />\n                  ))}\n                </div>\n              ) : filteredProperties.length > 0 ? (\n                <div className={viewMode === 'grid' ? 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6' : 'space-y-4'}>\n                  {filteredProperties.map((property) => (\n                    <PropertyCard\n                      key={property.id}\n                      property={property}\n                      isFavorite={isFavorite(property.id)}\n                      onFavoriteClick={handleFavoriteClick}\n                      variant={viewMode === 'list' ? 'compact' : 'default'}\n                    />\n                  ))}\n                </div>\n              ) : (\n                <Card className=\"p-12 text-center space-y-6\">\n                  <SearchIcon className=\"h-16 w-16 mx-auto text-muted-foreground mb-4\" />\n                  <div>\n                    <h3 className=\"text-2xl font-semibold mb-2\">\n                      {searchParams.get('location') ? (\n                        <>Aucun bien disponible  <span className=\"capitalize text-primary\">{searchParams.get('location')}</span></>\n                      ) : (\n                        'Aucun bien trouv'\n                      )}\n                    </h3>\n                    <p className=\"text-muted-foreground\">\n                      {searchParams.get('location') \n                        ? 'Essayez d\\'largir votre recherche  d\\'autres villes ou dsactivez certains filtres'\n                        : 'Essayez de modifier vos critres de recherche pour voir plus de rsultats'\n                      }\n                    </p>\n                  </div>\n                  <div className=\"flex gap-3 justify-center\">\n                    <Button onClick={() => refetch()} variant=\"outline\" size=\"lg\">\n                       Actualiser\n                    </Button>\n                    <Button onClick={handleReset} variant=\"primary-gradient\" size=\"lg\">\n                      Rinitialiser les filtres\n                    </Button>\n                  </div>\n                </Card>\n              )}\n            </>\n          )}\n        </PullToRefresh>\n\n        {/* Recommendations */}\n        {user && (\n          <div className=\"mt-12\">\n            <RecommendationsSection \n              userId={user.id}\n              type=\"properties\"\n            />\n          </div>\n        )}\n      </main>\n\n      <Footer />\n    </div>\n  );\n};\n\nexport default Search;\n","import { Shield } from \"lucide-react\";\nimport { Link } from \"react-router-dom\";\n\ninterface CertifiedBadgeProps {\n  variant?: \"default\" | \"compact\";\n  clickable?: boolean;\n}\n\nconst CertifiedBadge = ({ variant = \"default\", clickable = true }: CertifiedBadgeProps) => {\n  const content = (\n    <div className=\"inline-flex items-center gap-2 bg-background border-2 border-secondary px-4 py-2 rounded-full shadow-card hover:shadow-primary transition-smooth\">\n      <Shield className=\"h-5 w-5 text-secondary fill-secondary/20\" />\n      <div className=\"flex flex-col\">\n        <span className=\"text-xs font-semibold text-secondary uppercase tracking-wide\">\n          Certifi ANSUT\n        </span>\n        {variant === \"default\" && (\n          <span className=\"text-xs text-muted-foreground\">\n            Plateforme scurise\n          </span>\n        )}\n      </div>\n    </div>\n  );\n\n  if (clickable) {\n    return (\n      <Link to=\"/certification\" className=\"inline-block\">\n        {content}\n      </Link>\n    );\n  }\n\n  return content;\n};\n\nexport default CertifiedBadge;\n","import Navbar from \"@/components/Navbar\";\nimport Footer from \"@/components/Footer\";\nimport CertifiedBadge from \"@/components/ui/certified-badge\";\nimport { Shield, Lock, FileCheck, Users } from \"lucide-react\";\nimport { LazyIllustration } from \"@/components/illustrations/LazyIllustration\";\nimport { getIllustrationPath } from \"@/lib/utils\";\nimport { BogolanPattern } from \"@/components/ui/african-patterns\";\n\nconst Certification = () => {\n  const features = [\n    {\n      icon: Shield,\n      title: \"Vrification d'identit\",\n      description: \"Tous les utilisateurs sont vrifis via Smile ID pour garantir l'authenticit des profils.\",\n    },\n    {\n      icon: Lock,\n      title: \"Transactions scurises\",\n      description: \"Paiements crypts (AES-256) et conformes aux normes bancaires ivoiriennes.\",\n    },\n    {\n      icon: FileCheck,\n      title: \"Validation des annonces\",\n      description: \"Chaque bien est vrifi par l'quipe ANSUT avant publication.\",\n    },\n    {\n      icon: Users,\n      title: \"Conformit lgale\",\n      description: \"Respect de la loi ivoirienne 2013-450 sur la protection des donnes.\",\n    },\n  ];\n\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <Navbar />\n      <main className=\"flex-1 pt-24\">\n        {/* Hero with illustration */}\n        <section className=\"relative h-96 overflow-hidden mb-12\">\n          <LazyIllustration \n            src={getIllustrationPath('certification-ansut-illustration')!}\n            alt=\"Certification officielle ANSUT\"\n            className=\"w-full h-full object-cover\"\n          />\n          <div className=\"absolute inset-0 bg-gradient-to-r from-primary/90 to-secondary/80 flex items-center justify-center\">\n            <div className=\"container mx-auto px-4 text-center text-white\">\n              <div className=\"flex justify-center mb-6\">\n                <CertifiedBadge clickable={false} />\n              </div>\n              <h1 className=\"text-h1 mb-4\">\n                <span className=\"text-gradient-animated\">Certification ANSUT</span>\n              </h1>\n              <p className=\"text-lg max-w-2xl mx-auto opacity-95\">\n                Mon Toit est propuls par l'Agence Nationale de Soutien  l'Urbanisme et au Territoire (ANSUT), \n                garantissant scurit, fiabilit et conformit pour tous vos projets immobiliers.\n              </p>\n            </div>\n          </div>\n        </section>\n\n        <section className=\"py-6 md:py-10\">\n          <div className=\"container mx-auto px-4 max-w-4xl\">\n            <div className=\"bg-gradient-primary/10 border-2 border-primary/20 rounded-xl p-8 mb-12\">\n              <h2 className=\"text-2xl font-bold mb-4\">Qu'est-ce que la certification ANSUT ?</h2>\n              <p className=\"text-muted-foreground mb-4\">\n                La certification ANSUT est un label de confiance dlivr aux plateformes immobilires \n                qui respectent les standards les plus levs en matire de scurit, transparence et \n                conformit rglementaire en Cte d'Ivoire.\n              </p>\n              <p className=\"text-muted-foreground\">\n                Mon Toit s'engage  protger vos donnes personnelles, vrifier l'authenticit de chaque \n                annonce et garantir la scurit de vos transactions financires.\n              </p>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-12\">\n              {features.map((feature, index) => {\n                const Icon = feature.icon;\n                return (\n                  <div key={index} className=\"bg-card border border-border rounded-xl p-6\">\n                    <div className=\"flex items-start gap-4\">\n                      <div className=\"p-3 rounded-lg bg-gradient-primary shrink-0\">\n                        <Icon className=\"h-6 w-6 text-primary-foreground\" />\n                      </div>\n                      <div>\n                        <h3 className=\"font-semibold text-lg mb-2\">{feature.title}</h3>\n                        <p className=\"text-sm text-muted-foreground\">{feature.description}</p>\n                      </div>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n\n            <div className=\"bg-muted/50 rounded-xl p-8 text-center\">\n              <h2 className=\"text-2xl font-bold mb-4\">Une plateforme 100% ivoirienne</h2>\n              <p className=\"text-muted-foreground max-w-2xl mx-auto\">\n                Dveloppe en Cte d'Ivoire, pour les Ivoiriens. Mon Toit s'adapte aux ralits \n                locales et propose des solutions de paiement compatibles avec Mobile Money \n                (Orange Money, MTN Money, Moov Money).\n              </p>\n            </div>\n          </div>\n        </section>\n      </main>\n      <Footer />\n    </div>\n  );\n};\n\nexport default Certification;\n","import { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { supabase } from '@/lib/supabase';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Eye, EyeOff, Home } from 'lucide-react';\nimport { Link } from 'react-router-dom';\nimport { toast } from '@/hooks/use-toast';\nimport { z } from 'zod';\n\nconst resetPasswordSchema = z.object({\n  password: z.string().min(6, { message: \"Le mot de passe doit contenir au moins 6 caractres\" }),\n  confirmPassword: z.string()\n}).refine((data) => data.password === data.confirmPassword, {\n  message: \"Les mots de passe ne correspondent pas\",\n  path: [\"confirmPassword\"]\n});\n\nconst ResetPassword = () => {\n  const navigate = useNavigate();\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [errors, setErrors] = useState<any>({});\n  const [sessionReady, setSessionReady] = useState(false);\n\n  // tablir la session depuis l'URL de rinitialisation\n  useEffect(() => {\n    const { data: { subscription } } = supabase.auth.onAuthStateChange((event, session) => {\n      if (event === 'PASSWORD_RECOVERY' && session) {\n        setSessionReady(true);\n      }\n    });\n\n    // Vrifier si une session existe dj\n    supabase.auth.getSession().then(({ data: { session } }) => {\n      if (session) {\n        setSessionReady(true);\n      }\n    });\n\n    // Timeout : si pas de session aprs 3 secondes, rediriger\n    const timeout = setTimeout(() => {\n      if (!sessionReady) {\n        toast({\n          title: \"Lien invalide\",\n          description: \"Le lien de rinitialisation est expir ou invalide. Veuillez redemander un nouveau lien.\",\n          variant: \"destructive\",\n        });\n        navigate('/auth');\n      }\n    }, 3000);\n\n    return () => {\n      subscription.unsubscribe();\n      clearTimeout(timeout);\n    };\n  }, [sessionReady, navigate]);\n\n  const handleResetPassword = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setErrors({});\n\n    const validation = resetPasswordSchema.safeParse({ password, confirmPassword });\n    \n    if (!validation.success) {\n      const formattedErrors: any = {};\n      validation.error.errors.forEach((err) => {\n        formattedErrors[err.path[0]] = err.message;\n      });\n      setErrors(formattedErrors);\n      return;\n    }\n\n    setLoading(true);\n    const { error } = await supabase.auth.updateUser({ password });\n    setLoading(false);\n\n    if (error) {\n      toast({\n        title: \"Erreur\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    } else {\n      toast({\n        title: \"Mot de passe rinitialis\",\n        description: \"Vous pouvez maintenant vous connecter avec votre nouveau mot de passe\",\n      });\n      navigate('/auth');\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-background via-background to-primary/5 flex items-center justify-center p-4\">\n      <div className=\"w-full max-w-md space-y-6\">\n        {/* Header */}\n        <div className=\"text-center space-y-2\">\n          <Link to=\"/\" className=\"inline-flex items-center gap-2 text-2xl font-bold text-primary\">\n            <Home className=\"h-8 w-8\" />\n            Mon Toit\n          </Link>\n          <p className=\"text-muted-foreground\">Propuls par ANSUT</p>\n        </div>\n\n        <Card>\n          <CardHeader>\n            <CardTitle>Rinitialiser le mot de passe</CardTitle>\n            <CardDescription>Entrez votre nouveau mot de passe</CardDescription>\n          </CardHeader>\n          <form onSubmit={handleResetPassword}>\n            <CardContent className=\"space-y-4\">\n              {!sessionReady && (\n                <div className=\"flex items-center justify-center py-4\">\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\n                  <p className=\"ml-3 text-muted-foreground\">Vrification du lien...</p>\n                </div>\n              )}\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"password\">Nouveau mot de passe</Label>\n                <div className=\"relative\">\n                  <Input\n                    id=\"password\"\n                    type={showPassword ? \"text\" : \"password\"}\n                    placeholder=\"\"\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)}\n                    required\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowPassword(!showPassword)}\n                    className=\"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors\"\n                  >\n                    {showPassword ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\n                  </button>\n                </div>\n                {errors.password && (\n                  <p className=\"text-sm text-destructive\">{errors.password}</p>\n                )}\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"confirmPassword\">Confirmer le mot de passe</Label>\n                <Input\n                  id=\"confirmPassword\"\n                  type={showPassword ? \"text\" : \"password\"}\n                  placeholder=\"\"\n                  value={confirmPassword}\n                  onChange={(e) => setConfirmPassword(e.target.value)}\n                  required\n                />\n                {errors.confirmPassword && (\n                  <p className=\"text-sm text-destructive\">{errors.confirmPassword}</p>\n                )}\n              </div>\n            </CardContent>\n            <CardFooter>\n              <Button type=\"submit\" className=\"w-full\" disabled={loading || !sessionReady}>\n                {loading ? 'Rinitialisation...' : 'Rinitialiser le mot de passe'}\n              </Button>\n            </CardFooter>\n          </form>\n        </Card>\n      </div>\n    </div>\n  );\n};\n\nexport default ResetPassword;\n","import { Badge } from '@/components/ui/badge';\nimport { Shield, Star, AlertTriangle } from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\ninterface TenantScoreBadgeProps {\n  score: number;\n  showIcon?: boolean;\n  size?: 'sm' | 'md' | 'lg';\n  className?: string;\n}\n\nexport const TenantScoreBadge = ({ score, showIcon = true, size = 'md', className }: TenantScoreBadgeProps) => {\n  const getScoreConfig = (score: number) => {\n    if (score >= 75) {\n      return {\n        label: 'Excellent',\n        variant: 'default' as const,\n        icon: Star,\n        bgClass: 'bg-green-600 hover:bg-green-700',\n        textClass: 'text-white',\n      };\n    } else if (score >= 60) {\n      return {\n        label: 'Bon',\n        variant: 'secondary' as const,\n        icon: Shield,\n        bgClass: 'bg-yellow-600 hover:bg-yellow-700',\n        textClass: 'text-white',\n      };\n    } else {\n      return {\n        label: ' risque',\n        variant: 'destructive' as const,\n        icon: AlertTriangle,\n        bgClass: 'bg-red-600 hover:bg-red-700',\n        textClass: 'text-white',\n      };\n    }\n  };\n\n  const config = getScoreConfig(score);\n  const Icon = config.icon;\n  \n  const sizeClasses = {\n    sm: 'text-xs px-2 py-0.5',\n    md: 'text-sm px-3 py-1',\n    lg: 'text-base px-4 py-1.5',\n  };\n\n  const iconSizes = {\n    sm: 'h-3 w-3',\n    md: 'h-4 w-4',\n    lg: 'h-5 w-5',\n  };\n\n  return (\n    <Badge \n      variant={config.variant}\n      className={cn(\n        config.bgClass,\n        config.textClass,\n        sizeClasses[size],\n        'font-semibold flex items-center gap-1.5',\n        className\n      )}\n    >\n      {showIcon && <Icon className={iconSizes[size]} />}\n      <span>{score}/100</span>\n      <span className=\"hidden sm:inline\"> {config.label}</span>\n    </Badge>\n  );\n};\n","import {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Progress } from '@/components/ui/progress';\nimport { HelpCircle, CheckCircle2, XCircle, Shield, Camera, FileText, Clock } from 'lucide-react';\nimport { Badge } from '@/components/ui/badge';\n\ninterface TenantScoreExplanationProps {\n  currentScore: number;\n  oneciVerified?: boolean;\n  faceVerified?: boolean;\n}\n\nexport const TenantScoreExplanation = ({\n  currentScore,\n  oneciVerified = false,\n  faceVerified = false,\n}: TenantScoreExplanationProps) => {\n  const criteria = [\n    {\n      icon: Shield,\n      label: 'Identit ONECI vrifie',\n      points: 40,\n      verified: oneciVerified,\n      description: 'Vrification de votre Carte Nationale d\\'Identit',\n      action: oneciVerified ? null : 'Complter ma vrification ONECI',\n    },\n    {\n      icon: Camera,\n      label: 'Vrification faciale',\n      points: 30,\n      verified: faceVerified,\n      description: 'Vrification biomtrique Smile ID',\n      action: faceVerified ? null : 'Activer la vrification faciale',\n    },\n    {\n      icon: FileText,\n      label: 'Documents fournis',\n      points: 20,\n      verified: false,\n      description: 'Fiches de paie, contrat de travail, etc.',\n      action: 'Ajouter mes documents',\n    },\n    {\n      icon: Clock,\n      label: 'Historique de location',\n      points: 10,\n      verified: false,\n      description: 'Attestations de bons paiements',\n      action: 'Ajouter mon historique',\n    },\n  ];\n\n  const maxScore = 100;\n  const earnedPoints = criteria.reduce((sum, c) => sum + (c.verified ? c.points : 0), 0);\n  const potentialGain = maxScore - earnedPoints;\n\n  return (\n    <Dialog>\n      <DialogTrigger asChild>\n        <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8\">\n          <HelpCircle className=\"h-4 w-4\" />\n        </Button>\n      </DialogTrigger>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <Shield className=\"h-5 w-5 text-primary\" />\n            Comment fonctionne le Score de Fiabilit ?\n          </DialogTitle>\n          <DialogDescription>\n            Votre score est calcul automatiquement selon vos vrifications et votre profil\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-6\">\n          {/* Current Score Progress */}\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center justify-between text-sm\">\n              <span className=\"font-medium\">Votre score actuel</span>\n              <span className=\"text-2xl font-bold text-primary\">{currentScore}/{maxScore}</span>\n            </div>\n            <Progress value={currentScore} className=\"h-3\" />\n            {potentialGain > 0 && (\n              <p className=\"text-sm text-muted-foreground\">\n                +{potentialGain} points possibles pour atteindre le score maximum\n              </p>\n            )}\n          </div>\n\n          {/* Criteria Breakdown */}\n          <div>\n            <h4 className=\"font-semibold mb-4\"> Composition du Score (100 points max)</h4>\n            <div className=\"space-y-3\">\n              {criteria.map((criterion, index) => {\n                const Icon = criterion.icon;\n                return (\n                  <div\n                    key={index}\n                    className={`p-4 rounded-lg border ${\n                      criterion.verified\n                        ? 'bg-green-50 border-green-200 dark:bg-green-950/20 dark:border-green-900'\n                        : 'bg-muted/50 border-border'\n                    }`}\n                  >\n                    <div className=\"flex items-start gap-3\">\n                      <Icon className={`h-5 w-5 mt-0.5 ${criterion.verified ? 'text-green-600' : 'text-muted-foreground'}`} />\n                      <div className=\"flex-1 space-y-1\">\n                        <div className=\"flex items-center gap-2\">\n                          <span className=\"font-medium text-sm\">{criterion.label}</span>\n                        </div>\n                        <p className=\"text-xs text-muted-foreground\">{criterion.description}</p>\n                        {criterion.action && !criterion.verified && (\n                          <p className=\"text-xs text-primary font-medium mt-2\">\n                             {criterion.action}\n                          </p>\n                        )}\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        {criterion.verified ? (\n                          <CheckCircle2 className=\"h-5 w-5 text-green-600\" />\n                        ) : (\n                          <XCircle className=\"h-5 w-5 text-muted-foreground\" />\n                        )}\n                        <span className={`text-sm font-bold ${criterion.verified ? 'text-green-600' : 'text-muted-foreground'}`}>\n                          +{criterion.points}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n\n          {/* Tips */}\n          <div className=\"p-4 bg-primary/5 rounded-lg border border-primary/20\">\n            <h4 className=\"font-semibold mb-2 flex items-center gap-2\">\n               Conseils pour amliorer votre score\n            </h4>\n            <ul className=\"space-y-2 text-sm text-muted-foreground\">\n              {!oneciVerified && (\n                <li> Compltez votre vrification ONECI pour gagner +40 points immdiatement</li>\n              )}\n              {!faceVerified && (\n                <li> Activez la vrification faciale pour +30 points supplmentaires</li>\n              )}\n              <li> Un score lev augmente vos chances d'obtenir un logement</li>\n              <li> Les propritaires privilgient les profils vrifis</li>\n            </ul>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n","import { useState, useEffect } from 'react';\nimport { supabase } from '@/lib/supabase';\nimport { useAuth } from '@/hooks/useAuth';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Switch } from '@/components/ui/switch';\nimport { Label } from '@/components/ui/label';\nimport { useToast } from '@/hooks/use-toast';\nimport { Bell, Mail, MessageSquare, Home, FileText, DollarSign } from 'lucide-react';\nimport { logger } from '@/services/logger';\n\ninterface NotificationPreference {\n  id: string;\n  category: string;\n  enabled: boolean;\n  email_enabled: boolean;\n  push_enabled: boolean;\n}\n\nconst NOTIFICATION_CATEGORIES = [\n  { value: 'messages', label: 'Messages', icon: MessageSquare, description: 'Nouveaux messages et rponses' },\n  { value: 'applications', label: 'Candidatures', icon: FileText, description: 'Nouvelles candidatures et mises  jour' },\n  { value: 'properties', label: 'Biens immobiliers', icon: Home, description: 'Nouveaux biens et favoris' },\n  { value: 'payments', label: 'Paiements', icon: DollarSign, description: 'Paiements et transactions' },\n  { value: 'system', label: 'Systme', icon: Bell, description: 'Notifications systme importantes' },\n];\n\nconst NotificationPreferences = () => {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const [preferences, setPreferences] = useState<NotificationPreference[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (user) {\n      fetchPreferences();\n    }\n  }, [user]);\n\n  const fetchPreferences = async () => {\n    if (!user) return;\n\n    try {\n      const { data, error } = await supabase\n        .from('notification_preferences')\n        .select('*')\n        .eq('user_id', user.id);\n\n      if (error) throw error;\n\n      // Crer des prfrences par dfaut pour les catgories manquantes\n      const existingCategories = data?.map(p => p.category) || [];\n      const missingCategories = NOTIFICATION_CATEGORIES\n        .map(c => c.value)\n        .filter(cat => !existingCategories.includes(cat));\n\n      if (missingCategories.length > 0) {\n        const newPreferences = missingCategories.map(category => ({\n          user_id: user.id,\n          category,\n          enabled: true,\n          email_enabled: false,\n          push_enabled: true,\n        }));\n\n        const { data: inserted } = await supabase\n          .from('notification_preferences')\n          .insert(newPreferences)\n          .select();\n\n        setPreferences([...(data || []), ...(inserted || [])]);\n      } else {\n        setPreferences(data || []);\n      }\n    } catch (error) {\n      logger.logError(error, { context: 'NotificationPreferences', action: 'fetch' });\n      toast({\n        title: 'Erreur',\n        description: 'Impossible de charger les prfrences',\n        variant: 'destructive',\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const updatePreference = async (\n    category: string,\n    field: 'enabled' | 'email_enabled' | 'push_enabled',\n    value: boolean\n  ) => {\n    if (!user) return;\n\n    try {\n      const { error } = await supabase\n        .from('notification_preferences')\n        .update({ [field]: value })\n        .eq('user_id', user.id)\n        .eq('category', category);\n\n      if (error) throw error;\n\n      setPreferences(prev =>\n        prev.map(p =>\n          p.category === category ? { ...p, [field]: value } : p\n        )\n      );\n\n      toast({\n        title: 'Prfrences mises  jour',\n        description: 'Vos prfrences de notifications ont t enregistres',\n      });\n    } catch (error) {\n      logger.logError(error, { context: 'NotificationPreferences', action: 'update' });\n      toast({\n        title: 'Erreur',\n        description: 'Impossible de mettre  jour les prfrences',\n        variant: 'destructive',\n      });\n    }\n  };\n\n  if (loading) {\n    return (\n      <Card>\n        <CardHeader>\n          <CardTitle>Prfrences de notifications</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex items-center justify-center p-8\">\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>Prfrences de notifications</CardTitle>\n        <CardDescription>\n          Grez comment vous souhaitez recevoir vos notifications\n        </CardDescription>\n      </CardHeader>\n      <CardContent className=\"space-y-6\">\n        {NOTIFICATION_CATEGORIES.map(({ value, label, icon: Icon, description }) => {\n          const pref = preferences.find(p => p.category === value);\n          if (!pref) return null;\n\n          return (\n            <div key={value} className=\"space-y-4 p-4 border rounded-lg\">\n              <div className=\"flex items-start gap-3\">\n                <Icon className=\"h-5 w-5 mt-0.5 text-muted-foreground\" />\n                <div className=\"flex-1\">\n                  <h4 className=\"font-medium\">{label}</h4>\n                  <p className=\"text-sm text-muted-foreground\">{description}</p>\n                </div>\n              </div>\n              \n              <div className=\"grid gap-3 pl-8\">\n                <div className=\"flex items-center justify-between\">\n                  <Label htmlFor={`${value}-enabled`} className=\"text-sm\">\n                    Activer les notifications\n                  </Label>\n                  <Switch\n                    id={`${value}-enabled`}\n                    checked={pref.enabled}\n                    onCheckedChange={(checked) =>\n                      updatePreference(value, 'enabled', checked)\n                    }\n                  />\n                </div>\n\n                {pref.enabled && (\n                  <>\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center gap-2\">\n                        <Bell className=\"h-4 w-4 text-muted-foreground\" />\n                        <Label htmlFor={`${value}-push`} className=\"text-sm\">\n                          Notifications push\n                        </Label>\n                      </div>\n                      <Switch\n                        id={`${value}-push`}\n                        checked={pref.push_enabled}\n                        onCheckedChange={(checked) =>\n                          updatePreference(value, 'push_enabled', checked)\n                        }\n                      />\n                    </div>\n\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center gap-2\">\n                        <Mail className=\"h-4 w-4 text-muted-foreground\" />\n                        <Label htmlFor={`${value}-email`} className=\"text-sm\">\n                          Notifications par email\n                        </Label>\n                      </div>\n                      <Switch\n                        id={`${value}-email`}\n                        checked={pref.email_enabled}\n                        onCheckedChange={(checked) =>\n                          updatePreference(value, 'email_enabled', checked)\n                        }\n                      />\n                    </div>\n                  </>\n                )}\n              </div>\n            </div>\n          );\n        })}\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default NotificationPreferences;\n","import { useState, useEffect } from 'react';\nimport { supabase } from '@/lib/supabase';\nimport { useAuth } from './useAuth';\nimport { logger } from '@/services/logger';\n\nexport interface MfaStatus {\n  mfaEnabled: boolean;\n  backupCodesCount: number;\n  unusedCodesCount: number;\n  mfaRequired: boolean;\n  gracePeriodDays: number;\n  loading: boolean;\n  complianceStatus: {\n    daysRemaining: number;\n    isExpired: boolean;\n    expiresAt: Date | null;\n  };\n}\n\nexport const useMfaStatus = () => {\n  const { user, roles, profile } = useAuth();\n  const [status, setStatus] = useState<MfaStatus>({\n    mfaEnabled: false,\n    backupCodesCount: 0,\n    unusedCodesCount: 0,\n    mfaRequired: false,\n    gracePeriodDays: 0,\n    loading: true,\n    complianceStatus: {\n      daysRemaining: 0,\n      isExpired: false,\n      expiresAt: null,\n    },\n  });\n\n  useEffect(() => {\n    if (!user) {\n      setStatus({\n        mfaEnabled: false,\n        backupCodesCount: 0,\n        unusedCodesCount: 0,\n        mfaRequired: false,\n        gracePeriodDays: 0,\n        loading: false,\n        complianceStatus: {\n          daysRemaining: 0,\n          isExpired: false,\n          expiresAt: null,\n        },\n      });\n      return;\n    }\n\n    const fetchMfaStatus = async () => {\n      try {\n        // Check if MFA is enabled (check if user has backup codes)\n        const { data: backupCodes, error: codesError } = await supabase\n          .from('mfa_backup_codes')\n          .select('id, used_at')\n          .eq('user_id', user.id);\n\n        if (codesError) throw codesError;\n\n        const totalCodes = backupCodes?.length || 0;\n        const unusedCodes = backupCodes?.filter(code => !code.used_at).length || 0;\n        const hasMfa = totalCodes > 0;\n\n        // Check MFA policy for user's roles\n        let isRequired = false;\n        let graceDays = 0;\n\n        if (roles.length > 0) {\n          // Filter valid app_role values\n          const validRoles = roles.filter(role => \n            ['admin', 'super_admin', 'tiers_de_confiance', 'user'].includes(role)\n          );\n\n          if (validRoles.length > 0) {\n            const { data: policies, error: policiesError } = await supabase\n              .from('mfa_policies')\n              .select('role, mfa_required, grace_period_days')\n              .in('role', validRoles as any);\n\n            if (policiesError) throw policiesError;\n\n            // If any role requires MFA, it's required\n            const requiredPolicy = policies?.find(p => p.mfa_required);\n            if (requiredPolicy) {\n              isRequired = true;\n              graceDays = requiredPolicy.grace_period_days || 0;\n            }\n          }\n        }\n\n        // Calculer le statut de conformit pour les admins\n        let complianceStatus = {\n          daysRemaining: 0,\n          isExpired: false,\n          expiresAt: null as Date | null,\n        };\n\n        if (isRequired && !hasMfa && profile?.created_at) {\n          const createdAt = new Date(profile.created_at);\n          const expiresAt = new Date(createdAt);\n          expiresAt.setDate(expiresAt.getDate() + graceDays);\n          \n          const now = new Date();\n          const daysRemaining = Math.ceil((expiresAt.getTime() - now.getTime()) / (1000 * 60 * 60 * 24));\n          \n          complianceStatus = {\n            daysRemaining: Math.max(0, daysRemaining),\n            isExpired: daysRemaining < 0,\n            expiresAt,\n          };\n        }\n\n        setStatus({\n          mfaEnabled: hasMfa,\n          backupCodesCount: totalCodes,\n          unusedCodesCount: unusedCodes,\n          mfaRequired: isRequired,\n          gracePeriodDays: graceDays,\n          loading: false,\n          complianceStatus,\n        });\n      } catch (error) {\n        logger.logError(error, { context: 'useMfaStatus', action: 'fetch' });\n        setStatus(prev => ({ ...prev, loading: false }));\n      }\n    };\n\n    fetchMfaStatus();\n  }, [user, roles, profile]);\n\n  const refreshStatus = async () => {\n    setStatus(prev => ({ ...prev, loading: true }));\n    // Trigger re-fetch by updating a dependency\n    if (user) {\n      const { data: backupCodes } = await supabase\n        .from('mfa_backup_codes')\n        .select('id, used_at')\n        .eq('user_id', user.id);\n\n      const totalCodes = backupCodes?.length || 0;\n      const unusedCodes = backupCodes?.filter(code => !code.used_at).length || 0;\n\n      setStatus(prev => {\n        // Recalculer le statut de conformit\n        let complianceStatus = prev.complianceStatus;\n        if (prev.mfaRequired && totalCodes === 0 && profile?.created_at) {\n          const createdAt = new Date(profile.created_at);\n          const expiresAt = new Date(createdAt);\n          expiresAt.setDate(expiresAt.getDate() + prev.gracePeriodDays);\n          \n          const now = new Date();\n          const daysRemaining = Math.ceil((expiresAt.getTime() - now.getTime()) / (1000 * 60 * 60 * 24));\n          \n          complianceStatus = {\n            daysRemaining: Math.max(0, daysRemaining),\n            isExpired: daysRemaining < 0,\n            expiresAt,\n          };\n        } else if (totalCodes > 0) {\n          complianceStatus = {\n            daysRemaining: 0,\n            isExpired: false,\n            expiresAt: null,\n          };\n        }\n\n        return {\n          ...prev,\n          mfaEnabled: totalCodes > 0,\n          backupCodesCount: totalCodes,\n          unusedCodesCount: unusedCodes,\n          loading: false,\n          complianceStatus,\n        };\n      });\n    }\n  };\n\n  return { ...status, refreshStatus };\n};\n","import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { Download, Shield, AlertTriangle } from 'lucide-react';\n\ninterface BackupCodesDisplayProps {\n  codes: string[];\n  onDownload?: () => void;\n}\n\nexport const BackupCodesDisplay = ({ codes, onDownload }: BackupCodesDisplayProps) => {\n  const handleDownload = () => {\n    const content = `Codes de rcupration 2FA - Mon Toit\n\nIMPORTANT : Conservez ces codes en lieu sr !\nCes codes vous permettront de vous connecter si vous perdez l'accs  votre application d'authentification.\n\nChaque code ne peut tre utilis qu'une seule fois.\n\n${codes.map((code, i) => `${i + 1}. ${code}`).join('\\n')}\n\nGnr le : ${new Date().toLocaleString('fr-FR')}\n`;\n\n    const blob = new Blob([content], { type: 'text/plain' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `montoit-backup-codes-${Date.now()}.txt`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n\n    if (onDownload) onDownload();\n  };\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <Shield className=\"h-5 w-5 text-green-600\" />\n          Codes de rcupration 2FA\n        </CardTitle>\n        <CardDescription>\n          Ces codes vous permettront de vous connecter si vous perdez l'accs  votre application d'authentification\n        </CardDescription>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        <Alert variant=\"destructive\">\n          <AlertTriangle className=\"h-4 w-4\" />\n          <AlertDescription>\n            <strong>IMPORTANT :</strong> Conservez ces codes en lieu sr. Chaque code ne peut tre utilis qu'une seule fois.\n          </AlertDescription>\n        </Alert>\n\n        <div className=\"grid grid-cols-2 gap-2 p-4 bg-muted rounded-lg font-mono text-sm\">\n          {codes.map((code, index) => (\n            <div key={index} className=\"flex items-center gap-2\">\n              <span className=\"text-muted-foreground\">{index + 1}.</span>\n              <code className=\"font-bold tracking-wider\">{code}</code>\n            </div>\n          ))}\n        </div>\n\n        <div className=\"flex gap-2\">\n          <Button onClick={handleDownload} className=\"flex-1\">\n            <Download className=\"h-4 w-4 mr-2\" />\n            Tlcharger les codes\n          </Button>\n        </div>\n\n        <p className=\"text-sm text-muted-foreground text-center\">\n          Vous pouvez voir vos codes restants dans votre profil\n        </p>\n      </CardContent>\n    </Card>\n  );\n};\n","import { useState, useEffect } from 'react';\nimport { supabase } from '@/lib/supabase';\nimport { QRCodeSVG } from 'qrcode.react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { logger } from '@/services/logger';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { toast } from '@/hooks/use-toast';\nimport { Shield, Check, AlertTriangle, Loader2 } from 'lucide-react';\nimport { useMfaStatus } from '@/hooks/useMfaStatus';\nimport { BackupCodesDisplay } from './BackupCodesDisplay';\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from '@/components/ui/alert-dialog';\n\nexport const TwoFactorSetup = () => {\n  const { mfaEnabled, mfaRequired, unusedCodesCount, loading: statusLoading, refreshStatus } = useMfaStatus();\n  const [step, setStep] = useState<'idle' | 'qr' | 'verify' | 'codes' | 'enabled'>('idle');\n  const [qrCode, setQrCode] = useState<string>('');\n  const [secret, setSecret] = useState<string>('');\n  const [factorId, setFactorId] = useState<string>('');\n  const [verificationCode, setVerificationCode] = useState('');\n  const [backupCodes, setBackupCodes] = useState<string[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [showDisableDialog, setShowDisableDialog] = useState(false);\n\n  useEffect(() => {\n    if (mfaEnabled && step === 'idle') {\n      setStep('enabled');\n    }\n  }, [mfaEnabled, step]);\n\n  const enableTwoFactor = async () => {\n    setLoading(true);\n    try {\n      const { data, error } = await supabase.auth.mfa.enroll({\n        factorType: 'totp',\n      });\n\n      if (error) throw error;\n\n      if (data) {\n        // Limit QR code to just the URI without extra data\n        const uri = data.totp.uri || '';\n        if (uri.length > 500) {\n          logger.warn('QR URI too long, truncating', { uriLength: uri.length });\n        }\n        setQrCode(uri.substring(0, 500));\n        setSecret(data.totp.secret);\n        setFactorId(data.id);\n        setStep('qr');\n      }\n    } catch (error: any) {\n      toast({\n        title: 'Erreur',\n        description: error.message,\n        variant: 'destructive',\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const generateBackupCodes = () => {\n    const codes: string[] = [];\n    for (let i = 0; i < 10; i++) {\n      const code = Math.random().toString(36).substring(2, 10).toUpperCase();\n      codes.push(code);\n    }\n    return codes;\n  };\n\n  const saveBackupCodes = async (codes: string[], userId: string) => {\n    const { data: { user } } = await supabase.auth.getUser();\n    if (!user) return;\n\n    for (const code of codes) {\n      const encoder = new TextEncoder();\n      const data = encoder.encode(code);\n      const hashBuffer = await crypto.subtle.digest('SHA-256', data);\n      const hashArray = Array.from(new Uint8Array(hashBuffer));\n      const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');\n\n      await supabase.from('mfa_backup_codes').insert({\n        user_id: userId,\n        code_hash: hashHex,\n      });\n    }\n\n    // Log backup codes generation\n    await supabase.from('admin_audit_logs').insert({\n      admin_id: userId,\n      action_type: 'mfa_backup_codes_generated',\n      target_type: 'user',\n      target_id: userId,\n      action_metadata: {\n        codes_count: codes.length,\n        timestamp: new Date().toISOString(),\n      },\n    });\n  };\n\n  const verifyAndEnable = async () => {\n    if (!verificationCode || !factorId) return;\n\n    setLoading(true);\n    try {\n      const challenge = await supabase.auth.mfa.challenge({ factorId });\n      \n      if (challenge.error) throw challenge.error;\n\n      const verify = await supabase.auth.mfa.verify({\n        factorId,\n        challengeId: challenge.data.id,\n        code: verificationCode,\n      });\n\n      if (verify.error) throw verify.error;\n\n      // Generate and save backup codes\n      const { data: { user } } = await supabase.auth.getUser();\n      if (user) {\n        const codes = generateBackupCodes();\n        await saveBackupCodes(codes, user.id);\n        setBackupCodes(codes);\n\n        // Log 2FA enablement\n        await supabase.from('admin_audit_logs').insert({\n          admin_id: user.id,\n          action_type: 'mfa_enabled',\n          target_type: 'user',\n          target_id: user.id,\n          action_metadata: {\n            timestamp: new Date().toISOString(),\n          },\n        });\n      }\n\n      toast({\n        title: '2FA activ',\n        description: 'Authentification  deux facteurs active avec succs',\n      });\n      setStep('codes');\n      await refreshStatus();\n    } catch (error: any) {\n      toast({\n        title: 'Code invalide',\n        description: 'Veuillez vrifier le code et ressayer',\n        variant: 'destructive',\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const disableTwoFactor = async () => {\n    setLoading(true);\n    try {\n      const { data: factors } = await supabase.auth.mfa.listFactors();\n      const totpFactor = factors?.totp?.[0];\n\n      if (totpFactor) {\n        await supabase.auth.mfa.unenroll({ factorId: totpFactor.id });\n      }\n\n      // Delete all backup codes\n      const { data: { user } } = await supabase.auth.getUser();\n      if (user) {\n        await supabase.from('mfa_backup_codes').delete().eq('user_id', user.id);\n\n        // Log 2FA disablement\n        await supabase.from('admin_audit_logs').insert({\n          admin_id: user.id,\n          action_type: 'mfa_disabled',\n          target_type: 'user',\n          target_id: user.id,\n          action_metadata: {\n            timestamp: new Date().toISOString(),\n          },\n        });\n      }\n\n      toast({\n        title: '2FA dsactiv',\n        description: 'Authentification  deux facteurs dsactive',\n      });\n      setStep('idle');\n      setShowDisableDialog(false);\n      await refreshStatus();\n    } catch (error: any) {\n      toast({\n        title: 'Erreur',\n        description: error.message,\n        variant: 'destructive',\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (statusLoading) {\n    return (\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Loader2 className=\"h-5 w-5 animate-spin\" />\n            Chargement...\n          </CardTitle>\n        </CardHeader>\n      </Card>\n    );\n  }\n\n  if (step === 'codes') {\n    return (\n      <div className=\"space-y-4\">\n        <BackupCodesDisplay \n          codes={backupCodes} \n          onDownload={() => {\n            setStep('enabled');\n          }}\n        />\n      </div>\n    );\n  }\n\n  if (step === 'enabled') {\n    return (\n      <>\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Check className=\"h-5 w-5 text-green-600\" />\n              2FA Activ\n            </CardTitle>\n            <CardDescription>\n              Votre compte est protg par l'authentification  deux facteurs\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"flex items-center justify-between p-4 bg-muted rounded-lg\">\n              <div>\n                <p className=\"font-medium\">Codes de rcupration</p>\n                <p className=\"text-sm text-muted-foreground\">\n                  {unusedCodesCount} codes restants\n                </p>\n              </div>\n              {unusedCodesCount < 3 && (\n                <AlertTriangle className=\"h-5 w-5 text-orange-500\" />\n              )}\n            </div>\n\n            <Button \n              variant=\"destructive\" \n              onClick={() => setShowDisableDialog(true)}\n              disabled={loading}\n            >\n              {loading && <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />}\n              Dsactiver 2FA\n            </Button>\n          </CardContent>\n        </Card>\n\n        <AlertDialog open={showDisableDialog} onOpenChange={setShowDisableDialog}>\n          <AlertDialogContent>\n            <AlertDialogHeader>\n              <AlertDialogTitle>Dsactiver 2FA ?</AlertDialogTitle>\n              <AlertDialogDescription>\n                Vous tes sur le point de dsactiver l'authentification  deux facteurs.\n                Cela rduira la scurit de votre compte.\n                {mfaRequired && (\n                  <Alert variant=\"destructive\" className=\"mt-4\">\n                    <AlertTriangle className=\"h-4 w-4\" />\n                    <AlertDescription>\n                      <strong>Attention :</strong> La 2FA est obligatoire pour votre rle.\n                      Vous devrez la ractiver.\n                    </AlertDescription>\n                  </Alert>\n                )}\n              </AlertDialogDescription>\n            </AlertDialogHeader>\n            <AlertDialogFooter>\n              <AlertDialogCancel>Annuler</AlertDialogCancel>\n              <AlertDialogAction onClick={disableTwoFactor} className=\"bg-destructive text-destructive-foreground\">\n                Dsactiver\n              </AlertDialogAction>\n            </AlertDialogFooter>\n          </AlertDialogContent>\n        </AlertDialog>\n      </>\n    );\n  }\n\n  if (step === 'qr') {\n    return (\n      <Card>\n        <CardHeader>\n          <CardTitle>Scanner le QR Code</CardTitle>\n          <CardDescription>\n            Utilisez une application d'authentification (Google Authenticator, Authy, etc.)\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"flex justify-center bg-white p-4 rounded-lg\">\n            <QRCodeSVG value={qrCode} size={200} />\n          </div>\n          \n          <div className=\"space-y-2\">\n            <p className=\"text-sm font-medium\">Ou entrez ce code manuellement :</p>\n            <code className=\"block bg-muted p-2 rounded text-sm break-all\">\n              {secret}\n            </code>\n          </div>\n\n          <div className=\"space-y-2\">\n            <label className=\"text-sm font-medium\">Code de vrification</label>\n            <Input\n              type=\"text\"\n              placeholder=\"000000\"\n              maxLength={6}\n              value={verificationCode}\n              onChange={(e) => setVerificationCode(e.target.value.replace(/\\D/g, ''))}\n            />\n          </div>\n\n          <div className=\"flex gap-2\">\n            <Button \n              onClick={verifyAndEnable} \n              disabled={loading || verificationCode.length !== 6}\n              className=\"flex-1\"\n            >\n              Vrifier et Activer\n            </Button>\n            <Button \n              variant=\"outline\" \n              onClick={() => setStep('idle')}\n            >\n              Annuler\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <Shield className=\"h-5 w-5\" />\n          Authentification  deux facteurs\n        </CardTitle>\n        <CardDescription>\n          Renforcez la scurit de votre compte administrateur\n        </CardDescription>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        {mfaRequired && (\n          <Alert variant=\"destructive\">\n            <AlertTriangle className=\"h-4 w-4\" />\n            <AlertDescription>\n              <strong>Obligatoire :</strong> La 2FA est requise pour votre rle.\n              Vous devez l'activer pour garantir la scurit.\n            </AlertDescription>\n          </Alert>\n        )}\n        <Button onClick={enableTwoFactor} disabled={loading}>\n          {loading && <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />}\n          Activer 2FA\n        </Button>\n      </CardContent>\n    </Card>\n  );\n};\n","import { useState } from 'react';\nimport { supabase } from '@/lib/supabase';\nimport { useAuth } from './useAuth';\nimport { useQueryClient } from '@tanstack/react-query';\nimport { toast } from './use-toast';\nimport { logger } from '@/services/logger';\n\ntype UserType = 'locataire' | 'proprietaire' | 'agence' | 'admin_ansut';\n\nexport interface UserActiveRoles {\n  user_id: string;\n  available_roles: UserType[];\n  current_role: UserType;\n  created_at: string;\n  updated_at: string;\n}\n\ninterface RoleSwitchError {\n  type: 'rate_limit' | 'unavailable' | 'network' | 'unauthorized' | 'unknown';\n  message: string;\n  retryAfter?: number;\n}\n\nexport const useRoleSwitch = () => {\n  const { user, refreshProfile } = useAuth();\n  const queryClient = useQueryClient();\n  const [isLoading, setIsLoading] = useState(false);\n  const [activeRoles, setActiveRoles] = useState<UserActiveRoles | null>(null);\n  const [error, setError] = useState<RoleSwitchError | null>(null);\n  const [retryCount, setRetryCount] = useState(0);\n\n  const fetchActiveRoles = async () => {\n    if (!user) return;\n    \n    const { data, error } = await supabase\n      .from('user_active_roles')\n      .select('*')\n      .eq('user_id', user.id)\n      .single();\n    \n    if (error) {\n      logger.logError(error, { context: 'useRoleSwitch', action: 'fetchActiveRoles' });\n      return;\n    }\n    \n    setActiveRoles(data);\n  };\n\n  const parseError = (error: any): RoleSwitchError => {\n    const message = error?.message || '';\n    \n    if (message.includes('Rate limit') || message.includes('Too many')) {\n      const match = message.match(/(\\d+)\\s*(hour|minute)/i);\n      const retryAfter = match ? parseInt(match[1]) * (match[2].toLowerCase() === 'hour' ? 60 : 1) : 60;\n      return {\n        type: 'rate_limit',\n        message: 'Trop de changements rcents. Veuillez patienter.',\n        retryAfter\n      };\n    }\n    \n    if (message.includes('not available') || message.includes('pas disponible')) {\n      return {\n        type: 'unavailable',\n        message: 'Ce rle n\\'est pas disponible pour votre compte.'\n      };\n    }\n    \n    if (message.includes('NetworkError') || message.includes('Failed to fetch')) {\n      return {\n        type: 'network',\n        message: 'Problme de connexion. Vrifiez votre rseau.'\n      };\n    }\n    \n    if (message.includes('Unauthorized') || message.includes('not authenticated')) {\n      return {\n        type: 'unauthorized',\n        message: 'Session expire. Veuillez vous reconnecter.'\n      };\n    }\n    \n    return {\n      type: 'unknown',\n      message: message || 'Une erreur inattendue s\\'est produite.'\n    };\n  };\n\n  const switchRole = async (newRole: UserType, retry = false) => {\n    if (!user) {\n      const authError: RoleSwitchError = {\n        type: 'unauthorized',\n        message: 'Vous devez tre connect'\n      };\n      setError(authError);\n      toast({\n        title: \"Erreur\",\n        description: authError.message,\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setError(null);\n    setIsLoading(true);\n\n    try {\n      const { data, error } = await supabase.functions.invoke('switch-role', {\n        body: { newRole }\n      });\n\n      if (error) {\n        throw error;\n      }\n\n      // Succs : rinitialiser le compteur de retry\n      setRetryCount(0);\n      \n      toast({\n        title: \" Rle chang\",\n        description: data.message || `Vous tes maintenant ${newRole}`,\n        duration: 3000,\n      });\n\n      await refreshProfile();\n      await fetchActiveRoles();\n      queryClient.invalidateQueries();\n      \n      setTimeout(() => {\n        window.location.reload();\n      }, 500);\n\n    } catch (error: any) {\n      const parsedError = parseError(error);\n      setError(parsedError);\n      \n      // Auto-retry pour les erreurs rseau (max 2 tentatives)\n      if (parsedError.type === 'network' && retryCount < 2 && !retry) {\n        setRetryCount(prev => prev + 1);\n        setTimeout(() => {\n          switchRole(newRole, true);\n        }, 2000);\n        \n        toast({\n          title: \"Reconnexion...\",\n          description: `Tentative ${retryCount + 1}/2`,\n        });\n        return;\n      }\n      \n      // Afficher le message d'erreur appropri\n      const toastDescription = parsedError.retryAfter\n        ? `${parsedError.message} Ressayez dans ${parsedError.retryAfter} minute${parsedError.retryAfter > 1 ? 's' : ''}.`\n        : parsedError.message;\n      \n      toast({\n        title: \"Erreur\",\n        description: toastDescription,\n        variant: \"destructive\",\n        duration: parsedError.type === 'rate_limit' ? 5000 : 4000,\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const clearError = () => setError(null);\n\n  const addAvailableRole = async (newRole: UserType) => {\n    if (!user) return;\n    \n    setIsLoading(true);\n    \n    try {\n      const { error } = await supabase.rpc('add_available_role', {\n        p_user_id: user.id,\n        p_new_role: newRole\n      });\n      \n      if (error) throw error;\n      \n      toast({\n        title: \" Rle ajout\",\n        description: `Le rle ${newRole} est maintenant disponible`,\n      });\n      \n      await fetchActiveRoles();\n      \n    } catch (error: any) {\n      toast({\n        title: \"Erreur\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return {\n    activeRoles,\n    currentRole: activeRoles?.current_role,\n    availableRoles: activeRoles?.available_roles || [],\n    isLoading,\n    error,\n    retryCount,\n    switchRole,\n    addAvailableRole,\n    fetchActiveRoles,\n    clearError,\n    hasMultipleRoles: (activeRoles?.available_roles?.length || 0) > 1,\n  };\n};\n","import { useState, useEffect } from 'react';\nimport { useRoleSwitch } from '@/hooks/useRoleSwitch';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Loader2, Home, Building2, Briefcase, Check, AlertCircle } from 'lucide-react';\nimport { cn } from '@/lib/utils';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\n\ntype UserType = 'locataire' | 'proprietaire' | 'agence' | 'admin_ansut';\n\nconst roleConfig = {\n  locataire: {\n    label: 'Locataire',\n    description: 'Recherchez et postulez aux annonces',\n    icon: Home,\n    gradient: 'from-primary/10 via-primary/5 to-transparent',\n    borderColor: 'border-primary/30',\n    iconColor: 'text-primary',\n    badgeColor: 'bg-primary/10 text-primary',\n  },\n  proprietaire: {\n    label: 'Propritaire',\n    description: 'Grez vos biens et recevez des candidatures',\n    icon: Building2,\n    gradient: 'from-secondary/10 via-secondary/5 to-transparent',\n    borderColor: 'border-secondary/30',\n    iconColor: 'text-secondary',\n    badgeColor: 'bg-secondary/10 text-secondary',\n  },\n  agence: {\n    label: 'Agence Immobilire',\n    description: 'Grez un portefeuille de biens',\n    icon: Briefcase,\n    gradient: 'from-accent/10 via-accent/5 to-transparent',\n    borderColor: 'border-accent/30',\n    iconColor: 'text-accent-foreground',\n    badgeColor: 'bg-accent/10 text-accent-foreground',\n  },\n} as const;\n\nexport const RoleSelectorFull = () => {\n  const { \n    currentRole, \n    availableRoles, \n    isLoading, \n    error,\n    switchRole,\n    fetchActiveRoles,\n    hasMultipleRoles \n  } = useRoleSwitch();\n\n  const [switching, setSwitching] = useState<UserType | null>(null);\n\n  useEffect(() => {\n    fetchActiveRoles();\n  }, []);\n\n  if (!currentRole) return null;\n\n  const handleSwitch = async (role: UserType) => {\n    if (role === currentRole || isLoading) return;\n    setSwitching(role);\n    await switchRole(role);\n    setSwitching(null);\n  };\n\n  const filteredRoles = availableRoles.filter(\n    (role): role is keyof typeof roleConfig => \n      role !== 'admin_ansut' && role in roleConfig\n  );\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <Building2 className=\"h-5 w-5\" />\n          Gestion des Rles\n        </CardTitle>\n        <CardDescription>\n          {hasMultipleRoles \n            ? 'Basculez entre vos diffrents rles sans vous reconnecter'\n            : 'Ajoutez un nouveau rle pour accder  plus de fonctionnalits'\n          }\n        </CardDescription>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n      {error && (\n        <Alert variant=\"destructive\">\n          <AlertCircle className=\"h-4 w-4\" />\n          <AlertDescription>{error.message}</AlertDescription>\n        </Alert>\n      )}\n\n        <div className=\"grid gap-3\">\n          {filteredRoles.map((role) => {\n            const config = roleConfig[role];\n            const RoleIcon = config.icon;\n            const isActive = role === currentRole;\n            const isSwitching = switching === role;\n\n            return (\n              <div\n                key={role}\n                className={cn(\n                  \"relative overflow-hidden rounded-xl border-2 transition-all duration-800\",\n                  \"hover:shadow-md cursor-pointer\",\n                  isActive \n                    ? cn(config.borderColor, \"shadow-soft\") \n                    : \"border-border/50 hover:border-border\"\n                )}\n                onClick={() => !isActive && handleSwitch(role)}\n              >\n                <div className={cn(\n                  \"absolute inset-0 bg-gradient-to-br opacity-50\",\n                  isActive && config.gradient\n                )} />\n                \n                <div className=\"relative p-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-3\">\n                      <div className={cn(\n                        \"p-2.5 rounded-lg transition-all duration-800\",\n                        isActive ? config.badgeColor : \"bg-muted\"\n                      )}>\n                        <RoleIcon className={cn(\n                          \"h-5 w-5 transition-colors duration-800\",\n                          isActive ? config.iconColor : \"text-muted-foreground\"\n                        )} />\n                      </div>\n                      <div>\n                        <div className=\"flex items-center gap-2\">\n                          <h4 className=\"font-semibold text-foreground\">\n                            {config.label}\n                          </h4>\n                          {isActive && (\n                            <Badge variant=\"default\" className={cn(\"text-xs\", config.badgeColor)}>\n                              <Check className=\"h-3 w-3 mr-1\" />\n                              Actif\n                            </Badge>\n                          )}\n                        </div>\n                        <p className=\"text-sm text-muted-foreground mt-0.5\">\n                          {config.description}\n                        </p>\n                      </div>\n                    </div>\n\n                    {!isActive && (\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        disabled={isLoading}\n                        className=\"hover:bg-primary/10\"\n                      >\n                        {isSwitching ? (\n                          <Loader2 className=\"h-4 w-4 animate-spin\" />\n                        ) : (\n                          'Activer'\n                        )}\n                      </Button>\n                    )}\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n\n        {!hasMultipleRoles && (\n          <div className=\"mt-4 p-4 bg-muted/50 rounded-lg border border-border/50\">\n            <p className=\"text-sm text-muted-foreground text-center\">\n               Vous pouvez ajouter d'autres rles selon vos besoins\n            </p>\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n","import { useState, useEffect } from 'react';\nimport { supabase } from '@/lib/supabase';\nimport { logger } from '@/services/logger';\nimport { useAuth } from '@/hooks/useAuth';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Switch } from '@/components/ui/switch';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { toast } from 'sonner';\nimport { Bell, BellOff, Mail, Smartphone, Plus, Trash2 } from 'lucide-react';\n\ninterface PropertyAlert {\n  id: string;\n  alert_type: string;\n  search_criteria: any;\n  email_enabled: boolean;\n  push_enabled: boolean;\n  is_active: boolean;\n  last_triggered_at: string | null;\n  trigger_count: number;\n}\n\nexport const PropertyAlertsSettings = () => {\n  const { user } = useAuth();\n  const [alerts, setAlerts] = useState<PropertyAlert[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showNewAlertForm, setShowNewAlertForm] = useState(false);\n  \n  // Formulaire nouvelle alerte\n  const [newAlert, setNewAlert] = useState({\n    city: '',\n    property_type: '',\n    min_rent: '',\n    max_rent: '',\n    min_bedrooms: '',\n  });\n\n  useEffect(() => {\n    if (user) {\n      fetchAlerts();\n    }\n  }, [user]);\n\n  const fetchAlerts = async () => {\n    try {\n      const { data, error } = await supabase\n        .from('property_alerts')\n        .select('*')\n        .eq('user_id', user?.id)\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      setAlerts(data || []);\n    } catch (error) {\n      logger.error('Failed to fetch property alerts');\n      toast.error('Erreur lors du chargement des alertes');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const createAlert = async () => {\n    if (!user) return;\n\n    // Validation\n    if (!newAlert.city) {\n      toast.error('Veuillez slectionner une ville');\n      return;\n    }\n\n    try {\n      const { error } = await supabase.from('property_alerts').insert({\n        user_id: user.id,\n        alert_type: 'new_similar',\n        search_criteria: {\n          city: newAlert.city,\n          property_type: newAlert.property_type || null,\n          min_rent: newAlert.min_rent ? parseInt(newAlert.min_rent) : null,\n          max_rent: newAlert.max_rent ? parseInt(newAlert.max_rent) : null,\n          min_bedrooms: newAlert.min_bedrooms ? parseInt(newAlert.min_bedrooms) : null,\n        },\n        email_enabled: true,\n        push_enabled: true,\n        is_active: true,\n      });\n\n      if (error) throw error;\n\n      toast.success('Alerte cre avec succs');\n      setShowNewAlertForm(false);\n      setNewAlert({ city: '', property_type: '', min_rent: '', max_rent: '', min_bedrooms: '' });\n      fetchAlerts();\n    } catch (error) {\n      logger.error('Failed to create property alert');\n      toast.error('Erreur lors de la cration de l\\'alerte');\n    }\n  };\n\n  const toggleAlert = async (alertId: string, field: 'is_active' | 'email_enabled' | 'push_enabled', value: boolean) => {\n    try {\n      const { error } = await supabase\n        .from('property_alerts')\n        .update({ [field]: value })\n        .eq('id', alertId);\n\n      if (error) throw error;\n\n      setAlerts(alerts.map(a => a.id === alertId ? { ...a, [field]: value } : a));\n      toast.success('Prfrences mises  jour');\n    } catch (error) {\n      logger.error('Failed to update property alert', { alertId, field });\n      toast.error('Erreur lors de la mise  jour');\n    }\n  };\n\n  const deleteAlert = async (alertId: string) => {\n    if (!confirm('tes-vous sr de vouloir supprimer cette alerte ?')) return;\n\n    try {\n      const { error } = await supabase\n        .from('property_alerts')\n        .delete()\n        .eq('id', alertId);\n\n      if (error) throw error;\n\n      setAlerts(alerts.filter(a => a.id !== alertId));\n      toast.success('Alerte supprime');\n    } catch (error) {\n      logger.error('Failed to delete property alert', { alertId });\n      toast.error('Erreur lors de la suppression');\n    }\n  };\n\n  const getCriteriaLabel = (criteria: any) => {\n    const parts = [];\n    if (criteria.city) parts.push(criteria.city);\n    if (criteria.property_type) parts.push(criteria.property_type);\n    if (criteria.min_rent || criteria.max_rent) {\n      parts.push(`${criteria.min_rent || 0} - ${criteria.max_rent || ''} FCFA`);\n    }\n    if (criteria.min_bedrooms) parts.push(`${criteria.min_bedrooms}+ chambres`);\n    return parts.join('  ');\n  };\n\n  if (loading) {\n    return <div className=\"flex justify-center p-8\"><div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div></div>;\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Bell className=\"h-5 w-5\" />\n            Mes Alertes Immobilires\n          </CardTitle>\n          <CardDescription>\n            Recevez des notifications quand de nouveaux biens correspondent  vos critres\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          {alerts.length === 0 ? (\n            <div className=\"text-center py-8 text-muted-foreground\">\n              <BellOff className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n              <p>Aucune alerte configure</p>\n              <p className=\"text-sm\">Crez votre premire alerte pour ne manquer aucune opportunit</p>\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              {alerts.map((alert) => (\n                <Card key={alert.id} className=\"border-2\">\n                  <CardContent className=\"p-4\">\n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center gap-2 mb-2\">\n                          <Switch\n                            checked={alert.is_active}\n                            onCheckedChange={(checked) => toggleAlert(alert.id, 'is_active', checked)}\n                          />\n                          <span className=\"font-medium\">{getCriteriaLabel(alert.search_criteria)}</span>\n                        </div>\n                        \n                        {alert.last_triggered_at && (\n                          <p className=\"text-xs text-muted-foreground mb-2\">\n                            Dernire alerte: {new Date(alert.last_triggered_at).toLocaleDateString('fr-FR')} \n                            {alert.trigger_count > 0 && ` (${alert.trigger_count} notifications envoyes)`}\n                          </p>\n                        )}\n                        \n                        <div className=\"flex items-center gap-4 text-sm text-muted-foreground\">\n                          <label className=\"flex items-center gap-2\">\n                            <Mail className=\"h-4 w-4\" />\n                            <Switch\n                              checked={alert.email_enabled}\n                              onCheckedChange={(checked) => toggleAlert(alert.id, 'email_enabled', checked)}\n                              disabled={!alert.is_active}\n                            />\n                            <span>Email</span>\n                          </label>\n                          \n                          <label className=\"flex items-center gap-2\">\n                            <Smartphone className=\"h-4 w-4\" />\n                            <Switch\n                              checked={alert.push_enabled}\n                              onCheckedChange={(checked) => toggleAlert(alert.id, 'push_enabled', checked)}\n                              disabled={!alert.is_active}\n                            />\n                            <span>Push</span>\n                          </label>\n                        </div>\n                      </div>\n                      \n                      <Button\n                        variant=\"ghost\"\n                        size=\"icon\"\n                        onClick={() => deleteAlert(alert.id)}\n                        className=\"text-destructive hover:text-destructive\"\n                      >\n                        <Trash2 className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          )}\n\n          {!showNewAlertForm ? (\n            <Button onClick={() => setShowNewAlertForm(true)} className=\"w-full\" variant=\"outline\">\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Crer une nouvelle alerte\n            </Button>\n          ) : (\n            <Card className=\"border-2 border-primary\">\n              <CardContent className=\"p-4 space-y-4\">\n                <h4 className=\"font-semibold\">Nouvelle alerte</h4>\n                \n                <div className=\"space-y-3\">\n                  <div>\n                    <Label>Ville *</Label>\n                    <Select value={newAlert.city} onValueChange={(value) => setNewAlert({ ...newAlert, city: value })}>\n                      <SelectTrigger>\n                        <SelectValue placeholder=\"Slectionner une ville\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"Abidjan\">Abidjan</SelectItem>\n                        <SelectItem value=\"Yamoussoukro\">Yamoussoukro</SelectItem>\n                        <SelectItem value=\"Bouak\">Bouak</SelectItem>\n                        <SelectItem value=\"San-Pdro\">San-Pdro</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                  \n                  <div>\n                    <Label>Type de bien</Label>\n                    <Select value={newAlert.property_type} onValueChange={(value) => setNewAlert({ ...newAlert, property_type: value })}>\n                      <SelectTrigger>\n                        <SelectValue placeholder=\"Tous les types\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"appartement\">Appartement</SelectItem>\n                        <SelectItem value=\"maison\">Maison</SelectItem>\n                        <SelectItem value=\"studio\">Studio</SelectItem>\n                        <SelectItem value=\"villa\">Villa</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                  \n                  <div className=\"grid grid-cols-2 gap-3\">\n                    <div>\n                      <Label>Loyer minimum</Label>\n                      <Input\n                        type=\"number\"\n                        placeholder=\"Ex: 50000\"\n                        value={newAlert.min_rent}\n                        onChange={(e) => setNewAlert({ ...newAlert, min_rent: e.target.value })}\n                      />\n                    </div>\n                    <div>\n                      <Label>Loyer maximum</Label>\n                      <Input\n                        type=\"number\"\n                        placeholder=\"Ex: 200000\"\n                        value={newAlert.max_rent}\n                        onChange={(e) => setNewAlert({ ...newAlert, max_rent: e.target.value })}\n                      />\n                    </div>\n                  </div>\n                  \n                  <div>\n                    <Label>Chambres minimum</Label>\n                    <Input\n                      type=\"number\"\n                      placeholder=\"Ex: 2\"\n                      value={newAlert.min_bedrooms}\n                      onChange={(e) => setNewAlert({ ...newAlert, min_bedrooms: e.target.value })}\n                    />\n                  </div>\n                </div>\n                \n                <div className=\"flex gap-2\">\n                  <Button onClick={createAlert} className=\"flex-1\">\n                    Crer l'alerte\n                  </Button>\n                  <Button onClick={() => setShowNewAlertForm(false)} variant=\"outline\">\n                    Annuler\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n};\n","import { useState, useEffect } from 'react';\nimport { useAuth } from '@/hooks/useAuth';\nimport { supabase } from '@/lib/supabase';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Badge } from '@/components/ui/badge';\nimport { Switch } from '@/components/ui/switch';\nimport { toast } from '@/hooks/use-toast';\nimport Navbar from '@/components/Navbar';\nimport Footer from '@/components/Footer';\nimport { DynamicBreadcrumb } from '@/components/navigation/DynamicBreadcrumb';\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\nimport { Shield, CheckCircle2, XCircle, Award, Settings, Home, MapPin, DollarSign, Bed, Bath } from 'lucide-react';\nimport { TenantScoreBadge } from '@/components/ui/tenant-score-badge';\nimport { TenantScoreExplanation } from '@/components/verification/TenantScoreExplanation';\nimport NotificationPreferences from '@/components/notifications/NotificationPreferences';\nimport { PreferencesModal } from '@/components/recommendations/PreferencesModal';\nimport { TwoFactorSetup } from '@/components/auth/TwoFactorSetup';\nimport { RoleSelectorFull } from '@/components/profile/RoleSelectorFull';\nimport { PropertyAlertsSettings } from '@/components/settings/PropertyAlertsSettings';\nimport { logger } from '@/services/logger';\n\nconst Profile = () => {\n  const { user, profile, refreshProfile, hasRole } = useAuth();\n  const [loading, setLoading] = useState(false);\n  const [tenantScore, setTenantScore] = useState<number | null>(null);\n  const [preferencesModalOpen, setPreferencesModalOpen] = useState(false);\n  const [preferences, setPreferences] = useState<any>(null);\n  const [matchingPropertiesCount, setMatchingPropertiesCount] = useState(0);\n  const [notifyNewMatches, setNotifyNewMatches] = useState(false);\n  \n  const [fullName, setFullName] = useState('');\n  const [phone, setPhone] = useState('');\n  const [city, setCity] = useState('');\n  const [bio, setBio] = useState('');\n\n  useEffect(() => {\n    if (profile) {\n      setFullName(profile.full_name || '');\n      setPhone(profile.phone || '');\n      setCity(profile.city || '');\n      setBio(profile.bio || '');\n      \n      // Fetch tenant score and preferences\n      const fetchData = async () => {\n        const { data: scoreData } = await supabase\n          .from('user_verifications')\n          .select('tenant_score')\n          .eq('user_id', profile.id)\n          .maybeSingle();\n        \n        if (scoreData?.tenant_score) {\n          setTenantScore(scoreData.tenant_score);\n        }\n\n        // Fetch user preferences\n        const { data: prefsData } = await supabase\n          .from('user_preferences')\n          .select('*')\n          .eq('user_id', profile.id)\n          .maybeSingle();\n\n        if (prefsData) {\n          setPreferences(prefsData);\n\n          // Count matching properties\n          let query = supabase.from('properties').select('id', { count: 'exact', head: true });\n\n          if (prefsData.preferred_cities?.length > 0) {\n            query = query.in('city', prefsData.preferred_cities);\n          }\n          if (prefsData.min_budget) {\n            query = query.gte('monthly_rent', prefsData.min_budget);\n          }\n          if (prefsData.max_budget) {\n            query = query.lte('monthly_rent', prefsData.max_budget);\n          }\n\n          const { count } = await query;\n          setMatchingPropertiesCount(count || 0);\n        }\n\n        // Check notification preferences\n        const { data: notifPrefs } = await supabase\n          .from('notification_preferences')\n          .select('enabled')\n          .eq('user_id', profile.id)\n          .eq('category', 'recommendations')\n          .maybeSingle();\n\n        setNotifyNewMatches(notifPrefs?.enabled || false);\n      };\n      \n      fetchData();\n    }\n  }, [profile]);\n\n  const handleNotificationToggle = async (enabled: boolean) => {\n    if (!user) return;\n\n    try {\n      const { error } = await supabase\n        .from('notification_preferences')\n        .upsert({\n          user_id: user.id,\n          category: 'recommendations',\n          enabled,\n          email_enabled: enabled,\n          push_enabled: enabled,\n        });\n\n      if (error) throw error;\n\n      setNotifyNewMatches(enabled);\n      toast({\n        title: 'Prfrences mises  jour',\n        description: enabled \n          ? 'Vous serez notifi des nouvelles recommandations'\n          : 'Les notifications de recommandations sont dsactives',\n      });\n    } catch (error) {\n      logger.logError(error, { context: 'Profile', action: 'updateNotificationPreferences' });\n      toast({\n        title: 'Erreur',\n        description: 'Impossible de mettre  jour les prfrences',\n        variant: 'destructive',\n      });\n    }\n  };\n\n  const handleUpdateProfile = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n\n    const { error } = await supabase\n      .from('profiles')\n      .update({\n        full_name: fullName,\n        phone,\n        city,\n        bio,\n      })\n      .eq('id', user!.id);\n\n    setLoading(false);\n\n    if (error) {\n      toast({\n        title: 'Erreur',\n        description: error.message,\n        variant: 'destructive',\n      });\n    } else {\n      toast({\n        title: 'Profil mis  jour',\n        description: 'Vos informations ont t enregistres.',\n      });\n      refreshProfile();\n    }\n  };\n\n  if (!profile) {\n    return null;\n  }\n\n  const userTypeLabels = {\n    locataire: ' Locataire',\n    proprietaire: ' Propritaire',\n    agence: ' Agence',\n    admin_ansut: ' Admin ANSUT',\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <Navbar />\n      \n      <main className=\"flex-1 container mx-auto px-4 py-8 pt-24\">\n        <div className=\"max-w-4xl mx-auto space-y-6\">\n          <DynamicBreadcrumb />\n          {/* Header */}\n          <div className=\"flex items-center gap-4\">\n            <Avatar className=\"h-20 w-20\">\n              <AvatarImage src={profile.avatar_url || ''} />\n              <AvatarFallback className=\"text-2xl\">\n                {fullName.charAt(0).toUpperCase()}\n              </AvatarFallback>\n            </Avatar>\n            <div>\n              <h1 className=\"text-3xl font-bold\">{fullName}</h1>\n              <p className=\"text-muted-foreground\">{userTypeLabels[profile.user_type]}</p>\n            </div>\n          </div>\n\n          <Tabs defaultValue=\"profile\" className=\"w-full\">\n            <TabsList className=\"grid w-full grid-cols-3\">\n              <TabsTrigger value=\"profile\">Profil</TabsTrigger>\n              <TabsTrigger value=\"preferences\">Prfrences de recherche</TabsTrigger>\n              <TabsTrigger value=\"alerts\">Alertes</TabsTrigger>\n            </TabsList>\n\n            <TabsContent value=\"profile\" className=\"space-y-6 mt-6\">\n\n          {/* Tenant Score */}\n          {tenantScore && tenantScore > 0 && (\n            <Card className=\"border-primary/20 bg-gradient-to-br from-primary/5 to-transparent\">\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Award className=\"h-5 w-5 text-primary\" />\n                  Score de Fiabilit\n                </CardTitle>\n                <CardDescription>\n                  Votre valuation en tant que locataire\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-sm text-muted-foreground mb-2\">\n                      Ce score est calcul automatiquement selon vos vrifications et votre profil\n                    </p>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <TenantScoreBadge score={tenantScore} size=\"lg\" />\n                    <TenantScoreExplanation\n                      currentScore={tenantScore}\n                      oneciVerified={profile.oneci_verified}\n                      faceVerified={profile.face_verified}\n                    />\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          {/* Role Management */}\n          <RoleSelectorFull />\n\n          {/* Verification Status */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Shield className=\"h-5 w-5\" />\n                Statut de vrification\n              </CardTitle>\n              <CardDescription>\n                Vrifiez votre identit pour amliorer votre score\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-sm\">Vrification ONECI (Identit)</span>\n                {profile.oneci_verified ? (\n                  <div className=\"flex items-center gap-1 text-green-600\">\n                    <CheckCircle2 className=\"h-4 w-4\" />\n                    <span className=\"text-sm font-medium\">Vrifi</span>\n                  </div>\n                ) : (\n                  <div className=\"flex items-center gap-1 text-muted-foreground\">\n                    <XCircle className=\"h-4 w-4\" />\n                    <span className=\"text-sm\">Non vrifi</span>\n                  </div>\n                )}\n              </div>\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-sm\">Vrification CNAM (Emploi)</span>\n                {profile.cnam_verified ? (\n                  <div className=\"flex items-center gap-1 text-green-600\">\n                    <CheckCircle2 className=\"h-4 w-4\" />\n                    <span className=\"text-sm font-medium\">Vrifi</span>\n                  </div>\n                ) : (\n                  <div className=\"flex items-center gap-1 text-muted-foreground\">\n                    <XCircle className=\"h-4 w-4\" />\n                    <span className=\"text-sm\">Non vrifi</span>\n                  </div>\n                )}\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Edit Profile */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Informations personnelles</CardTitle>\n              <CardDescription>Mettez  jour vos informations</CardDescription>\n            </CardHeader>\n            <CardContent>\n              <form onSubmit={handleUpdateProfile} className=\"space-y-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"fullname\">Nom complet</Label>\n                  <Input\n                    id=\"fullname\"\n                    value={fullName}\n                    onChange={(e) => setFullName(e.target.value)}\n                    required\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"phone\">Tlphone</Label>\n                  <Input\n                    id=\"phone\"\n                    type=\"tel\"\n                    placeholder=\"+225 07 XX XX XX XX\"\n                    value={phone}\n                    onChange={(e) => setPhone(e.target.value)}\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"city\">Ville</Label>\n                  <Input\n                    id=\"city\"\n                    placeholder=\"Ex: Abidjan, Yamoussoukro\"\n                    value={city}\n                    onChange={(e) => setCity(e.target.value)}\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"bio\">Biographie</Label>\n                  <Textarea\n                    id=\"bio\"\n                    placeholder=\"Parlez-nous de vous...\"\n                    value={bio}\n                    onChange={(e) => setBio(e.target.value)}\n                    rows={4}\n                  />\n                </div>\n                <Button type=\"submit\" disabled={loading}>\n                  {loading ? 'Enregistrement...' : 'Enregistrer les modifications'}\n                </Button>\n              </form>\n            </CardContent>\n          </Card>\n\n              {/* Notification Preferences */}\n              <NotificationPreferences />\n\n              {/* 2FA for Admins */}\n              {hasRole('admin') && (\n                <div className=\"mt-6\">\n                  <TwoFactorSetup />\n                </div>\n              )}\n            </TabsContent>\n\n            <TabsContent value=\"preferences\" className=\"space-y-6 mt-6\">\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Settings className=\"h-5 w-5\" />\n                    Mes Prfrences de recherche\n                  </CardTitle>\n                  <CardDescription>\n                    Configurez vos critres pour recevoir des recommandations personnalises\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-6\">\n                  {preferences ? (\n                    <>\n                      {/* Current preferences display */}\n                      <div className=\"space-y-4\">\n                        {preferences.preferred_cities && preferences.preferred_cities.length > 0 && (\n                          <div>\n                            <div className=\"flex items-center gap-2 text-sm font-medium mb-2\">\n                              <MapPin className=\"h-4 w-4 text-primary\" />\n                              Villes prfres\n                            </div>\n                            <div className=\"flex flex-wrap gap-2\">\n                              {preferences.preferred_cities.map((city: string) => (\n                                <Badge key={city} variant=\"secondary\">{city}</Badge>\n                              ))}\n                            </div>\n                          </div>\n                        )}\n\n                        {preferences.preferred_property_types && preferences.preferred_property_types.length > 0 && (\n                          <div>\n                            <div className=\"flex items-center gap-2 text-sm font-medium mb-2\">\n                              <Home className=\"h-4 w-4 text-primary\" />\n                              Types de biens\n                            </div>\n                            <div className=\"flex flex-wrap gap-2\">\n                              {preferences.preferred_property_types.map((type: string) => (\n                                <Badge key={type} variant=\"secondary\">{type}</Badge>\n                              ))}\n                            </div>\n                          </div>\n                        )}\n\n                        {(preferences.min_budget || preferences.max_budget) && (\n                          <div>\n                            <div className=\"flex items-center gap-2 text-sm font-medium mb-2\">\n                              <DollarSign className=\"h-4 w-4 text-primary\" />\n                              Budget\n                            </div>\n                            <Badge variant=\"secondary\">\n                              {preferences.min_budget?.toLocaleString() || '0'} - {preferences.max_budget?.toLocaleString() || ''} FCFA/mois\n                            </Badge>\n                          </div>\n                        )}\n\n                        {(preferences.min_bedrooms > 0 || preferences.min_bathrooms > 0) && (\n                          <div className=\"flex gap-4\">\n                            {preferences.min_bedrooms > 0 && (\n                              <div>\n                                <div className=\"flex items-center gap-2 text-sm font-medium mb-2\">\n                                  <Bed className=\"h-4 w-4 text-primary\" />\n                                  Chambres min.\n                                </div>\n                                <Badge variant=\"secondary\">{preferences.min_bedrooms}+</Badge>\n                              </div>\n                            )}\n                            {preferences.min_bathrooms > 0 && (\n                              <div>\n                                <div className=\"flex items-center gap-2 text-sm font-medium mb-2\">\n                                  <Bath className=\"h-4 w-4 text-primary\" />\n                                  Salles de bain min.\n                                </div>\n                                <Badge variant=\"secondary\">{preferences.min_bathrooms}+</Badge>\n                              </div>\n                            )}\n                          </div>\n                        )}\n\n                        <div className=\"flex flex-wrap gap-2\">\n                          {preferences.requires_parking && <Badge variant=\"outline\">Parking requis</Badge>}\n                          {preferences.requires_garden && <Badge variant=\"outline\">Jardin requis</Badge>}\n                          {preferences.requires_ac && <Badge variant=\"outline\">Climatisation requise</Badge>}\n                          {preferences.requires_furnished && <Badge variant=\"outline\">Meubl requis</Badge>}\n                        </div>\n                      </div>\n\n                      {/* Stats */}\n                      <div className=\"p-4 bg-primary/5 rounded-lg border border-primary/10\">\n                        <div className=\"flex items-center justify-between\">\n                          <div>\n                            <p className=\"text-sm text-muted-foreground\">Biens correspondants actuellement</p>\n                            <p className=\"text-2xl font-bold text-primary\">{matchingPropertiesCount}</p>\n                          </div>\n                          <Home className=\"h-12 w-12 text-primary/20\" />\n                        </div>\n                      </div>\n\n                      {/* Notification toggle */}\n                      <div className=\"flex items-center justify-between p-4 border rounded-lg\">\n                        <div className=\"flex-1\">\n                          <p className=\"font-medium\">Notifications pour nouvelles recommandations</p>\n                          <p className=\"text-sm text-muted-foreground\">\n                            Recevez une notification quotidienne quand de nouveaux biens matchent vos critres\n                          </p>\n                        </div>\n                        <Switch\n                          checked={notifyNewMatches}\n                          onCheckedChange={handleNotificationToggle}\n                        />\n                      </div>\n\n                      <Button \n                        onClick={() => setPreferencesModalOpen(true)}\n                        className=\"w-full\"\n                      >\n                        <Settings className=\"h-4 w-4 mr-2\" />\n                        Modifier mes prfrences\n                      </Button>\n                    </>\n                  ) : (\n                    <div className=\"text-center py-8\">\n                      <Home className=\"h-16 w-16 mx-auto text-muted-foreground mb-4 opacity-50\" />\n                      <p className=\"text-muted-foreground mb-4\">\n                        Vous n'avez pas encore configur vos prfrences de recherche\n                      </p>\n                      <Button onClick={() => setPreferencesModalOpen(true)}>\n                        <Settings className=\"h-4 w-4 mr-2\" />\n                        Configurer mes prfrences\n                      </Button>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            <TabsContent value=\"alerts\" className=\"space-y-6 mt-6\">\n              <PropertyAlertsSettings />\n            </TabsContent>\n          </Tabs>\n        </div>\n      </main>\n\n      <PreferencesModal \n        open={preferencesModalOpen}\n        onOpenChange={setPreferencesModalOpen}\n      />\n\n      <Footer />\n    </div>\n  );\n};\n\nexport default Profile;\n","import { useState, useEffect } from 'react';\nimport { supabase } from '@/lib/supabase';\nimport Navbar from '@/components/Navbar';\nimport Footer from '@/components/Footer';\nimport { Card } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Heart } from 'lucide-react';\nimport { useFavorites } from '@/hooks/useFavorites';\nimport { Link } from 'react-router-dom';\nimport { DynamicBreadcrumb } from '@/components/navigation/DynamicBreadcrumb';\nimport { PropertyCard } from '@/components/properties/PropertyCard';\nimport { Property } from '@/types';\nimport { logger } from '@/services/logger';\n\nconst Favorites = () => {\n  const { favorites, toggleFavorite, loading: favoritesLoading } = useFavorites();\n  const [properties, setProperties] = useState<Property[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (favorites.length > 0) {\n      fetchFavoriteProperties();\n    } else {\n      setProperties([]);\n      setLoading(false);\n    }\n  }, [favorites]);\n\n  const fetchFavoriteProperties = async () => {\n    try {\n      const { data, error } = await supabase\n        .from('properties')\n        .select('*')\n        .in('id', favorites);\n\n      if (error) throw error;\n      setProperties(data || []);\n    } catch (error) {\n      logger.logError(error, { context: 'Favorites', action: 'fetchFavoriteProperties' });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading || favoritesLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-gradient-to-br from-background via-background to-primary/5\">\n      <Navbar />\n      <main className=\"flex-1 container mx-auto px-4 py-6 pt-24\">\n        <div className=\"max-w-7xl mx-auto\">\n          <DynamicBreadcrumb />\n          <div className=\"mb-10\">\n            <h1 className=\"text-4xl font-bold mb-3 flex items-center gap-3\">\n              <Heart className=\"h-8 w-8 text-primary fill-primary\" />\n              Mes Favoris\n            </h1>\n            <p className=\"text-lg text-muted-foreground\">\n              {properties.length} bien{properties.length > 1 ? 's' : ''} sauvegard{properties.length > 1 ? 's' : ''}\n            </p>\n          </div>\n\n          {properties.length === 0 ? (\n            <Card className=\"p-16 text-center border-2 shadow-xl bg-gradient-to-br from-background to-muted/20\">\n              <div className=\"p-6 rounded-full bg-primary/10 w-fit mx-auto mb-6\">\n                <Heart className=\"h-20 w-20 text-primary\" />\n              </div>\n              <h3 className=\"text-2xl font-bold mb-3\">Aucun favori pour le moment</h3>\n              <p className=\"text-muted-foreground mb-6 text-lg max-w-md mx-auto\">\n                Commencez  explorer nos biens et ajoutez vos coups de cur  vos favoris\n              </p>\n              <Button asChild size=\"lg\" className=\"rounded-xl h-14 px-8 text-base font-semibold shadow-lg\">\n                <Link to=\"/recherche\"> Parcourir les biens</Link>\n              </Button>\n            </Card>\n          ) : (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {properties.map(property => (\n                <PropertyCard\n                  key={property.id}\n                  property={property}\n                  onFavoriteClick={() => toggleFavorite(property.id)}\n                  isFavorite={true}\n                  showRemoveButton\n                />\n              ))}\n            </div>\n          )}\n        </div>\n      </main>\n      <Footer />\n    </div>\n  );\n};\n\nexport default Favorites;\n","import { useEffect, useState } from 'react';\nimport { useAuth } from '@/hooks/useAuth';\nimport { supabase } from '@/lib/supabase';\nimport { logger } from '@/services/logger';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { CheckCircle2, Clock, XCircle, AlertCircle } from 'lucide-react';\nimport { TenantScoreBadge } from '@/components/ui/tenant-score-badge';\nimport { TenantScoreExplanation } from './TenantScoreExplanation';\n\ninterface VerificationData {\n  oneci_status: string;\n  cnam_status: string;\n  oneci_verified: boolean;\n  cnam_verified: boolean;\n  face_verified: boolean;\n  face_verification_status: string;\n  tenant_score: number;\n  admin_review_notes: string;\n  admin_reviewed_at: string;\n}\n\nconst VerificationStatus = () => {\n  const { user } = useAuth();\n  const [verification, setVerification] = useState<VerificationData | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchVerification = async () => {\n      if (!user) {\n        logger.info('VerificationStatus - No user yet');\n        return;\n      }\n\n      logger.info('VerificationStatus - Fetching verification', { userId: user.id });\n\n      const { data, error } = await supabase.rpc('get_my_verification_status');\n\n      if (error) {\n        logger.error('VerificationStatus - Error fetching verification', { error, userId: user.id });\n      } else {\n        logger.info('VerificationStatus - Verification data fetched', { hasData: !!data, userId: user.id });\n        // RPC returns an array, take first element\n        setVerification(data && data.length > 0 ? data[0] : null);\n      }\n      setLoading(false);\n    };\n\n    fetchVerification();\n  }, [user]);\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center py-4\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\n      </div>\n    );\n  }\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case 'verified':\n        return <CheckCircle2 className=\"h-5 w-5 text-green-600\" />;\n      case 'pending':\n        return <Clock className=\"h-5 w-5 text-yellow-600\" />;\n      case 'rejected':\n        return <XCircle className=\"h-5 w-5 text-red-600\" />;\n      default:\n        return <AlertCircle className=\"h-5 w-5 text-muted-foreground\" />;\n    }\n  };\n\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case 'verified':\n        return <Badge className=\"bg-green-600\">Vrifi</Badge>;\n      case 'pending':\n        return <Badge className=\"bg-yellow-600\">En attente</Badge>;\n      case 'pending_review':\n        return <Badge className=\"bg-blue-600\">En cours de validation</Badge>;\n      case 'rejected':\n        return <Badge className=\"bg-red-600\">Rejet</Badge>;\n      default:\n        return <Badge variant=\"outline\">Non soumis</Badge>;\n    }\n  };\n\n  return (\n    <Card>\n      <CardContent className=\"pt-6\">\n        <div className=\"space-y-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-3\">\n              {getStatusIcon(verification?.oneci_status || 'pending')}\n              <div>\n                <h3 className=\"font-semibold\">Vrification ONECI</h3>\n                <p className=\"text-sm text-muted-foreground\">Carte Nationale d'Identit</p>\n              </div>\n            </div>\n            {getStatusBadge(verification?.oneci_status || 'pending')}\n          </div>\n\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-3\">\n              {getStatusIcon(verification?.face_verification_status || 'pending')}\n              <div>\n                <h3 className=\"font-semibold\">Vrification Faciale</h3>\n                <p className=\"text-sm text-muted-foreground\">Vrification biomtrique</p>\n              </div>\n            </div>\n            {getStatusBadge(verification?.face_verification_status || 'pending')}\n          </div>\n\n          {verification?.tenant_score !== undefined && verification.tenant_score > 0 && (\n            <div className=\"mt-6 pt-4 border-t\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <h3 className=\"font-semibold\">Score de Fiabilit</h3>\n                  <p className=\"text-sm text-muted-foreground\">valuation automatique</p>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <TenantScoreBadge score={verification.tenant_score} size=\"lg\" />\n                  <TenantScoreExplanation\n                    currentScore={verification.tenant_score}\n                    oneciVerified={verification.oneci_verified}\n                    faceVerified={verification.face_verified}\n                  />\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default VerificationStatus;\n","import { useState, useRef, useCallback } from 'react';\nimport { Camera, Upload, CheckCircle, XCircle, AlertCircle } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { logger } from '@/services/logger';\nimport { supabase } from '@/lib/supabase';\nimport { toast } from 'sonner';\n\n// Simple progress bar component to replace @radix-ui/react-progress\nconst SimpleProgress = ({ value, className }: { value: number; className?: string }) => (\n  <div className={`relative h-2 w-full overflow-hidden rounded-full bg-secondary ${className}`}>\n    <div \n      className=\"h-full bg-primary transition-all duration-300\"\n      style={{ width: `${Math.min(100, Math.max(0, value))}%` }}\n    />\n  </div>\n);\n\ninterface FaceVerificationProps {\n  onSuccess?: () => void;\n  onSkip?: () => void;\n}\n\nconst FaceVerification = ({ onSuccess, onSkip }: FaceVerificationProps) => {\n  const [cniImage, setCniImage] = useState<string | null>(null);\n  const [selfieImage, setSelfieImage] = useState<string | null>(null);\n  const [isCapturing, setIsCapturing] = useState(false);\n  const [isVerifying, setIsVerifying] = useState(false);\n  const [verificationResult, setVerificationResult] = useState<{\n    verified: boolean;\n    similarityScore: string;\n    message: string;\n    canRetry: boolean;\n  } | null>(null);\n  \n  const videoRef = useRef<HTMLVideoElement>(null);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const streamRef = useRef<MediaStream | null>(null);\n\n  const startCamera = async () => {\n    try {\n      logger.info('Starting camera...');\n      \n      // Vrifier si mediaDevices est disponible\n      if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n        throw new Error('L\\'API MediaDevices n\\'est pas supporte par ce navigateur');\n      }\n\n      const stream = await navigator.mediaDevices.getUserMedia({ \n        video: { \n          facingMode: 'user',\n          width: { ideal: 1280 },\n          height: { ideal: 720 }\n        } \n      });\n      \n      logger.info('Camera stream obtained successfully');\n      \n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n        streamRef.current = stream;\n        setIsCapturing(true);\n        logger.info('Camera activated successfully');\n      }\n    } catch (error) {\n      logger.error('Error accessing camera', { error });\n      \n      let errorMessage = 'Impossible d\\'accder  la camra';\n      if (error instanceof Error) {\n        if (error.name === 'NotAllowedError') {\n          errorMessage = 'Autorisation camra refuse. Vrifiez les paramtres de votre navigateur.';\n        } else if (error.name === 'NotFoundError') {\n          errorMessage = 'Aucune camra trouve sur cet appareil';\n        } else if (error.name === 'NotReadableError') {\n          errorMessage = 'La camra est dj utilise par une autre application';\n        }\n      }\n      \n      toast.error(errorMessage);\n    }\n  };\n\n  const stopCamera = useCallback(() => {\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach(track => track.stop());\n      streamRef.current = null;\n    }\n    setIsCapturing(false);\n  }, []);\n\n  const captureSelfie = () => {\n    if (videoRef.current && canvasRef.current) {\n      const video = videoRef.current;\n      const canvas = canvasRef.current;\n      \n      canvas.width = video.videoWidth;\n      canvas.height = video.videoHeight;\n      \n      const ctx = canvas.getContext('2d');\n      if (ctx) {\n        ctx.drawImage(video, 0, 0);\n        const imageData = canvas.toDataURL('image/jpeg', 0.8);\n        setSelfieImage(imageData);\n        stopCamera();\n        toast.success('Selfie captur !');\n      }\n    }\n  };\n\n  const handleCniUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setCniImage(reader.result as string);\n        toast.success('Photo de CNI charge !');\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleVerify = async () => {\n    if (!cniImage || !selfieImage) {\n      toast.error('Veuillez fournir les deux images');\n      return;\n    }\n\n    setIsVerifying(true);\n    setVerificationResult(null);\n\n    try {\n      const { data, error } = await supabase.functions.invoke('smile-id-verification', {\n        body: {\n          cniImageBase64: cniImage,\n          selfieBase64: selfieImage,\n        },\n      });\n\n      if (error) throw error;\n\n      setVerificationResult(data);\n\n      if (data.verified) {\n        toast.success('Vrification Smile ID russie !', {\n          description: `Score : ${data.similarityScore}% | Liveness : ${data.livenessCheck ? '' : ''} | Match : ${data.selfieToIdMatch ? '' : ''}`\n        });\n        onSuccess?.();\n      } else {\n        toast.error('Vrification choue', {\n          description: data.message || data.resultText\n        });\n      }\n    } catch (error) {\n      logger.error('Smile ID verification error', { error });\n      toast.error('Erreur lors de la vrification', {\n        description: error instanceof Error ? error.message : 'Une erreur est survenue'\n      });\n    } finally {\n      setIsVerifying(false);\n    }\n  };\n\n  const reset = () => {\n    setCniImage(null);\n    setSelfieImage(null);\n    setVerificationResult(null);\n    stopCamera();\n  };\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <Camera className=\"h-5 w-5\" />\n          Vrification Faciale (Optionnel)\n        </CardTitle>\n            <CardDescription>\n              Vrification biomtrique scurise propulse par Smile ID\n            </CardDescription>\n      </CardHeader>\n      <CardContent className=\"space-y-6\">\n        <Alert>\n          <AlertCircle className=\"h-4 w-4\" />\n          <AlertDescription>\n            <strong>Instructions importantes :</strong>\n            <ul className=\"mt-2 space-y-1 text-sm list-disc list-inside\">\n              <li>Assurez-vous d'avoir un bon clairage</li>\n              <li>Regardez directement la camra</li>\n              <li>Retirez lunettes, masque ou chapeau</li>\n              <li>Gardez une expression neutre</li>\n            </ul>\n          </AlertDescription>\n        </Alert>\n\n        <div className=\"grid md:grid-cols-2 gap-4\">\n          {/* CNI Image Upload */}\n          <div className=\"space-y-3\">\n            <label className=\"text-sm font-medium\">Photo de votre CNI</label>\n            {cniImage ? (\n              <div className=\"relative\">\n                <img \n                  src={cniImage} \n                  alt=\"CNI\" \n                  className=\"w-full h-48 object-cover rounded-lg border-2 border-primary\"\n                />\n                <Button\n                  size=\"sm\"\n                  variant=\"destructive\"\n                  className=\"absolute top-2 right-2\"\n                  onClick={() => setCniImage(null)}\n                >\n                  Retirer\n                </Button>\n              </div>\n            ) : (\n              <label className=\"flex flex-col items-center justify-center h-48 border-2 border-dashed rounded-lg cursor-pointer hover:border-primary transition-colors\">\n                <Upload className=\"h-8 w-8 mb-2 text-muted-foreground\" />\n                <span className=\"text-sm text-muted-foreground\">Cliquez pour charger</span>\n                <input\n                  type=\"file\"\n                  accept=\"image/*\"\n                  className=\"hidden\"\n                  onChange={handleCniUpload}\n                />\n              </label>\n            )}\n          </div>\n\n          {/* Selfie Capture */}\n          <div className=\"space-y-3\">\n            <label className=\"text-sm font-medium\">Votre selfie</label>\n            {selfieImage ? (\n              <div className=\"relative\">\n                <img \n                  src={selfieImage} \n                  alt=\"Selfie\" \n                  className=\"w-full h-48 object-cover rounded-lg border-2 border-primary\"\n                />\n                <Button\n                  size=\"sm\"\n                  variant=\"destructive\"\n                  className=\"absolute top-2 right-2\"\n                  onClick={() => setSelfieImage(null)}\n                >\n                  Retirer\n                </Button>\n              </div>\n            ) : isCapturing ? (\n              <div className=\"space-y-2\">\n                <video\n                  ref={videoRef}\n                  autoPlay\n                  playsInline\n                  className=\"w-full h-48 object-cover rounded-lg border-2 border-primary\"\n                />\n                <div className=\"flex gap-2\">\n                  <Button onClick={captureSelfie} className=\"flex-1\">\n                    Capturer\n                  </Button>\n                  <Button onClick={stopCamera} variant=\"outline\">\n                    Annuler\n                  </Button>\n                </div>\n              </div>\n            ) : (\n              <Button\n                onClick={startCamera}\n                className=\"w-full h-48 flex flex-col gap-2\"\n                variant=\"outline\"\n              >\n                <Camera className=\"h-8 w-8\" />\n                Ouvrir la camra\n              </Button>\n            )}\n          </div>\n        </div>\n\n        <canvas ref={canvasRef} className=\"hidden\" />\n\n        {verificationResult && (\n          <Alert variant={verificationResult.verified ? \"default\" : \"destructive\"}>\n            {verificationResult.verified ? (\n              <CheckCircle className=\"h-4 w-4\" />\n            ) : (\n              <XCircle className=\"h-4 w-4\" />\n            )}\n            <AlertDescription>\n              <div className=\"space-y-2\">\n                <p className=\"font-medium\">{verificationResult.message}</p>\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-sm\">Score de similarit :</span>\n                  <SimpleProgress value={parseFloat(verificationResult.similarityScore)} className=\"flex-1\" />\n                  <span className=\"text-sm font-bold\">{verificationResult.similarityScore}%</span>\n                </div>\n                {!verificationResult.verified && verificationResult.canRetry && (\n                  <p className=\"text-sm\">\n                    Vous pouvez ressayer avec de meilleures conditions.\n                  </p>\n                )}\n              </div>\n            </AlertDescription>\n          </Alert>\n        )}\n\n        <div className=\"flex gap-3\">\n          <Button\n            onClick={handleVerify}\n            disabled={!cniImage || !selfieImage || isVerifying}\n            className=\"flex-1\"\n          >\n            {isVerifying ? 'Vrification en cours...' : 'Vrifier mon visage'}\n          </Button>\n          \n          {onSkip && (\n            <Button onClick={onSkip} variant=\"outline\">\n              Passer cette tape\n            </Button>\n          )}\n          \n          {(cniImage || selfieImage || verificationResult) && (\n            <Button onClick={reset} variant=\"outline\">\n              Recommencer\n            </Button>\n          )}\n        </div>\n\n        <p className=\"text-xs text-muted-foreground text-center\">\n           Vos images ne sont pas stockes. Seul le score de vrification est conserv.\n        </p>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default FaceVerification;\n","import React, { Component, ErrorInfo, ReactNode } from 'react';\nimport * as Sentry from \"@sentry/react\";\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { AlertCircle, Home, RefreshCw } from 'lucide-react';\nimport { logger } from '@/services/logger';\nimport { ERROR_MESSAGES } from '@/constants';\n\ninterface Props {\n  children: ReactNode;\n}\n\ninterface State {\n  hasError: boolean;\n  error: Error | null;\n}\n\nclass ErrorBoundary extends Component<Props, State> {\n  public state: State = {\n    hasError: false,\n    error: null,\n  };\n\n  public static getDerivedStateFromError(error: Error): State {\n    return { hasError: true, error };\n  }\n\n  public componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    logger.logError(error, {\n      componentStack: errorInfo.componentStack,\n      errorBoundary: true,\n    });\n    \n    // Send to Sentry with React context\n    if (import.meta.env.PROD) {\n      Sentry.captureException(error, {\n        contexts: {\n          react: {\n            componentStack: errorInfo.componentStack,\n          },\n        },\n      });\n    }\n  }\n\n  public render() {\n    if (this.state.hasError) {\n      return (\n        <div className=\"min-h-screen flex items-center justify-center p-4\">\n          <Card className=\"max-w-md\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2 text-destructive\">\n                <AlertCircle className=\"h-5 w-5\" />\n                Une erreur s'est produite\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-muted-foreground mb-4\">\n                {ERROR_MESSAGES.SERVER_ERROR}\n              </p>\n              <p className=\"text-sm text-muted-foreground mb-4\">\n                Une erreur inattendue s'est produite. Vous pouvez essayer de recharger la page ou retourner  l'accueil.\n              </p>\n              \n              {import.meta.env.DEV && this.state.error && (\n                <details className=\"mb-4\">\n                  <summary className=\"text-xs cursor-pointer mb-2 text-muted-foreground\">\n                    Dtails techniques (dveloppement)\n                  </summary>\n                  <pre className=\"text-xs bg-muted p-3 rounded overflow-auto max-h-40\">\n                    {this.state.error.toString()}\n                    {this.state.error.stack && `\\n\\n${this.state.error.stack}`}\n                  </pre>\n                </details>\n              )}\n              \n              <div className=\"flex gap-2\">\n                <Button \n                  onClick={() => window.location.reload()}\n                  variant=\"default\"\n                  className=\"gap-2\"\n                >\n                  <RefreshCw className=\"h-4 w-4\" />\n                  Recharger la page\n                </Button>\n                <Button \n                  onClick={() => window.location.href = '/'}\n                  variant=\"outline\"\n                  className=\"gap-2\"\n                >\n                  <Home className=\"h-4 w-4\" />\n                  Retour  l'accueil\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundary;\n","import { useAuth } from '@/hooks/useAuth';\nimport { Navigate } from 'react-router-dom';\nimport Navbar from '@/components/Navbar';\nimport Footer from '@/components/Footer';\nimport { DynamicBreadcrumb } from '@/components/navigation/DynamicBreadcrumb';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport ONECIForm from '@/components/verification/ONECIForm';\nimport VerificationStatus from '@/components/verification/VerificationStatus';\nimport FaceVerification from '@/components/verification/FaceVerification';\nimport PassportVerificationForm from '@/components/verification/PassportVerificationForm';\nimport { Shield } from 'lucide-react';\nimport ErrorBoundary from '@/components/ErrorBoundary';\n\nconst Verification = () => {\n  const { user, profile, loading } = useAuth();\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary\"></div>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return <Navigate to=\"/auth\" replace />;\n  }\n\n  return (\n    <ErrorBoundary>\n      <div className=\"min-h-screen flex flex-col bg-background\" translate=\"no\">\n        <Navbar />\n      \n        <main className=\"flex-grow container mx-auto px-4 py-8 pt-24\">\n          <div className=\"max-w-4xl mx-auto\">\n            <DynamicBreadcrumb />\n            \n            <div className=\"mb-8 text-center\">\n              <div className=\"inline-flex items-center gap-3 mb-4\">\n                <Shield className=\"h-10 w-10 text-secondary\" />\n                <h1 className=\"text-3xl font-bold\">Vrification d'Identit</h1>\n              </div>\n              <p className=\"text-muted-foreground\">\n                Compltez vos vrifications ONECI et Face ID pour augmenter votre crdibilit\n              </p>\n            </div>\n\n            <VerificationStatus />\n\n            <Tabs defaultValue=\"oneci\" className=\"mt-8\">\n              <TabsList className=\"grid w-full grid-cols-2\">\n                <TabsTrigger value=\"oneci\">\n                  ONECI (Ivoiriens)\n                </TabsTrigger>\n                <TabsTrigger value=\"face\">\n                  Vrification Faciale\n                </TabsTrigger>\n              </TabsList>\n\n              <TabsContent value=\"oneci\">\n                <ONECIForm />\n              </TabsContent>\n\n              <TabsContent value=\"face\">\n                <Card>\n                  <CardHeader>\n                    <CardTitle>Vrification Faciale</CardTitle>\n                    <CardDescription>\n                      Renforcez votre profil avec une vrification biomtrique Smile ID\n                    </CardDescription>\n                  </CardHeader>\n                  <CardContent>\n                    <FaceVerification />\n                  </CardContent>\n                </Card>\n              </TabsContent>\n            </Tabs>\n          </div>\n        </main>\n\n        <Footer />\n      </div>\n    </ErrorBoundary>\n  );\n};\n\nexport default Verification;\n","import { useState, useEffect } from 'react';\nimport { supabase } from '@/lib/supabase';\nimport { useAuth } from '@/hooks/useAuth';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { useToast } from '@/hooks/use-toast';\nimport { Mail, MailOpen, AlertTriangle, Ban, ExternalLink, Loader2 } from 'lucide-react';\nimport { formatDistanceToNow } from 'date-fns';\nimport { fr } from 'date-fns/locale';\nimport { logger } from '@/services/logger';\n\ninterface GuestMessage {\n  id: string;\n  property_id: string;\n  guest_name: string;\n  guest_email: string;\n  guest_phone: string | null;\n  message_content: string;\n  status: 'pending' | 'replied' | 'spam' | 'blocked';\n  created_at: string;\n  properties?: {\n    title: string;\n  };\n}\n\nexport const GuestMessagesInbox = () => {\n  const [messages, setMessages] = useState<GuestMessage[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [activeTab, setActiveTab] = useState('pending');\n  const { user } = useAuth();\n  const { toast } = useToast();\n\n  useEffect(() => {\n    if (user) {\n      fetchGuestMessages();\n    }\n  }, [user]);\n\n  const fetchGuestMessages = async () => {\n    try {\n      setLoading(true);\n      const { data, error } = await supabase\n        .from('guest_messages')\n        .select(`\n          *,\n          properties (\n            title\n          )\n        `)\n        .eq('owner_id', user?.id)\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n\n      setMessages((data || []) as GuestMessage[]);\n    } catch (error: any) {\n      logger.logError(error, { context: 'GuestMessagesInbox', action: 'fetch' });\n      toast({\n        title: 'Erreur',\n        description: 'Impossible de charger les messages',\n        variant: 'destructive',\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const updateMessageStatus = async (messageId: string, newStatus: GuestMessage['status']) => {\n    try {\n      const { error } = await supabase\n        .from('guest_messages')\n        .update({ status: newStatus })\n        .eq('id', messageId);\n\n      if (error) throw error;\n\n      // Mettre  jour l'tat local\n      setMessages(prev => \n        prev.map(msg => \n          msg.id === messageId ? { ...msg, status: newStatus } : msg\n        )\n      );\n\n      toast({\n        title: 'Statut mis  jour',\n        description: `Message marqu comme \"${getStatusLabel(newStatus)}\"`,\n      });\n    } catch (error: any) {\n      logger.logError(error, { context: 'GuestMessagesInbox', action: 'updateStatus' });\n      toast({\n        title: 'Erreur',\n        description: 'Impossible de mettre  jour le statut',\n        variant: 'destructive',\n      });\n    }\n  };\n\n  const getStatusLabel = (status: GuestMessage['status']) => {\n    switch (status) {\n      case 'pending': return 'En attente';\n      case 'replied': return 'Rpondu';\n      case 'spam': return 'Spam';\n      case 'blocked': return 'Bloqu';\n      default: return status;\n    }\n  };\n\n  const getStatusBadgeVariant = (status: GuestMessage['status']) => {\n    switch (status) {\n      case 'pending': return 'default';\n      case 'replied': return 'secondary';\n      case 'spam': return 'destructive';\n      case 'blocked': return 'destructive';\n      default: return 'default';\n    }\n  };\n\n  const filteredMessages = messages.filter(msg => {\n    if (activeTab === 'all') return true;\n    return msg.status === activeTab;\n  });\n\n  const getTabCount = (status: string) => {\n    if (status === 'all') return messages.length;\n    return messages.filter(msg => msg.status === status).length;\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center p-8\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h2 className=\"text-2xl font-bold tracking-tight\">Messages des visiteurs</h2>\n        <p className=\"text-muted-foreground\">\n          Grez les messages reus des visiteurs non inscrits\n        </p>\n      </div>\n\n      <Tabs value={activeTab} onValueChange={setActiveTab}>\n        <TabsList>\n          <TabsTrigger value=\"pending\">\n            En attente ({getTabCount('pending')})\n          </TabsTrigger>\n          <TabsTrigger value=\"replied\">\n            Rpondus ({getTabCount('replied')})\n          </TabsTrigger>\n          <TabsTrigger value=\"spam\">\n            Spam ({getTabCount('spam')})\n          </TabsTrigger>\n          <TabsTrigger value=\"all\">\n            Tous ({getTabCount('all')})\n          </TabsTrigger>\n        </TabsList>\n\n        <TabsContent value={activeTab} className=\"space-y-4 mt-6\">\n          {filteredMessages.length === 0 ? (\n            <Card>\n              <CardContent className=\"flex flex-col items-center justify-center py-12\">\n                <Mail className=\"h-12 w-12 text-muted-foreground mb-4\" />\n                <p className=\"text-muted-foreground\">\n                  Aucun message {activeTab !== 'all' && getStatusLabel(activeTab as GuestMessage['status']).toLowerCase()}\n                </p>\n              </CardContent>\n            </Card>\n          ) : (\n            filteredMessages.map((message) => (\n              <Card key={message.id}>\n                <CardHeader>\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"space-y-1\">\n                      <CardTitle className=\"text-lg flex items-center gap-2\">\n                        {message.status === 'pending' ? (\n                          <Mail className=\"h-4 w-4 text-primary\" />\n                        ) : (\n                          <MailOpen className=\"h-4 w-4 text-muted-foreground\" />\n                        )}\n                        {message.guest_name}\n                      </CardTitle>\n                      <CardDescription>\n                        Concernant : {message.properties?.title || 'Proprit supprime'}\n                      </CardDescription>\n                    </div>\n                    <Badge variant={getStatusBadgeVariant(message.status)}>\n                      {getStatusLabel(message.status)}\n                    </Badge>\n                  </div>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"bg-muted/50 rounded-lg p-4\">\n                    <p className=\"text-sm whitespace-pre-wrap\">{message.message_content}</p>\n                  </div>\n\n                  <div className=\"flex flex-col gap-2 text-sm\">\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"text-muted-foreground\">Email :</span>\n                      <a\n                        href={`mailto:${message.guest_email}`}\n                        className=\"text-primary hover:underline flex items-center gap-1\"\n                      >\n                        {message.guest_email}\n                        <ExternalLink className=\"h-3 w-3\" />\n                      </a>\n                    </div>\n                    {message.guest_phone && (\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"text-muted-foreground\">Tlphone :</span>\n                        <a\n                          href={`tel:${message.guest_phone}`}\n                          className=\"text-primary hover:underline\"\n                        >\n                          {message.guest_phone}\n                        </a>\n                      </div>\n                    )}\n                    <div className=\"text-muted-foreground\">\n                      Reu {formatDistanceToNow(new Date(message.created_at), { \n                        addSuffix: true,\n                        locale: fr \n                      })}\n                    </div>\n                  </div>\n\n                  <div className=\"flex gap-2 pt-2\">\n                    {message.status === 'pending' && (\n                      <>\n                        <Button\n                          variant=\"default\"\n                          size=\"sm\"\n                          onClick={() => updateMessageStatus(message.id, 'replied')}\n                        >\n                          <MailOpen className=\"h-4 w-4 mr-2\" />\n                          Marquer comme rpondu\n                        </Button>\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => updateMessageStatus(message.id, 'spam')}\n                        >\n                          <AlertTriangle className=\"h-4 w-4 mr-2\" />\n                          Spam\n                        </Button>\n                      </>\n                    )}\n                    {message.status === 'spam' && (\n                      <Button\n                        variant=\"destructive\"\n                        size=\"sm\"\n                        onClick={() => updateMessageStatus(message.id, 'blocked')}\n                      >\n                        <Ban className=\"h-4 w-4 mr-2\" />\n                        Bloquer cet email\n                      </Button>\n                    )}\n                    {message.status === 'replied' && (\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => updateMessageStatus(message.id, 'pending')}\n                      >\n                        Marquer comme non rpondu\n                      </Button>\n                    )}\n                  </div>\n                </CardContent>\n              </Card>\n            ))\n          )}\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n};\n","import { useLocation, Link, useNavigate } from \"react-router-dom\";\nimport { useEffect, useState } from \"react\";\nimport { Home, Search, ArrowLeft } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport Navbar from \"@/components/Navbar\";\nimport Footer from \"@/components/Footer\";\nimport { logger } from '@/services/logger';\n\nconst NotFound = () => {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const [countdown, setCountdown] = useState(10);\n\n  useEffect(() => {\n    logger.warn('404 Error: User accessed non-existent route', { \n      pathname: location.pathname,\n      referrer: document.referrer \n    });\n  }, [location.pathname]);\n\n  // Auto-redirection aprs 10 secondes\n  useEffect(() => {\n    const timer = setInterval(() => {\n      setCountdown((prev) => {\n        if (prev <= 1) {\n          navigate(\"/\");\n          return 0;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n\n    return () => clearInterval(timer);\n  }, [navigate]);\n\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <Navbar />\n      <main className=\"flex-1 flex items-center justify-center bg-gradient-to-br from-background to-muted pt-16\">\n        <div className=\"container mx-auto px-4 py-10 text-center max-w-2xl\">\n          <div className=\"mb-8\">\n            <h1 className=\"text-9xl font-bold text-primary mb-4\">404</h1>\n            <h2 className=\"text-3xl font-semibold text-foreground mb-3\">\n              Oups ! Page introuvable\n            </h2>\n            <p className=\"text-lg text-muted-foreground mb-2\">\n              La page <span className=\"font-mono text-sm bg-muted px-2 py-1 rounded\">{location.pathname}</span> n'existe pas.\n            </p>\n            <p className=\"text-sm text-muted-foreground\">\n              Redirection automatique dans <span className=\"font-bold text-primary\">{countdown}s</span>\n            </p>\n          </div>\n\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center mb-12\">\n            <Button asChild size=\"lg\" className=\"gap-2\">\n              <Link to=\"/\">\n                <Home className=\"h-5 w-5\" />\n                Retour  l'accueil\n              </Link>\n            </Button>\n            <Button asChild variant=\"outline\" size=\"lg\" className=\"gap-2\">\n              <Link to=\"/recherche\">\n                <Search className=\"h-5 w-5\" />\n                Rechercher un bien\n              </Link>\n            </Button>\n            <Button \n              variant=\"ghost\" \n              size=\"lg\" \n              className=\"gap-2\"\n              onClick={() => navigate(-1)}\n            >\n              <ArrowLeft className=\"h-5 w-5\" />\n              Page prcdente\n            </Button>\n          </div>\n\n          <div className=\"bg-muted/50 border border-border rounded-lg p-6\">\n            <h3 className=\"font-semibold text-foreground mb-3\">Pages populaires :</h3>\n            <div className=\"flex flex-wrap gap-2 justify-center\">\n              <Link to=\"/\" className=\"text-sm text-primary hover:underline\">Accueil</Link>\n              <span className=\"text-muted-foreground\"></span>\n              <Link to=\"/recherche\" className=\"text-sm text-primary hover:underline\">Recherche</Link>\n              <span className=\"text-muted-foreground\"></span>\n              <Link to=\"/certification\" className=\"text-sm text-primary hover:underline\">Certification</Link>\n              <span className=\"text-muted-foreground\"></span>\n              <Link to=\"/auth\" className=\"text-sm text-primary hover:underline\">Connexion</Link>\n            </div>\n          </div>\n        </div>\n      </main>\n      <Footer />\n    </div>\n  );\n};\n\nexport default NotFound;\n","import { Star, Award } from 'lucide-react';\nimport { Badge } from '@/components/ui/badge';\nimport { Card, CardContent } from '@/components/ui/card';\n\ninterface ReputationBadgeProps {\n  score: number;\n  totalReviews: number;\n  size?: 'sm' | 'md' | 'lg';\n  showDetails?: boolean;\n}\n\nexport const ReputationBadge = ({ \n  score, \n  totalReviews, \n  size = 'md',\n  showDetails = false \n}: ReputationBadgeProps) => {\n  const getScoreColor = (score: number) => {\n    if (score >= 4.5) return 'text-green-600';\n    if (score >= 3.5) return 'text-blue-600';\n    if (score >= 2.5) return 'text-yellow-600';\n    return 'text-red-600';\n  };\n\n  const getScoreLabel = (score: number) => {\n    if (score >= 4.5) return 'Excellent';\n    if (score >= 3.5) return 'Trs bien';\n    if (score >= 2.5) return 'Bien';\n    if (score >= 1.5) return 'Moyen';\n    return ' amliorer';\n  };\n\n  const sizeClasses = {\n    sm: 'text-sm',\n    md: 'text-base',\n    lg: 'text-xl',\n  };\n\n  const iconSizes = {\n    sm: 'h-4 w-4',\n    md: 'h-5 w-5',\n    lg: 'h-6 w-6',\n  };\n\n  if (!showDetails) {\n    return (\n      <div className=\"flex items-center gap-1\">\n        <Star className={`${iconSizes[size]} fill-yellow-400 text-yellow-400`} />\n        <span className={`font-semibold ${sizeClasses[size]} ${getScoreColor(score)}`}>\n          {score.toFixed(1)}\n        </span>\n        <span className={`text-muted-foreground ${size === 'sm' ? 'text-xs' : 'text-sm'}`}>\n          ({totalReviews})\n        </span>\n      </div>\n    );\n  }\n\n  return (\n    <Card>\n      <CardContent className=\"p-4\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"p-3 rounded-full bg-primary/10\">\n            <Award className=\"h-6 w-6 text-primary\" />\n          </div>\n          <div className=\"flex-1\">\n            <div className=\"flex items-baseline gap-2\">\n              <span className={`font-bold text-2xl ${getScoreColor(score)}`}>\n                {score.toFixed(1)}\n              </span>\n              <div className=\"flex items-center gap-1\">\n                {[1, 2, 3, 4, 5].map((star) => (\n                  <Star\n                    key={star}\n                    className={`h-4 w-4 ${\n                      star <= Math.round(score)\n                        ? 'fill-yellow-400 text-yellow-400'\n                        : 'text-gray-300'\n                    }`}\n                  />\n                ))}\n              </div>\n            </div>\n            <p className=\"text-sm text-muted-foreground\">\n              {getScoreLabel(score)}  {totalReviews} avis\n            </p>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n","import { useEffect, useState } from 'react';\nimport { supabase } from '@/lib/supabase';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\nimport { Star, MessageSquare } from 'lucide-react';\nimport { formatDistanceToNow } from 'date-fns';\nimport { fr } from 'date-fns/locale';\nimport { Badge } from '@/components/ui/badge';\nimport { logger } from '@/services/logger';\n\ninterface Review {\n  id: string;\n  rating: number;\n  comment: string | null;\n  review_type: string;\n  created_at: string;\n  reviewer: {\n    id: string;\n    full_name: string;\n    avatar_url: string | null;\n  };\n}\n\ninterface ReviewsListProps {\n  userId: string;\n  reviewType?: 'all' | 'as_tenant' | 'as_landlord';\n}\n\nexport const ReviewsList = ({ userId, reviewType = 'all' }: ReviewsListProps) => {\n  const [reviews, setReviews] = useState<Review[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchReviews();\n  }, [userId, reviewType]);\n\n  const fetchReviews = async () => {\n    try {\n      let query = supabase\n        .from('reviews')\n        .select(`\n          id,\n          rating,\n          comment,\n          review_type,\n          created_at,\n          reviewer:reviewer_id (\n            id,\n            full_name,\n            avatar_url\n          )\n        `)\n        .eq('reviewee_id', userId)\n        .order('created_at', { ascending: false });\n\n      if (reviewType === 'as_tenant') {\n        query = query.eq('review_type', 'landlord_to_tenant');\n      } else if (reviewType === 'as_landlord') {\n        query = query.eq('review_type', 'tenant_to_landlord');\n      }\n\n      const { data, error } = await query;\n\n      if (error) throw error;\n\n      // Transform data to match our interface\n      const transformedData = data?.map((review: any) => ({\n        ...review,\n        reviewer: Array.isArray(review.reviewer) ? review.reviewer[0] : review.reviewer,\n      })) || [];\n\n      setReviews(transformedData);\n    } catch (error) {\n      logger.logError(error, { context: 'ReviewsList', action: 'fetch', userId });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <Card>\n        <CardContent className=\"p-8\">\n          <div className=\"flex items-center justify-center\">\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (reviews.length === 0) {\n    return (\n      <Card>\n        <CardContent className=\"p-8 text-center\">\n          <MessageSquare className=\"h-12 w-12 mx-auto mb-3 text-muted-foreground opacity-50\" />\n          <p className=\"text-muted-foreground\">Aucun avis pour le moment</p>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      {reviews.map((review) => (\n        <Card key={review.id}>\n          <CardHeader>\n            <div className=\"flex items-start justify-between\">\n              <div className=\"flex items-center gap-3\">\n                <Avatar>\n                  <AvatarImage src={review.reviewer?.avatar_url || ''} />\n                  <AvatarFallback>\n                    {review.reviewer?.full_name?.charAt(0).toUpperCase() || '?'}\n                  </AvatarFallback>\n                </Avatar>\n                <div>\n                  <p className=\"font-semibold\">{review.reviewer?.full_name || 'Utilisateur'}</p>\n                  <p className=\"text-xs text-muted-foreground\">\n                    {formatDistanceToNow(new Date(review.created_at), {\n                      addSuffix: true,\n                      locale: fr,\n                    })}\n                  </p>\n                </div>\n              </div>\n              <Badge variant=\"outline\">\n                {review.review_type === 'tenant_to_landlord' \n                  ? 'En tant que propritaire' \n                  : 'En tant que locataire'}\n              </Badge>\n            </div>\n          </CardHeader>\n          <CardContent className=\"space-y-3\">\n            <div className=\"flex items-center gap-1\">\n              {[1, 2, 3, 4, 5].map((star) => (\n                <Star\n                  key={star}\n                  className={`h-4 w-4 ${\n                    star <= review.rating\n                      ? 'fill-yellow-400 text-yellow-400'\n                      : 'text-gray-300'\n                  }`}\n                />\n              ))}\n              <span className=\"ml-2 text-sm font-medium\">{review.rating}/5</span>\n            </div>\n            {review.comment && (\n              <p className=\"text-sm text-muted-foreground leading-relaxed\">\n                {review.comment}\n              </p>\n            )}\n          </CardContent>\n        </Card>\n      ))}\n    </div>\n  );\n};\n","import { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { supabase } from '@/lib/supabase';\nimport Navbar from '@/components/Navbar';\nimport Footer from '@/components/Footer';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\nimport { ReputationBadge } from '@/components/reviews/ReputationBadge';\nimport { ReviewsList } from '@/components/reviews/ReviewsList';\nimport { Award, Home, User } from 'lucide-react';\nimport { logger } from '@/services/logger';\n\ninterface UserProfile {\n  id: string;\n  full_name: string;\n  avatar_url: string | null;\n  user_type: string;\n}\n\ninterface ReputationScore {\n  overall_score: number;\n  total_reviews: number;\n  as_tenant_score: number;\n  as_tenant_reviews: number;\n  as_landlord_score: number;\n  as_landlord_reviews: number;\n}\n\nconst UserReviews = () => {\n  const { userId } = useParams<{ userId: string }>();\n  const [profile, setProfile] = useState<UserProfile | null>(null);\n  const [reputation, setReputation] = useState<ReputationScore | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (userId) {\n      fetchUserData();\n    }\n  }, [userId]);\n\n  const fetchUserData = async () => {\n    if (!userId) return;\n\n    try {\n      // Fetch profile\n      const { data: profileData, error: profileError } = await supabase\n        .from('profiles')\n        .select('id, full_name, avatar_url, user_type')\n        .eq('id', userId)\n        .single();\n\n      if (profileError) throw profileError;\n      setProfile(profileData);\n\n      // Fetch reputation\n      const { data: reputationData } = await supabase\n        .from('reputation_scores')\n        .select('*')\n        .eq('user_id', userId)\n        .maybeSingle();\n\n      setReputation(reputationData);\n    } catch (error) {\n      logger.logError(error, { context: 'UserReviews', action: 'fetchUserData' });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex flex-col\">\n        <Navbar />\n        <main className=\"flex-1 flex items-center justify-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary\"></div>\n        </main>\n        <Footer />\n      </div>\n    );\n  }\n\n  if (!profile) {\n    return (\n      <div className=\"min-h-screen flex flex-col\">\n        <Navbar />\n        <main className=\"flex-1 container mx-auto px-4 py-12\">\n          <Card>\n            <CardContent className=\"p-8 text-center\">\n              <p className=\"text-muted-foreground\">Utilisateur introuvable</p>\n            </CardContent>\n          </Card>\n        </main>\n        <Footer />\n      </div>\n    );\n  }\n\n  const userTypeLabels = {\n    locataire: 'Locataire',\n    proprietaire: 'Propritaire',\n    agence: 'Agence',\n    admin_ansut: 'Admin ANSUT',\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <Navbar />\n      \n      <main className=\"flex-1 container mx-auto px-4 py-8\">\n        <div className=\"max-w-4xl mx-auto space-y-6\">\n          {/* Header */}\n          <Card>\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-start gap-4\">\n                <Avatar className=\"h-20 w-20\">\n                  <AvatarImage src={profile.avatar_url || ''} />\n                  <AvatarFallback className=\"text-2xl\">\n                    {profile.full_name.charAt(0).toUpperCase()}\n                  </AvatarFallback>\n                </Avatar>\n                <div className=\"flex-1\">\n                  <h1 className=\"text-2xl font-bold mb-1\">{profile.full_name}</h1>\n                  <p className=\"text-muted-foreground mb-3\">\n                    {userTypeLabels[profile.user_type as keyof typeof userTypeLabels]}\n                  </p>\n                  {reputation && reputation.total_reviews > 0 && (\n                    <ReputationBadge\n                      score={Number(reputation.overall_score)}\n                      totalReviews={reputation.total_reviews}\n                      showDetails\n                    />\n                  )}\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Reviews by Type */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Award className=\"h-5 w-5\" />\n                Avis et rputation\n              </CardTitle>\n              <CardDescription>\n                Consultez les avis laisss par d'autres utilisateurs\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <Tabs defaultValue=\"all\" className=\"w-full\">\n                <TabsList className=\"grid w-full grid-cols-3\">\n                  <TabsTrigger value=\"all\">\n                    Tous ({reputation?.total_reviews || 0})\n                  </TabsTrigger>\n                  <TabsTrigger value=\"tenant\">\n                    <User className=\"h-4 w-4 mr-2\" />\n                    Locataire ({reputation?.as_tenant_reviews || 0})\n                  </TabsTrigger>\n                  <TabsTrigger value=\"landlord\">\n                    <Home className=\"h-4 w-4 mr-2\" />\n                    Propritaire ({reputation?.as_landlord_reviews || 0})\n                  </TabsTrigger>\n                </TabsList>\n\n                <div className=\"mt-6\">\n                  <TabsContent value=\"all\">\n                    <ReviewsList userId={userId!} reviewType=\"all\" />\n                  </TabsContent>\n\n                  <TabsContent value=\"tenant\">\n                    <ReviewsList userId={userId!} reviewType=\"as_tenant\" />\n                  </TabsContent>\n\n                  <TabsContent value=\"landlord\">\n                    <ReviewsList userId={userId!} reviewType=\"as_landlord\" />\n                  </TabsContent>\n                </div>\n              </Tabs>\n            </CardContent>\n          </Card>\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n};\n\nexport default UserReviews;\n","import { useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { Loader2 } from \"lucide-react\";\n\nconst Publier = () => {\n  const { user, profile, loading } = useAuth();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (!loading) {\n      if (!user) {\n        // Non connect  redirection vers auth avec returnUrl et type propritaire\n        navigate(\"/auth?type=proprietaire&returnUrl=/ajouter-bien\");\n      } else if (profile?.user_type === 'locataire') {\n        // Locataire  pas autoris\n        navigate(\"/dashboard\");\n      } else {\n        // Propritaire/Agence  accs direct\n        navigate(\"/ajouter-bien\");\n      }\n    }\n  }, [user, profile, loading, navigate]);\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center\">\n      <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n    </div>\n  );\n};\n\nexport default Publier;\n","import { ShieldCheck, Users, FileSignature, TrendingUp, CheckCircle, X, Award, Shield, Zap, UserPlus } from \"lucide-react\";\nimport { Link } from \"react-router-dom\";\nimport { memo } from \"react\";\nimport { Button } from \"./ui/button\";\nimport { Badge } from \"./ui/badge\";\nimport monToitLogo from \"@/assets/logo/mon-toit-logo.png\";\nimport { LazyIllustration } from \"@/components/illustrations/LazyIllustration\";\nimport { getIllustrationPath } from \"@/lib/utils\";\n\n// Configuration - ANSUT (organisme public porteur)\nconst ANSUT_FULL_NAME = \"Agence Nationale du Service Universel des Tlcommunications/TIC\";\nconst ANSUT_SHORT_NAME = \"ANSUT\";\nconst ANSUT_MINISTRY = \"Ministre de la Transition Numrique et de la Digitalisation\";\n\n// Configuration - Mon Toit (le produit/service)\nconst PRODUCT_NAME = \"Mon Toit\";\nconst PRODUCT_TAGLINE = \"Dossier de location numrique certifi par l'tat\";\n\n// Types\ninterface KPI {\n  value: string;\n  label: string;\n  icon: React.ComponentType<{ className?: string }>;\n}\n\ninterface Feature {\n  icon: React.ComponentType<{ className?: string }>;\n  title: string;\n  description: string;\n  microKpi: string;\n  target: \"locataire\" | \"proprietaire\" | \"agence\" | \"all\";\n  targetLabel: string;\n  ctaText: string;\n  ctaLink: string;\n}\n\ninterface ComparisonItem {\n  text: string;\n  icon: React.ComponentType<{ className?: string }>;\n}\n\n// Configuration des couleurs par cible\nconst TARGET_STYLES = {\n  locataire: {\n    border: \"border-l-blue-600\",\n    iconBg: \"bg-blue-600\",\n  },\n  proprietaire: {\n    border: \"border-l-primary\",\n    iconBg: \"bg-primary\",\n  },\n  agence: {\n    border: \"border-l-secondary\",\n    iconBg: \"bg-secondary\",\n  },\n  all: {\n    border: \"border-l-secondary\",\n    iconBg: \"bg-secondary\",\n  },\n} as const;\n\n// Data\nconst kpis: KPI[] = [\n  {\n    value: \"15,000+\",\n    label: \"Dossiers crs\",\n    icon: Users,\n  },\n  {\n    value: \"0 FCFA\",\n    label: \"Gratuit pour locataires\",\n    icon: Award,\n  },\n  {\n    value: \"48h\",\n    label: \"Vrification moyenne\",\n    icon: Zap,\n  },\n];\n\nconst features: Feature[] = [\n  {\n    icon: ShieldCheck,\n    title: \"Dossier de Location Certifi\",\n    description: \"Crez votre dossier en ligne avec vrification biomtrique et obtenez une certification d'tat reconnue par tous les propritaires\",\n    microKpi: \"Certification en 48h\",\n    target: \"locataire\",\n    targetLabel: \"Pour les locataires\",\n    ctaText: \"Crer mon dossier\",\n    ctaLink: \"/certification\",\n  },\n  {\n    icon: Users,\n    title: \"Dossiers Pr-Vrifis par l'tat\",\n    description: \"Recevez uniquement des candidatures avec dossiers complets vrifis par le service public et score de fiabilit\",\n    microKpi: \"Score de confiance 0-100\",\n    target: \"proprietaire\",\n    targetLabel: \"Pour les propritaires\",\n    ctaText: \"Publier une annonce\",\n    ctaLink: \"/publier\",\n  },\n  {\n    icon: FileSignature,\n    title: \"Signature lectronique Scurise\",\n    description: \"Bail numrique conforme  la loi ivoirienne avec signature lectronique certifie et paiements Mobile Money intgrs\",\n    microKpi: \"Signature en 5 min\",\n    target: \"all\",\n    targetLabel: \"Pour tous\",\n    ctaText: \"Voir l'exemple\",\n    ctaLink: \"/legal\",\n  },\n  {\n    icon: TrendingUp,\n    title: \"Tableau de Bord Professionnel\",\n    description: \"Grez votre portefeuille immobilier, suivez les loyers en temps rel et gnrez des rapports automatiss\",\n    microKpi: \"Rapports instantans\",\n    target: \"agence\",\n    targetLabel: \"Pour les agences\",\n    ctaText: \"Dcouvrir\",\n    ctaLink: \"/admin\",\n  },\n];\n\nconst withoutMonToit: ComparisonItem[] = [\n  { text: \"Dossiers papier incomplets\", icon: X },\n  { text: \"Pas de vrification d'identit\", icon: X },\n  { text: \"Espces et chques non scuriss\", icon: X },\n  { text: \"Litiges sans mdiation\", icon: X },\n  { text: \"Risque de fraude documentaire\", icon: X },\n];\n\nconst withMonToit: ComparisonItem[] = [\n  { text: \"Dossier numrique certifi par l'tat\", icon: CheckCircle },\n  { text: \"Vrification biomtrique et KYC\", icon: CheckCircle },\n  { text: \"Paiements Mobile Money tracs\", icon: CheckCircle },\n  { text: \"Mdiation par service public\", icon: CheckCircle },\n  { text: \"Documents authentifis par l'ANSUT\", icon: CheckCircle },\n];\n\n// Sous-composants\nconst KPICard = memo(({ kpi, index }: { kpi: KPI; index: number }) => {\n  const Icon = kpi.icon;\n  return (\n    <div\n      className=\"bg-white rounded-lg border-l-4 border-l-primary shadow-md p-6 flex items-center gap-4 hover:shadow-lg transition-all duration-300\"\n      role=\"article\"\n      aria-label={`${kpi.label}: ${kpi.value}`}\n    >\n      <div className=\"bg-primary/10 p-3 rounded-full\" aria-hidden=\"true\">\n        <Icon className=\"h-6 w-6 text-primary\" />\n      </div>\n      <div>\n        <p className=\"text-3xl font-bold text-foreground\">{kpi.value}</p>\n        <p className=\"text-sm text-muted-foreground\">{kpi.label}</p>\n      </div>\n    </div>\n  );\n});\nKPICard.displayName = \"KPICard\";\n\nconst FeatureCard = memo(({ feature, index }: { feature: Feature; index: number }) => {\n  const Icon = feature.icon;\n  const styles = TARGET_STYLES[feature.target];\n  \n  // Map illustrations to features\n  const illustrationKeys = ['apartment-visit', 'real-estate-agent', 'key-handover', 'co-ownership-meeting'];\n  const illustrationKey = illustrationKeys[index] as any;\n\n  return (\n    <article\n      style={{ animationDelay: `${index * 100}ms` }}\n      className={`bg-white rounded-lg border-l-4 ${styles.border} shadow-md hover:shadow-2xl hover:scale-[1.02] hover:border-l-primary transition-all duration-300 p-8 flex flex-col animate-fade-in relative overflow-hidden group`}\n    >\n      {/* Illustration background on hover */}\n      <div className=\"absolute top-0 left-0 right-0 h-32 overflow-hidden rounded-t-lg opacity-0 group-hover:opacity-100 transition-opacity duration-500\">\n        <LazyIllustration \n          src={getIllustrationPath(illustrationKey)!}\n          alt={feature.title}\n          className=\"w-full h-full object-cover scale-110 group-hover:scale-100 transition-transform duration-500\"\n          animate={false}\n        />\n      </div>\n      \n      <div className=\"relative z-10 group-hover:pt-8 transition-all duration-300\">\n        <Badge variant=\"secondary\" className=\"mb-4 self-start text-xs\">\n          {feature.targetLabel}\n        </Badge>\n        \n        <div className={`${styles.iconBg} p-3 rounded-full w-fit mb-4 group-hover:scale-110 transition-transform duration-300`} aria-hidden=\"true\">\n          <Icon className=\"h-8 w-8 text-white\" />\n        </div>\n        \n        <h3 className=\"text-xl font-bold mb-3 text-foreground\">{feature.title}</h3>\n        \n        <div className=\"mb-4\">\n          <Badge variant=\"outline\" className=\"text-xs text-primary border-primary/30 bg-primary/5\">\n             {feature.microKpi}\n          </Badge>\n        </div>\n        \n        <p className=\"text-muted-foreground mb-6 flex-1 leading-relaxed\">{feature.description}</p>\n        \n        <div className=\"space-y-3\">\n          <Button asChild variant=\"outline\" size=\"sm\" className=\"w-full\">\n            <Link to={feature.ctaLink}>{feature.ctaText}</Link>\n          </Button>\n          \n          <div className=\"flex items-center gap-2 justify-center\">\n            <ShieldCheck className=\"h-4 w-4 text-primary\" aria-hidden=\"true\" />\n            <span className=\"text-xs text-primary font-semibold\">Service public</span>\n          </div>\n        </div>\n      </div>\n    </article>\n  );\n});\nFeatureCard.displayName = \"FeatureCard\";\n\nconst ComparisonList = memo(({ items, positive = false }: { items: ComparisonItem[]; positive?: boolean }) => (\n  <ul className=\"space-y-4\" role=\"list\">\n    {items.map((item, index) => {\n      const Icon = item.icon;\n      const iconColor = positive ? \"text-green-600\" : \"text-destructive\";\n      const textStyle = positive ? \"text-foreground font-medium\" : \"text-muted-foreground\";\n      \n      return (\n        <li key={index} className=\"flex items-start gap-3\">\n          <Icon className={`h-5 w-5 ${iconColor} mt-0.5 flex-shrink-0`} aria-hidden=\"true\" />\n          <span className={textStyle}>{item.text}</span>\n        </li>\n      );\n    })}\n  </ul>\n));\nComparisonList.displayName = \"ComparisonList\";\n\n// Composant principal\nconst Features = () => {\n  return (\n    <section \n      className=\"py-12 md:py-18 bg-gradient-to-b from-muted/30 to-background relative overflow-hidden\"\n      aria-labelledby=\"features-heading\"\n    >\n      <div className=\"container mx-auto px-4 max-w-7xl relative z-10\">\n        {/* Header - Mon Toit en avant */}\n        <header className=\"text-center mb-16\">\n          <div className=\"flex flex-col items-center justify-center gap-3 mb-6\">\n            {/* Logo Mon Toit - PRINCIPAL */}\n            <img \n              src={monToitLogo} \n              alt=\"Mon Toit - Dossier de location numrique certifi\" \n              className=\"h-14 md:h-16\" \n            />\n            \n            {/* Badges service public */}\n            <div className=\"flex flex-wrap gap-2 justify-center\">\n              <Badge variant=\"default\" className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-1.5 text-sm font-semibold\">\n                 Service Public\n              </Badge>\n              <Badge variant=\"outline\" className=\"border-primary text-primary px-4 py-1.5 text-sm font-semibold\">\n                Gratuit pour locataires\n              </Badge>\n            </div>\n          </div>\n          \n          <h2 \n            id=\"features-heading\" \n            className=\"text-4xl md:text-5xl font-bold mb-4 text-foreground tracking-tight\"\n          >\n            Le dossier de location numrique certifi\n          </h2>\n          \n          <p className=\"text-muted-foreground text-xl max-w-2xl mx-auto mb-3 leading-relaxed\">\n            Crez votre dossier en ligne, obtenez une certification d'tat et trouvez votre logement en toute confiance\n          </p>\n          \n          <div className=\"flex flex-col items-center gap-1\">\n            <p className=\"text-sm text-primary font-semibold\">\n              Un service de l'ANSUT\n            </p>\n            <p className=\"text-xs text-muted-foreground max-w-md\">\n              Inspir de DossierFacile (France)  Adapt au contexte ivoirien\n            </p>\n          </div>\n        </header>\n\n        {/* KPIs du service */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto mb-16\" role=\"region\" aria-label=\"Indicateurs du service\">\n          {kpis.map((kpi, index) => (\n            <KPICard key={index} kpi={kpi} index={index} />\n          ))}\n        </div>\n\n        {/* Features Cards enrichies */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl mx-auto mb-16\">\n          {features.map((feature, index) => (\n            <FeatureCard key={index} feature={feature} index={index} />\n          ))}\n        </div>\n\n        {/* Section comparative */}\n        <div className=\"max-w-5xl mx-auto mb-16\">\n          <h3 className=\"text-3xl font-bold text-center mb-10 text-foreground\">\n            Pourquoi choisir {PRODUCT_NAME} ?\n          </h3>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\n            {/* Sans Mon Toit */}\n            <div className=\"bg-gray-100 rounded-lg p-8 shadow-sm\">\n              <h4 className=\"text-xl font-bold mb-6 text-foreground flex items-center gap-2\">\n                <X className=\"h-6 w-6 text-destructive\" aria-hidden=\"true\" />\n                Location traditionnelle\n              </h4>\n              <ComparisonList items={withoutMonToit} />\n            </div>\n\n            {/* Avec Mon Toit */}\n            <div className=\"bg-white rounded-lg p-8 shadow-lg border-2 border-primary/20 relative overflow-hidden\">\n              <div className=\"relative z-10\">\n                <div className=\"flex items-center justify-between mb-6\">\n                  <h4 className=\"text-xl font-bold text-foreground flex items-center gap-2\">\n                    <CheckCircle className=\"h-6 w-6 text-green-600\" aria-hidden=\"true\" />\n                    Avec {PRODUCT_NAME}\n                  </h4>\n                  <Badge className=\"bg-blue-600 text-white border-0\">\n                    <Shield className=\"h-3 w-3 mr-1\" aria-hidden=\"true\" />\n                    Service Public\n                  </Badge>\n                </div>\n                <ComparisonList items={withMonToit} positive />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Section Transparence - Service Public */}\n        <div className=\"max-w-4xl mx-auto mb-16 bg-blue-50 border border-blue-200 rounded-xl p-8\">\n          <div className=\"flex items-start gap-4\">\n            <Shield className=\"h-8 w-8 text-blue-600 flex-shrink-0 mt-1\" />\n            <div>\n              <h3 className=\"text-xl font-bold mb-3 text-foreground\">\n                Un vrai service public\n              </h3>\n              <div className=\"grid md:grid-cols-2 gap-4 text-sm text-muted-foreground\">\n                <div className=\"flex items-start gap-2\">\n                  <CheckCircle className=\"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0\" />\n                  <span>Gratuit pour tous les locataires</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <CheckCircle className=\"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0\" />\n                  <span>Aucune revente de donnes</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <CheckCircle className=\"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0\" />\n                  <span>Hbergement en Cte d'Ivoire</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <CheckCircle className=\"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0\" />\n                  <span>Conformit RGPD et loi ivoirienne</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Section Tarification Transparente */}\n        <div className=\"max-w-5xl mx-auto mb-16\">\n          <h3 className=\"text-3xl font-bold text-center mb-10 text-foreground\">\n            Tarification transparente\n          </h3>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\n            {/* Locataires - Gratuit */}\n            <div className=\"relative bg-gradient-to-br from-blue-50 to-white rounded-lg p-8 shadow-md border-2 border-blue-200 md:scale-105\">\n              {/* Badge Recommand */}\n              <div className=\"absolute -top-3 -right-3\">\n                <Badge className=\"bg-secondary text-white border-0 px-3 py-1 text-xs font-bold\">\n                   RECOMMAND\n                </Badge>\n              </div>\n\n              <div className=\"flex items-center justify-between mb-6\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"bg-blue-600 p-3 rounded-full\">\n                    <Users className=\"h-6 w-6 text-white\" />\n                  </div>\n                  <h4 className=\"text-2xl font-bold text-foreground\">Locataires</h4>\n                </div>\n                <Badge className=\"bg-green-600 text-white border-0 text-lg px-4 py-1\">\n                  0 FCFA\n                </Badge>\n              </div>\n              \n              <p className=\"text-muted-foreground mb-6\">\n                Toutes les fonctionnalits pour trouver votre logement\n              </p>\n              \n              <ul className=\"space-y-3 mb-6\">\n                <li className=\"flex items-start gap-2\">\n                  <CheckCircle className=\"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0\" />\n                  <span className=\"text-foreground\">Cration de dossier gratuite</span>\n                </li>\n                <li className=\"flex items-start gap-2\">\n                  <CheckCircle className=\"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0\" />\n                  <span className=\"text-foreground\">Vrification ANSUT gratuite</span>\n                </li>\n                <li className=\"flex items-start gap-2\">\n                  <CheckCircle className=\"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0\" />\n                  <span className=\"text-foreground\">Candidatures illimites</span>\n                </li>\n                <li className=\"flex items-start gap-2\">\n                  <CheckCircle className=\"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0\" />\n                  <span className=\"text-foreground\">Support client gratuit</span>\n                </li>\n              </ul>\n\n              {/* CTA Locataire */}\n              <Button asChild className=\"w-full bg-secondary hover:bg-secondary/90 text-white font-bold mb-4\">\n                <Link to=\"/verification\">\n                  <UserPlus className=\"h-4 w-4 mr-2\" />\n                  Crer mon dossier gratuit\n                </Link>\n              </Button>\n              \n              <div className=\"pt-4 border-t border-blue-200\">\n                <p className=\"text-xs text-muted-foreground\">\n                   Financ par l'ANSUT dans le cadre du service universel\n                </p>\n              </div>\n            </div>\n\n            {/* Propritaires/Agences - Commission */}\n            <div className=\"bg-white rounded-lg p-8 shadow-lg border-2 border-primary/20\">\n              <div className=\"flex items-center justify-between mb-6\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"bg-primary p-3 rounded-full\">\n                    <TrendingUp className=\"h-6 w-6 text-white\" />\n                  </div>\n                  <h4 className=\"text-2xl font-bold text-foreground\">Propritaires</h4>\n                </div>\n                <Badge variant=\"outline\" className=\"border-primary text-primary text-lg px-4 py-1 font-bold\">\n                  5%\n                </Badge>\n              </div>\n              \n              <p className=\"text-muted-foreground mb-6\">\n                Commission uniquement sur signature de bail russie\n              </p>\n              \n              <ul className=\"space-y-3 mb-6\">\n                <li className=\"flex items-start gap-2\">\n                  <CheckCircle className=\"h-5 w-5 text-primary mt-0.5 flex-shrink-0\" />\n                  <span className=\"text-foreground\">Publication illimite de biens</span>\n                </li>\n                <li className=\"flex items-start gap-2\">\n                  <CheckCircle className=\"h-5 w-5 text-primary mt-0.5 flex-shrink-0\" />\n                  <span className=\"text-foreground\">Dossiers pr-vrifis par l'tat</span>\n                </li>\n                <li className=\"flex items-start gap-2\">\n                  <CheckCircle className=\"h-5 w-5 text-primary mt-0.5 flex-shrink-0\" />\n                  <span className=\"text-foreground\">Signature lectronique + Mobile Money</span>\n                </li>\n                <li className=\"flex items-start gap-2\">\n                  <CheckCircle className=\"h-5 w-5 text-primary mt-0.5 flex-shrink-0\" />\n                  <span className=\"text-foreground\">Mdiation en cas de litige</span>\n                </li>\n              </ul>\n              \n              <div className=\"pt-4 border-t border-muted\">\n                <p className=\"text-xs text-muted-foreground mb-2\">\n                   Commission prleve uniquement  la signature du bail\n                </p>\n                <p className=\"text-xs text-muted-foreground\">\n                   Agences : tarifs dgressifs sur devis\n                </p>\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"mt-8 text-center\">\n            <Button asChild variant=\"outline\" size=\"lg\">\n              <Link to=\"/tarifs\">Voir tous les dtails tarifaires</Link>\n            </Button>\n          </div>\n        </div>\n\n        {/* CTA final */}\n        <div className=\"text-center mt-16 bg-gradient-to-br from-primary/5 to-secondary/5 rounded-2xl p-10 border border-primary/10\">\n          <h3 className=\"text-2xl md:text-3xl font-bold mb-4 text-foreground\">\n            Crez votre dossier de location en ligne\n          </h3>\n          \n          <p className=\"text-muted-foreground mb-6 max-w-2xl mx-auto\">\n            Cration de dossier gratuite pour les locataires. Propritaires : commission uniquement sur signature de bail russie.\n          </p>\n          \n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center mb-6 max-w-md mx-auto\">\n            <Button asChild size=\"lg\" className=\"flex-1\">\n              <Link to=\"/verification\">Crer mon dossier</Link>\n            </Button>\n            <Button asChild variant=\"outline\" size=\"lg\" className=\"flex-1\">\n              <Link to=\"/certification\">Comment a marche ?</Link>\n            </Button>\n          </div>\n          \n          <div className=\"space-y-2 pt-4 border-t border-muted\">\n            <p className=\"text-sm text-muted-foreground\">\n              Un service de l'<span className=\"font-semibold\">{ANSUT_SHORT_NAME}</span>  Conforme  la loi ivoirienne 2013-450\n            </p>\n            <p className=\"text-xs text-muted-foreground\">\n              {ANSUT_FULL_NAME}  Sous tutelle du {ANSUT_MINISTRY}\n            </p>\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n};\n\nexport default Features;\n","import { Star, Quote, MapPin, ShieldCheck, TrendingUp } from \"lucide-react\";\nimport { Link } from \"react-router-dom\";\nimport { Button } from \"./ui/button\";\nimport {\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselNext,\n  CarouselPrevious,\n} from \"./ui/carousel\";\nimport Autoplay from \"embla-carousel-autoplay\";\nimport { useRef } from \"react\";\nimport { LazyIllustration } from \"@/components/illustrations/LazyIllustration\";\nimport { getIllustrationPath } from \"@/lib/utils\";\n\nconst testimonials = [\n  {\n    name: \"Kouadio Marc\",\n    role: \"Locataire certifi ANSUT\",\n    location: \"Cocody, Abidjan\",\n    content: \"J'ai trouv mon appartement en 48h grce  ma certification ANSUT. Les propritaires me rpondaient immdiatement car mon dossier tait dj complet et vrifi. Un gain de temps incroyable !\",\n    rating: 5,\n    avatar: \"KM\",\n    avatarGradient: \"bg-gradient-to-br from-blue-600 to-blue-700\",\n    isCertified: true\n  },\n  {\n    name: \"Adjoua Sarah\",\n    role: \"Propritaire\",\n    location: \"Marcory, Abidjan\",\n    content: \"Fini les dossiers incomplets et les vrifications interminables. Avec Mon Toit, je ne reois que des candidatures srieuses et certifies. Le paiement Mobile Money est un vrai plus pour mes locataires.\",\n    rating: 5,\n    avatar: \"AS\",\n    avatarGradient: \"bg-gradient-to-br from-primary to-orange-600\",\n    isCertified: false\n  },\n  {\n    name: \"Immobilier Plus SARL\",\n    role: \"Agence immobilire\",\n    location: \"Plateau, Abidjan\",\n    content: \"Le tableau de bord agence nous permet de grer 50+ proprits efficacement. Les contrats digitaux et le suivi des paiements nous font gagner des heures chaque semaine. Un outil professionnel indispensable.\",\n    rating: 5,\n    avatar: \"IP\",\n    avatarGradient: \"bg-gradient-to-br from-primary to-primary\",\n    isCertified: false\n  }\n];\n\nconst Testimonials = () => {\n  const autoplayPlugin = useRef(\n    Autoplay({ delay: 5000, stopOnInteraction: true })\n  );\n\n  return (\n    <section className=\"py-16 md:py-20 bg-gradient-to-b from-gray-50 to-white relative overflow-hidden\">\n      <div className=\"container mx-auto px-4 max-w-7xl relative z-10\">\n        {/* Bannire illustration */}\n        <div className=\"mb-12\">\n          <div className=\"relative h-64 rounded-2xl overflow-hidden shadow-xl\">\n            <LazyIllustration \n              src={getIllustrationPath('key-handover')!}\n              alt=\"Remise de cls russie\"\n              className=\"w-full h-full object-cover\"\n            />\n            <div className=\"absolute inset-0 bg-gradient-to-r from-black/70 to-transparent flex items-center\">\n              <div className=\"text-white p-8 max-w-xl\">\n                <h2 className=\"text-3xl md:text-4xl font-bold mb-2\">Ils ont trouv leur toit</h2>\n                <p className=\"text-lg opacity-90\">Des milliers de locataires satisfaits grce  Mon Toit</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"text-center mb-12\">\n          <h2 className=\"text-4xl md:text-5xl font-bold mb-4 text-foreground\">Tmoignages</h2>\n          <p className=\"text-muted-foreground text-lg max-w-2xl mx-auto\">\n            Dcouvrez les tmoignages de notre communaut d'utilisateurs satisfaits\n          </p>\n        </div>\n\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-12\">\n          <Carousel\n            opts={{\n              align: \"center\",\n              loop: true,\n            }}\n            plugins={[autoplayPlugin.current]}\n            className=\"w-full\"\n          >\n            <CarouselContent>\n              {testimonials.map((testimonial, index) => (\n                <CarouselItem key={index}>\n                  <div className=\"bg-gradient-to-br from-white to-gray-50/50 rounded-lg p-8 md:p-12 shadow-lg border border-primary/10 relative transition-all duration-250 ease-in-out hover:shadow-xl hover:scale-[1.02] cursor-pointer\">\n                    <Quote className=\"absolute top-6 right-6 h-12 w-12 text-primary/10\" />\n                    \n                    {/* Badge Certifi ANSUT */}\n                    {testimonial.isCertified && (\n                      <div className=\"absolute top-6 left-6 inline-flex items-center gap-1.5 bg-primary/10 text-primary border border-primary/20 px-3 py-1.5 rounded-full text-xs font-semibold\">\n                        <ShieldCheck className=\"h-3.5 w-3.5\" />\n                        Certifi ANSUT\n                      </div>\n                    )}\n                    \n                    {/* Rating */}\n                    <div className={`flex gap-1 ${testimonial.isCertified ? 'mt-8' : ''} mb-6`}>\n                      {Array.from({ length: testimonial.rating }).map((_, i) => (\n                        <Star key={i} className=\"h-5 w-5 fill-primary text-primary\" />\n                      ))}\n                    </div>\n\n                    {/* Content */}\n                    <p className=\"text-lg md:text-xl text-foreground leading-relaxed mb-8 relative z-10\">\n                      \"{testimonial.content}\"\n                    </p>\n\n                    {/* Author */}\n                    <div className=\"flex items-center gap-4\">\n                      <div className={`w-14 h-14 rounded-full ${testimonial.avatarGradient} flex items-center justify-center text-white font-bold text-lg shadow-md`}>\n                        {testimonial.avatar}\n                      </div>\n                      <div>\n                        <div className=\"font-semibold text-foreground\">{testimonial.name}</div>\n                        <div className=\"text-sm text-muted-foreground\">{testimonial.role}</div>\n                        <div className=\"flex items-center gap-1 text-xs text-muted-foreground\">\n                          <MapPin className=\"h-3 w-3\" />\n                          {testimonial.location}\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </CarouselItem>\n              ))}\n            </CarouselContent>\n            <CarouselPrevious className=\"hidden md:flex\" />\n            <CarouselNext className=\"hidden md:flex\" />\n          </Carousel>\n        </div>\n\n        {/* Footer CTA simplifi */}\n        <div className=\"max-w-4xl mx-auto mt-16 text-center\">\n          <div className=\"flex flex-col sm:flex-row justify-center gap-3\">\n            <Button asChild size=\"lg\" variant=\"default\">\n              <Link to=\"/auth\">Rejoindre la communaut</Link>\n            </Button>\n            <Button asChild size=\"lg\" variant=\"outline\">\n              <Link to=\"/certification\">En savoir plus</Link>\n            </Button>\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n};\n\nexport default Testimonials;\n","import Navbar from \"@/components/Navbar\";\nimport Footer from \"@/components/Footer\";\nimport Features from \"@/components/Features\";\nimport Testimonials from \"@/components/Testimonials\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Shield, Users, Award, TrendingUp } from \"lucide-react\";\nimport { AkanPattern } from \"@/components/ui/african-patterns\";\nimport { GradientButton } from \"@/components/ui/gradient-button\";\n\nconst APropos = () => {\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <Navbar />\n      <main className=\"flex-1 pt-24\">\n        <div className=\"container mx-auto px-4 py-10\">\n          <div className=\"max-w-4xl mx-auto\">\n            {/* Hero avec pattern culturel */}\n            <div className=\"relative mb-12\">\n              <AkanPattern />\n              <div className=\"relative z-10\">\n                <h1 className=\"text-h1 text-center mb-4\">\n                  <span className=\"text-gradient-primary\"> propos</span> de Mon Toit\n                </h1>\n                <p className=\"text-xl text-muted-foreground text-center\">\n                  La plateforme de confiance pour l'immobilier en Cte d'Ivoire\n                </p>\n              </div>\n            </div>\n\n            <div className=\"prose prose-lg max-w-none mb-12\">\n              <p>\n                <strong>Mon Toit</strong> est une plateforme innovante propulse par <strong>ANSUT</strong> \n                (Agence Nationale du Service Universel des Tlcommunications/TIC), \n                ddie  rvolutionner le march immobilier ivoirien.\n              </p>\n              <p>\n                Notre mission est de crer un environnement scuris, transparent et efficace \n                pour tous les acteurs de l'immobilier : locataires, propritaires et agences.\n              </p>\n            </div>\n\n            <div className=\"grid md:grid-cols-2 gap-6 mb-12\">\n              <Card>\n                <CardHeader>\n                  <Shield className=\"h-10 w-10 text-primary mb-2\" />\n                  <CardTitle>Scurit garantie</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  Vrification d'identit (ONECI, CNAM), certification ANSUT des baux, \n                  et paiements scuriss via Mobile Money.\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <Users className=\"h-10 w-10 text-primary mb-2\" />\n                  <CardTitle>Confiance mutuelle</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  Systme de notation et d'avis vrifis pour locataires et propritaires.\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <Award className=\"h-10 w-10 text-primary mb-2\" />\n                  <CardTitle>Conformit lgale</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  Conforme  la loi ivoirienne 2013-450 sur la protection des donnes \n                  et aux rglementations immobilires.\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <TrendingUp className=\"h-10 w-10 text-primary mb-2\" />\n                  <CardTitle>Innovation continue</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  Visites virtuelles 360, recommandations IA, et outils d'analyse \n                  pour propritaires.\n                </CardContent>\n              </Card>\n            </div>\n\n            <Card className=\"bg-primary text-primary-foreground\">\n              <CardContent className=\"pt-6\">\n                <h3 className=\"text-2xl font-bold mb-4\">Nos valeurs</h3>\n                <ul className=\"space-y-2\">\n                  <li> <strong>Transparence</strong> : Informations claires et vrifiables</li>\n                  <li> <strong>Scurit</strong> : Protection des donnes et des transactions</li>\n                  <li> <strong>Accessibilit</strong> : Plateforme simple et intuitive</li>\n                  <li> <strong>Innovation</strong> : Technologies de pointe au service de tous</li>\n                </ul>\n              </CardContent>\n            </Card>\n          </div>\n\n          {/* Fonctionnalits de la plateforme */}\n          <div className=\"my-20\">\n            <h2 className=\"text-h2 text-center mb-12\">\n              Nos <span className=\"text-gradient-secondary\">fonctionnalits</span>\n            </h2>\n            <Features />\n          </div>\n\n          {/* Tmoignages */}\n          <div className=\"my-20\">\n            <h2 className=\"text-h2 text-center mb-12\">\n              Ce que disent nos <span className=\"text-gradient-secondary\">utilisateurs</span>\n            </h2>\n            <Testimonials />\n          </div>\n        </div>\n      </main>\n      <Footer />\n    </div>\n  );\n};\n\nexport default APropos;\n","import { ReactNode } from \"react\";\nimport Navbar from \"@/components/Navbar\";\nimport Footer from \"@/components/Footer\";\n\ninterface LegalPageProps {\n  title: string;\n  lastUpdated: string;\n  children: ReactNode;\n}\n\nconst LegalPage = ({ title, lastUpdated, children }: LegalPageProps) => {\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <Navbar />\n      <main className=\"flex-1 pt-16\">\n        <div className=\"container mx-auto px-4 py-10\">\n          <div className=\"max-w-4xl mx-auto\">\n            <h1 className=\"text-4xl font-bold mb-2\">{title}</h1>\n            <p className=\"text-sm text-muted-foreground mb-8\">\n              Dernire mise  jour : {lastUpdated}\n            </p>\n            <div className=\"prose prose-lg max-w-none\">\n              {children}\n            </div>\n          </div>\n        </div>\n      </main>\n      <Footer />\n    </div>\n  );\n};\n\nexport default LegalPage;\n","import LegalPage from \"./Legal\";\n\nconst Conditions = () => {\n  return (\n    <LegalPage title=\"Conditions d'utilisation\" lastUpdated=\"5 octobre 2025\">\n      <h2>1. Objet</h2>\n      <p>\n        Les prsentes Conditions Gnrales d'Utilisation (CGU) rgissent l'accs \n        et l'utilisation de la plateforme Mon Toit propulse par ANSUT.\n      </p>\n\n      <h2>2. Inscription</h2>\n      <p>\n        L'utilisation complte de la plateforme ncessite la cration d'un compte. \n        Vous devez fournir des informations exactes et  jour.\n      </p>\n\n      <h2>3. Vrification d'identit</h2>\n      <p>\n        La plateforme utilise les services ONECI et CNAM pour vrifier l'identit \n        des utilisateurs, conformment  la rglementation ivoirienne.\n      </p>\n\n      <h2>4. Obligations des utilisateurs</h2>\n      <ul>\n        <li>Propritaires : publier des annonces vridiques et conformes</li>\n        <li>Locataires : respecter les biens lous et honorer les paiements</li>\n        <li>Tous : respecter la lgislation en vigueur</li>\n      </ul>\n\n      <h2>5. Responsabilit</h2>\n      <p>\n        Mon Toit agit en qualit d'intermdiaire. La responsabilit des transactions \n        incombe aux parties (locataire/propritaire).\n      </p>\n\n      <h2>6. Modification des CGU</h2>\n      <p>\n        Mon Toit se rserve le droit de modifier ces CGU  tout moment. \n        Les utilisateurs seront notifis par email.\n      </p>\n    </LegalPage>\n  );\n};\n\nexport default Conditions;\n","import LegalPage from \"./Legal\";\n\nconst Confidentialite = () => {\n  return (\n    <LegalPage title=\"Politique de confidentialit\" lastUpdated=\"5 octobre 2025\">\n      <h2>1. Collecte des donnes</h2>\n      <p>\n        Mon Toit collecte les donnes personnelles suivantes :\n      </p>\n      <ul>\n        <li>Donnes d'identification (nom, prnom, email, tlphone)</li>\n        <li>Donnes de vrification (ONECI, CNAM, photo faciale)</li>\n        <li>Donnes de navigation (logs, cookies)</li>\n      </ul>\n\n      <h2>2. Utilisation des donnes</h2>\n      <p>Vos donnes sont utilises pour :</p>\n      <ul>\n        <li>Crer et grer votre compte</li>\n        <li>Vrifier votre identit (scurit)</li>\n        <li>Faciliter les transactions immobilires</li>\n        <li>Amliorer nos services</li>\n      </ul>\n\n      <h2>3. Partage des donnes</h2>\n      <p>\n        Vos donnes ne sont jamais vendues. Elles peuvent tre partages avec :\n      </p>\n      <ul>\n        <li>ANSUT (pour certification des baux)</li>\n        <li>Partenaires de paiement (Mobile Money)</li>\n        <li>Autorits lgales (sur demande judiciaire)</li>\n      </ul>\n\n      <h2>4. Scurit</h2>\n      <p>\n        Nous utilisons le chiffrement SSL, l'authentification scurise, \n        et des sauvegardes rgulires pour protger vos donnes.\n      </p>\n\n      <h2>5. Vos droits</h2>\n      <p>Conformment  la loi 2013-450, vous pouvez :</p>\n      <ul>\n        <li>Accder  vos donnes</li>\n        <li>Rectifier vos informations</li>\n        <li>Supprimer votre compte</li>\n        <li>Vous opposer au traitement</li>\n      </ul>\n\n      <h2>6. Contact</h2>\n      <p>\n        Pour toute question : <a href=\"mailto:privacy@montoit.ci\">privacy@montoit.ci</a>\n      </p>\n    </LegalPage>\n  );\n};\n\nexport default Confidentialite;\n","import LegalPage from \"./Legal\";\n\nconst MentionsLegales = () => {\n  return (\n    <LegalPage title=\"Mentions lgales\" lastUpdated=\"5 octobre 2025\">\n      <h2>diteur du site</h2>\n      <p>\n        <strong>Mon Toit</strong><br />\n        Plateforme propulse par ANSUT<br />\n        (Agence Nationale de Scurisation des Transactions)<br />\n        Abidjan, Cte d'Ivoire\n      </p>\n\n      <h2>Directeur de publication</h2>\n      <p>[Nom du Directeur Gnral d'ANSUT]</p>\n\n      <h2>Hbergement</h2>\n      <p>\n        <strong>Lovable Cloud</strong><br />\n        Infrastructure cloud scurise\n      </p>\n\n      <h2>Proprit intellectuelle</h2>\n      <p>\n        L'ensemble du contenu de ce site (textes, images, logos, code source) \n        est la proprit exclusive de Mon Toit / ANSUT.\n      </p>\n\n      <h2>Crdits</h2>\n      <ul>\n        <li>Logo Mon Toit : ANSUT</li>\n        <li>Framework : React + TypeScript</li>\n        <li>UI : shadcn/ui + Tailwind CSS</li>\n        <li>Backend : Lovable Cloud</li>\n      </ul>\n\n      <h2>Contact</h2>\n      <p>\n        Email : <a href=\"mailto:contact@montoit.ci\">contact@montoit.ci</a><br />\n        Tlphone : +225 27 XX XX XX XX\n      </p>\n    </LegalPage>\n  );\n};\n\nexport default MentionsLegales;\n","import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { TenantScoreBadge } from '@/components/ui/tenant-score-badge';\nimport { Shield, Briefcase, CreditCard, TrendingUp, FileText, User } from 'lucide-react';\n\ninterface ScoreBreakdown {\n  identity_verification: number;\n  face_verification: number;\n  payment_history: number;\n  documents: number;\n  profile_completeness: number;\n}\n\ninterface TenantScoreBreakdownProps {\n  score: number;\n  breakdown?: ScoreBreakdown;\n  recommendation?: 'approved' | 'conditional' | 'rejected';\n}\n\nexport const TenantScoreBreakdown = ({ score, breakdown, recommendation }: TenantScoreBreakdownProps) => {\n  const getRecommendationBadge = (rec: string) => {\n    const config = {\n      approved: { variant: 'default' as const, label: ' Recommand' },\n      conditional: { variant: 'secondary' as const, label: '~ Conditionnel' },\n      rejected: { variant: 'destructive' as const, label: ' Non recommand' },\n    };\n    const { variant, label } = config[rec as keyof typeof config];\n    return <Badge variant={variant}>{label}</Badge>;\n  };\n\n  const breakdownItems = breakdown ? [\n    { \n      icon: Shield, \n      label: 'Vrification identit ONECI', \n      score: breakdown.identity_verification, \n      max: 40,\n      color: 'text-blue-600'\n    },\n    { \n      icon: User, \n      label: 'Vrification faciale', \n      score: breakdown.face_verification, \n      max: 30,\n      color: 'text-green-600'\n    },\n    {\n      icon: FileText,\n      label: 'Documents fournis',\n      score: breakdown.documents,\n      max: 20,\n      color: 'text-warning'\n    },\n    { \n      icon: CreditCard, \n      label: 'Historique de paiements', \n      score: breakdown.payment_history, \n      max: 10,\n      color: 'text-orange-600'\n    },\n  ] : [];\n\n  return (\n    <Card className=\"border-primary/20 bg-gradient-to-br from-primary/5 to-transparent\">\n      <CardHeader>\n        <CardTitle>valuation automatique</CardTitle>\n        <CardDescription>Score de fiabilit calcul automatiquement</CardDescription>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        <div className=\"flex items-center justify-between p-4 bg-background rounded-lg border\">\n          <span className=\"font-medium\">Score du candidat</span>\n          <TenantScoreBadge score={score} size=\"lg\" />\n        </div>\n\n        {recommendation && (\n          <div className=\"flex items-center justify-between p-4 bg-background rounded-lg border\">\n            <span className=\"font-medium\">Recommandation</span>\n            {getRecommendationBadge(recommendation)}\n          </div>\n        )}\n\n        {breakdown && (\n          <div className=\"space-y-2 mt-4 p-4 bg-background rounded-lg border\">\n            <p className=\"text-sm font-semibold mb-3\">Dtails de l'valuation:</p>\n            {breakdownItems.map((item, index) => {\n              const Icon = item.icon;\n              const percentage = (item.score / item.max) * 100;\n              return (\n                <div key={index} className=\"space-y-1\">\n                  <div className=\"flex justify-between items-center text-sm py-2\">\n                    <div className=\"flex items-center gap-2\">\n                      <Icon className={`h-4 w-4 ${item.color}`} />\n                      <span className=\"text-muted-foreground\">{item.label}</span>\n                    </div>\n                    <span className=\"font-medium\">{item.score}/{item.max} pts</span>\n                  </div>\n                  <div className=\"w-full bg-muted rounded-full h-2\">\n                    <div \n                      className=\"bg-primary h-2 rounded-full transition-all duration-500\"\n                      style={{ width: `${percentage}%` }}\n                    />\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n","import { useState, useEffect } from 'react';\nimport { supabase } from '@/lib/supabase';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Badge } from '@/components/ui/badge';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { CheckCircle, XCircle, AlertCircle, Clock } from 'lucide-react';\nimport { toast } from '@/hooks/use-toast';\nimport { TenantScoreBreakdown } from '@/components/application/TenantScoreBreakdown';\n\ninterface Application {\n  id: string;\n  applicant_id: string;\n  property_id: string;\n  status: string;\n  application_score: number;\n  created_at: string;\n  cover_letter: string;\n  processing_deadline: string | null;\n  is_overdue: boolean;\n  profiles: {\n    full_name: string;\n    avatar_url: string;\n  };\n  properties: {\n    title: string;\n    address: string;\n    city: string;\n  };\n}\n\ninterface DossierValidationQueueProps {\n  onUpdate?: () => void;\n}\n\ntype FilterStatus = 'all' | 'urgent' | 'soon' | 'normal';\ntype SortBy = 'priority' | 'date' | 'score';\n\nconst DossierValidationQueue = ({ onUpdate }: DossierValidationQueueProps) => {\n  const [applications, setApplications] = useState<Application[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [notes, setNotes] = useState<{ [key: string]: string }>({});\n  const [filterStatus, setFilterStatus] = useState<FilterStatus>('all');\n  const [sortBy, setSortBy] = useState<SortBy>('priority');\n\n  useEffect(() => {\n    fetchApplications();\n  }, [filterStatus, sortBy]);\n\n  const getUrgencyStatus = (app: Application) => {\n    if (!app.processing_deadline) {\n      return { color: 'default', label: ' En attente', badge: null, shouldPulse: false };\n    }\n\n    const now = new Date();\n    const deadline = new Date(app.processing_deadline);\n    const hoursRemaining = (deadline.getTime() - now.getTime()) / (1000 * 60 * 60);\n    \n    if (app.is_overdue) {\n      return { \n        color: 'destructive', \n        label: ` EN RETARD (${Math.abs(Math.round(hoursRemaining))}h)`, \n        badge: 'URGENT',\n        shouldPulse: true\n      };\n    }\n    if (hoursRemaining < 24) {\n      return { \n        color: 'warning', \n        label: ` < 24h restantes`, \n        badge: 'ATTENTION',\n        shouldPulse: false\n      };\n    }\n    if (hoursRemaining < 48) {\n      return { \n        color: 'secondary', \n        label: ` < 48h restantes`, \n        badge: null,\n        shouldPulse: false\n      };\n    }\n    return { \n      color: 'default', \n      label: ' Dans les dlais', \n      badge: null,\n      shouldPulse: false\n    };\n  };\n\n  const fetchApplications = async () => {\n    setLoading(true);\n    try {\n      let query = supabase\n        .from('rental_applications')\n        .select(`\n          *,\n          profiles!rental_applications_applicant_id_fkey (full_name, avatar_url),\n          properties (title, address, city)\n        `)\n        .eq('status', 'pending');\n\n      // Appliquer les filtres\n      if (filterStatus === 'urgent') {\n        query = query.eq('is_overdue', true);\n      } else if (filterStatus === 'soon') {\n        const in48h = new Date(Date.now() + 48 * 60 * 60 * 1000).toISOString();\n        query = query\n          .eq('is_overdue', false)\n          .lte('processing_deadline', in48h);\n      } else if (filterStatus === 'normal') {\n        const in48h = new Date(Date.now() + 48 * 60 * 60 * 1000).toISOString();\n        query = query.gt('processing_deadline', in48h);\n      }\n\n      // Appliquer le tri\n      if (sortBy === 'priority') {\n        query = query\n          .order('is_overdue', { ascending: false })\n          .order('processing_deadline', { ascending: true });\n      } else if (sortBy === 'date') {\n        query = query.order('created_at', { ascending: true });\n      } else if (sortBy === 'score') {\n        query = query.order('application_score', { ascending: false });\n      }\n\n      const { data, error } = await query;\n\n      if (error) throw error;\n      setApplications(data || []);\n    } catch (error) {\n      toast({\n        title: 'Erreur',\n        description: 'Impossible de charger les dossiers',\n        variant: 'destructive'\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAction = async (applicationId: string, newStatus: 'approved' | 'rejected' | 'pending', reason?: string) => {\n    const { error } = await supabase\n      .from('rental_applications')\n      .update({ \n        status: newStatus,\n        reviewed_at: new Date().toISOString()\n      })\n      .eq('id', applicationId);\n\n    if (error) {\n      toast({\n        title: 'Erreur',\n        description: 'Impossible de mettre  jour le dossier',\n        variant: 'destructive'\n      });\n      return;\n    }\n\n    toast({\n      title: 'Succs',\n      description: `Dossier ${newStatus === 'approved' ? 'valid' : 'rejet'} avec succs`\n    });\n\n    fetchApplications();\n    onUpdate?.();\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center p-8\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Filtres et Tri */}\n      <div className=\"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between\">\n        <div className=\"flex gap-2 items-center flex-wrap\">\n          <Select value={filterStatus} onValueChange={(v) => setFilterStatus(v as FilterStatus)}>\n            <SelectTrigger className=\"w-[200px]\">\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"all\"> Tous les dossiers</SelectItem>\n              <SelectItem value=\"urgent\"> Urgents (en retard)</SelectItem>\n              <SelectItem value=\"soon\"> Bientt urgents (&lt; 48h)</SelectItem>\n              <SelectItem value=\"normal\"> Dans les dlais</SelectItem>\n            </SelectContent>\n          </Select>\n\n          <Select value={sortBy} onValueChange={(v) => setSortBy(v as SortBy)}>\n            <SelectTrigger className=\"w-[180px]\">\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"priority\"> Par priorit</SelectItem>\n              <SelectItem value=\"date\"> Par date</SelectItem>\n              <SelectItem value=\"score\"> Par score</SelectItem>\n            </SelectContent>\n          </Select>\n        </div>\n\n        <div className=\"text-sm text-muted-foreground\">\n          {applications.length} dossier{applications.length > 1 ? 's' : ''}\n        </div>\n      </div>\n\n      {/* Liste des candidatures */}\n      {applications.length === 0 ? (\n        <Card>\n          <CardContent className=\"p-12 text-center\">\n            <p className=\"text-muted-foreground\">Aucun dossier correspondant aux critres</p>\n          </CardContent>\n        </Card>\n      ) : (\n        <div className=\"space-y-4\">\n          {applications.map((app) => {\n            const urgency = getUrgencyStatus(app);\n            \n            return (\n              <Card \n                key={app.id} \n                className={`${\n                  urgency.color === 'destructive' ? 'border-destructive border-2' : ''\n                } ${urgency.shouldPulse ? 'animate-pulse' : ''}`}\n              >\n                <CardHeader>\n                  <div className=\"flex justify-between items-start gap-4\">\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-2 mb-2 flex-wrap\">\n                        <CardTitle className=\"text-xl\">{app.profiles.full_name}</CardTitle>\n                        {urgency.badge && (\n                          <Badge variant=\"destructive\" className=\"font-bold\">\n                            {urgency.badge}\n                          </Badge>\n                        )}\n                      </div>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {app.properties.title}  {app.properties.city}\n                      </p>\n                    </div>\n\n                    <div className=\"flex flex-col gap-2 items-end\">\n                      <Badge variant={urgency.color as any}>\n                        {urgency.label}\n                      </Badge>\n                      {app.processing_deadline && (\n                        <div className=\"text-xs text-muted-foreground flex items-center gap-1\">\n                          <Clock className=\"h-3 w-3\" />\n                          <span>\n                            Limite : {new Date(app.processing_deadline).toLocaleDateString('fr-FR', {\n                              day: 'numeric',\n                              month: 'short',\n                              hour: '2-digit',\n                              minute: '2-digit'\n                            })}\n                          </span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n\n                  <div className=\"text-xs text-muted-foreground mt-2\">\n                    Soumis le {new Date(app.created_at).toLocaleDateString('fr-FR', {\n                      day: 'numeric',\n                      month: 'long',\n                      year: 'numeric',\n                      hour: '2-digit',\n                      minute: '2-digit'\n                    })}\n                  </div>\n                </CardHeader>\n\n                <CardContent className=\"space-y-6\">\n                  {/* Application Score */}\n                  {app.application_score > 0 && (\n                    <TenantScoreBreakdown \n                      score={app.application_score}\n                      breakdown={{\n                        identity_verification: 20,\n                        face_verification: 15,\n                        payment_history: 20,\n                        documents: 25,\n                        profile_completeness: 20\n                      }}\n                      recommendation={\n                        app.application_score >= 70 ? 'approved' :\n                        app.application_score >= 50 ? 'conditional' : 'rejected'\n                      }\n                    />\n                  )}\n\n                  {/* Cover Letter */}\n                  {app.cover_letter && (\n                    <div>\n                      <h4 className=\"font-semibold mb-2\">Lettre de motivation</h4>\n                      <p className=\"text-sm text-muted-foreground\">{app.cover_letter}</p>\n                    </div>\n                  )}\n\n                  {/* Notes */}\n                  <div>\n                    <label className=\"text-sm font-medium mb-2 block\">Notes de validation</label>\n                    <Textarea\n                      placeholder=\"Ajoutez des notes concernant ce dossier...\"\n                      value={notes[app.id] || ''}\n                      onChange={(e) => setNotes({ ...notes, [app.id]: e.target.value })}\n                    />\n                  </div>\n\n                  {/* Actions */}\n                  <div className=\"flex gap-3 flex-wrap\">\n                    <Button\n                      onClick={() => handleAction(app.id, 'approved')}\n                      className=\"flex-1 min-w-[150px]\"\n                    >\n                      <CheckCircle className=\"mr-2 h-4 w-4\" />\n                      Valider\n                    </Button>\n                    <Button\n                      variant=\"outline\"\n                      onClick={() => handleAction(app.id, 'pending', notes[app.id])}\n                      className=\"flex-1 min-w-[150px]\"\n                    >\n                      <AlertCircle className=\"mr-2 h-4 w-4\" />\n                      Demander complments\n                    </Button>\n                    <Button\n                      variant=\"destructive\"\n                      onClick={() => handleAction(app.id, 'rejected', notes[app.id])}\n                      className=\"flex-1 min-w-[150px]\"\n                    >\n                      <XCircle className=\"mr-2 h-4 w-4\" />\n                      Rejeter\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default DossierValidationQueue;\n","import { useState, useEffect } from 'react';\nimport { supabase } from '@/lib/supabase';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Loader2, CheckCircle, XCircle, Clock } from 'lucide-react';\nimport { toast } from '@/hooks/use-toast';\nimport { logger } from '@/services/logger';\n\ninterface VerificationForReview {\n  user_id: string;\n  full_name: string;\n  user_type: string;\n  city: string;\n  oneci_status: string;\n  cnam_status: string;\n  oneci_verified_at: string | null;\n  cnam_verified_at: string | null;\n  created_at: string;\n  updated_at: string;\n}\n\nexport const TiersVerificationQueue = () => {\n  const [verifications, setVerifications] = useState<VerificationForReview[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchVerifications();\n  }, []);\n\n  const fetchVerifications = async () => {\n    setLoading(true);\n    try {\n      const { data, error } = await supabase.rpc('get_verifications_for_review');\n      \n      if (error) {\n        logger.error('Error fetching verifications for review', { error });\n        toast({\n          title: \"Erreur\",\n          description: \"Impossible de charger les vrifications en attente\",\n          variant: \"destructive\",\n        });\n      } else {\n        setVerifications(data || []);\n      }\n    } catch (error) {\n      logger.error('Exception fetching verifications', { error });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case 'verified':\n        return <Badge variant=\"default\" className=\"bg-green-600\"><CheckCircle className=\"w-3 h-3 mr-1\" />Vrifi</Badge>;\n      case 'pending_review':\n        return <Badge variant=\"secondary\"><Clock className=\"w-3 h-3 mr-1\" />En rvision</Badge>;\n      case 'rejected':\n        return <Badge variant=\"destructive\"><XCircle className=\"w-3 h-3 mr-1\" />Rejet</Badge>;\n      default:\n        return <Badge variant=\"outline\">{status}</Badge>;\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-8\">\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\n      </div>\n    );\n  }\n\n  if (verifications.length === 0) {\n    return (\n      <div className=\"py-8 text-center text-muted-foreground\">\n        Aucune vrification en attente de rvision\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      {verifications.map((verification) => (\n        <Card key={verification.user_id}>\n          <CardHeader>\n            <div className=\"flex items-start justify-between\">\n              <div>\n                <CardTitle className=\"text-lg\">{verification.full_name}</CardTitle>\n                <CardDescription>\n                  {verification.user_type}  {verification.city || 'Ville non renseigne'}\n                </CardDescription>\n              </div>\n              <Button \n                variant=\"outline\" \n                size=\"sm\"\n                onClick={() => {\n                  toast({\n                    title: \"Fonction  venir\",\n                    description: \"La vue dtaille sera disponible prochainement\",\n                  });\n                }}\n              >\n                Voir dtails\n              </Button>\n            </div>\n          </CardHeader>\n          <CardContent className=\"space-y-3\">\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <p className=\"text-sm font-medium mb-1\">Vrification ONECI</p>\n                {getStatusBadge(verification.oneci_status)}\n                {verification.oneci_verified_at && (\n                  <p className=\"text-xs text-muted-foreground mt-1\">\n                    Vrifi le {new Date(verification.oneci_verified_at).toLocaleDateString('fr-FR')}\n                  </p>\n                )}\n              </div>\n              \n              <div>\n                <p className=\"text-sm font-medium mb-1\">Vrification CNAM</p>\n                {getStatusBadge(verification.cnam_status)}\n                {verification.cnam_verified_at && (\n                  <p className=\"text-xs text-muted-foreground mt-1\">\n                    Vrifi le {new Date(verification.cnam_verified_at).toLocaleDateString('fr-FR')}\n                  </p>\n                )}\n              </div>\n            </div>\n\n            <div className=\"pt-2 border-t\">\n              <p className=\"text-xs text-muted-foreground\">\n                Dossier cr le {new Date(verification.created_at).toLocaleDateString('fr-FR', {\n                  year: 'numeric',\n                  month: 'long',\n                  day: 'numeric',\n                  hour: '2-digit',\n                  minute: '2-digit'\n                })}\n              </p>\n            </div>\n\n            <div className=\"bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-lg p-3\">\n              <p className=\"text-xs text-blue-900 dark:text-blue-100\">\n                <strong> Scurit :</strong> Les numros CNI et de scurit sociale ne sont jamais affichs pour protger la vie prive des utilisateurs.\n              </p>\n            </div>\n          </CardContent>\n        </Card>\n      ))}\n    </div>\n  );\n};\n\nexport default TiersVerificationQueue;\n","import { useState, useEffect } from 'react';\nimport { useAuth } from '@/hooks/useAuth';\nimport { Navigate } from 'react-router-dom';\nimport { supabase } from '@/lib/supabase';\nimport Navbar from '@/components/Navbar';\nimport Footer from '@/components/Footer';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { CheckCircle, Clock, AlertCircle } from 'lucide-react';\nimport DossierValidationQueue from '@/components/tiers/DossierValidationQueue';\nimport TiersVerificationQueue from '@/components/tiers/TiersVerificationQueue';\n\nconst TiersDeConfianceDashboard = () => {\n  const { user, hasRole, loading } = useAuth();\n  const [stats, setStats] = useState({\n    validated: 0,\n    pending: 0,\n    rejected: 0,\n    urgent: 0,\n    avgProcessingTime: 0\n  });\n\n  useEffect(() => {\n    if (user && hasRole('tiers_de_confiance')) {\n      fetchStats();\n    }\n  }, [user, hasRole]);\n\n  const fetchStats = async () => {\n    const { count: validated } = await supabase\n      .from('rental_applications')\n      .select('*', { count: 'exact', head: true })\n      .eq('status', 'approved');\n\n    const { count: pending } = await supabase\n      .from('rental_applications')\n      .select('*', { count: 'exact', head: true })\n      .eq('status', 'pending');\n\n    const { count: rejected } = await supabase\n      .from('rental_applications')\n      .select('*', { count: 'exact', head: true })\n      .eq('status', 'rejected');\n\n    // Dossiers urgents (en retard)\n    const { count: urgent } = await supabase\n      .from('rental_applications')\n      .select('*', { count: 'exact', head: true })\n      .eq('status', 'pending')\n      .eq('is_overdue', true);\n\n    // Temps moyen de traitement (en heures)\n    const { data: processed } = await supabase\n      .from('rental_applications')\n      .select('created_at, reviewed_at')\n      .not('reviewed_at', 'is', null)\n      .limit(100);\n\n    let avgTime = 0;\n    if (processed && processed.length > 0) {\n      const totalTime = processed.reduce((acc, app) => {\n        const diff = new Date(app.reviewed_at!).getTime() - new Date(app.created_at).getTime();\n        return acc + diff;\n      }, 0);\n      avgTime = Math.round(totalTime / (processed.length * 1000 * 60 * 60)); // Convertir en heures\n    }\n\n    setStats({\n      validated: validated || 0,\n      pending: pending || 0,\n      rejected: rejected || 0,\n      urgent: urgent || 0,\n      avgProcessingTime: avgTime\n    });\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary\"></div>\n      </div>\n    );\n  }\n\n  if (!hasRole('tiers_de_confiance')) {\n    return <Navigate to=\"/\" replace />;\n  }\n\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <Navbar />\n      \n      <main className=\"flex-1 container mx-auto px-4 py-8\">\n        <h1 className=\"text-4xl font-bold mb-8\">Espace Tiers de Confiance</h1>\n\n        {/* Stats Cards */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\n          <Card className=\"border-destructive\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\"> Urgents</CardTitle>\n              <AlertCircle className=\"h-4 w-4 text-destructive\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold text-destructive\">{stats.urgent}</div>\n              <p className=\"text-xs text-muted-foreground mt-1\">En retard</p>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">En Attente</CardTitle>\n              <Clock className=\"h-4 w-4 text-orange-600\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\">{stats.pending}</div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Valids</CardTitle>\n              <CheckCircle className=\"h-4 w-4 text-green-600\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\">{stats.validated}</div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Temps Moyen</CardTitle>\n              <Clock className=\"h-4 w-4 text-blue-600\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\">{stats.avgProcessingTime}h</div>\n              <p className=\"text-xs text-muted-foreground mt-1\">De traitement</p>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Validation Queue */}\n        <Tabs defaultValue=\"verifications\" className=\"space-y-4\">\n          <TabsList>\n            <TabsTrigger value=\"verifications\">Vrifications d'identit</TabsTrigger>\n            <TabsTrigger value=\"dossiers\">Dossiers de location</TabsTrigger>\n            <TabsTrigger value=\"history\">Historique</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"verifications\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Vrifications ONECI et CNAM en attente</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <TiersVerificationQueue />\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"dossiers\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Validation des dossiers de location</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <DossierValidationQueue onUpdate={fetchStats} />\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"history\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Historique des validations</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <p className=\"text-muted-foreground\">Fonctionnalit  venir</p>\n              </CardContent>\n            </Card>\n          </TabsContent>\n        </Tabs>\n      </main>\n\n      <Footer />\n    </div>\n  );\n};\n\nexport default TiersDeConfianceDashboard;\n","import * as React from \"react\";\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\";\nimport { ChevronDown } from \"lucide-react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Accordion = AccordionPrimitive.Root;\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item ref={ref} className={cn(\"border-b\", className)} {...props} />\n));\nAccordionItem.displayName = \"AccordionItem\";\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n));\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName;\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n));\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName;\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent };\n","import Navbar from '@/components/Navbar';\nimport Footer from '@/components/Footer';\nimport {\n  Accordion,\n  AccordionContent,\n  AccordionItem,\n  AccordionTrigger,\n} from '@/components/ui/accordion';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Shield, CheckCircle, Clock, FileText, AlertCircle } from 'lucide-react';\n\nconst CertificationFAQ = () => {\n  return (\n    <>\n      <Navbar />\n      <div className=\"container mx-auto px-4 py-12\">\n        <div className=\"max-w-4xl mx-auto\">\n          <div className=\"text-center mb-12\">\n            <div className=\"inline-flex items-center justify-center w-16 h-16 bg-secondary/10 rounded-full mb-4\">\n              <Shield className=\"h-8 w-8 text-secondary\" />\n            </div>\n            <h1 className=\"text-4xl font-bold mb-4\">FAQ - Certification ANSUT</h1>\n            <p className=\"text-muted-foreground text-lg\">\n              Tout ce que vous devez savoir sur la certification des baux immobiliers\n            </p>\n          </div>\n\n          <Card className=\"mb-8\">\n            <CardContent className=\"p-6\">\n              <Accordion type=\"single\" collapsible className=\"w-full\">\n                <AccordionItem value=\"what-is\">\n                  <AccordionTrigger className=\"text-left\">\n                    <div className=\"flex items-center gap-2\">\n                      <Shield className=\"h-5 w-5 text-secondary\" />\n                      Qu'est-ce que la certification ANSUT ?\n                    </div>\n                  </AccordionTrigger>\n                  <AccordionContent className=\"text-muted-foreground\">\n                    La certification ANSUT est un label de qualit dlivr par l'Agence Nationale de Scurit \n                    et d'Urbanisme du Territoire. Elle garantit que votre bail immobilier respecte toutes les \n                    normes lgales ivoiriennes et que les parties ont t correctement vrifies. Un bail \n                    certifi ANSUT offre une protection juridique renforce et facilite les dmarches \n                    administratives.\n                  </AccordionContent>\n                </AccordionItem>\n\n                <AccordionItem value=\"why-certify\">\n                  <AccordionTrigger className=\"text-left\">\n                    <div className=\"flex items-center gap-2\">\n                      <CheckCircle className=\"h-5 w-5 text-green-600\" />\n                      Pourquoi faire certifier mon bail ?\n                    </div>\n                  </AccordionTrigger>\n                  <AccordionContent className=\"text-muted-foreground\">\n                    <ul className=\"list-disc pl-5 space-y-2\">\n                      <li>Protection juridique maximale en cas de litige</li>\n                      <li>Reconnaissance officielle par les autorits</li>\n                      <li>Facilite l'accs aux assurances habitation</li>\n                      <li>Augmente la confiance entre propritaire et locataire</li>\n                      <li>Simplifie les dmarches administratives</li>\n                      <li>Badge de qualit visible sur la plateforme</li>\n                    </ul>\n                  </AccordionContent>\n                </AccordionItem>\n\n                <AccordionItem value=\"duration\">\n                  <AccordionTrigger className=\"text-left\">\n                    <div className=\"flex items-center gap-2\">\n                      <Clock className=\"h-5 w-5 text-primary\" />\n                      Combien de temps prend la certification ?\n                    </div>\n                  </AccordionTrigger>\n                  <AccordionContent className=\"text-muted-foreground\">\n                    Le processus de certification prend gnralement entre 2 et 5 jours ouvrables. Ce dlai \n                    peut varier selon la complexit du dossier et la charge de travail des agents ANSUT. Vous \n                    recevrez une notification par email ds que votre demande sera examine et traite.\n                  </AccordionContent>\n                </AccordionItem>\n\n                <AccordionItem value=\"requirements\">\n                  <AccordionTrigger className=\"text-left\">\n                    <div className=\"flex items-center gap-2\">\n                      <FileText className=\"h-5 w-5 text-blue-600\" />\n                      Quelles sont les conditions requises ?\n                    </div>\n                  </AccordionTrigger>\n                  <AccordionContent className=\"text-muted-foreground\">\n                    Pour qu'un bail soit ligible  la certification ANSUT, les conditions suivantes doivent \n                    tre remplies :\n                    <ul className=\"list-disc pl-5 mt-2 space-y-1\">\n                      <li>Le bail doit tre sign par le propritaire ET le locataire</li>\n                      <li>Les deux parties doivent avoir leur identit vrifie (ONECI)</li>\n                      <li>Un document PDF du contrat doit tre gnr</li>\n                      <li>Les dates de dbut et fin doivent tre cohrentes</li>\n                      <li>Les montants (loyer, caution) doivent tre valides</li>\n                    </ul>\n                  </AccordionContent>\n                </AccordionItem>\n\n                <AccordionItem value=\"rejection\">\n                  <AccordionTrigger className=\"text-left\">\n                    <div className=\"flex items-center gap-2\">\n                      <AlertCircle className=\"h-5 w-5 text-destructive\" />\n                      Que faire si ma demande est rejete ?\n                    </div>\n                  </AccordionTrigger>\n                  <AccordionContent className=\"text-muted-foreground\">\n                    Si votre demande de certification est rejete, vous recevrez un email dtaillant les \n                    raisons du rejet. Les motifs courants incluent :\n                    <ul className=\"list-disc pl-5 mt-2 space-y-1\">\n                      <li>Documents incomplets ou non conformes</li>\n                      <li>Informations contradictoires dans le bail</li>\n                      <li>Vrifications d'identit incompltes</li>\n                      <li>Non-respect des normes lgales</li>\n                    </ul>\n                    <p className=\"mt-2\">\n                      Vous pouvez corriger les problmes mentionns et soumettre une nouvelle demande sans frais \n                      supplmentaires.\n                    </p>\n                  </AccordionContent>\n                </AccordionItem>\n\n                <AccordionItem value=\"cost\">\n                  <AccordionTrigger className=\"text-left\">\n                    Combien cote la certification ?\n                  </AccordionTrigger>\n                  <AccordionContent className=\"text-muted-foreground\">\n                    La certification ANSUT est actuellement gratuite pour tous les utilisateurs de la plateforme \n                    Mon Toit. C'est un service inclus pour garantir la scurit et la lgalit de toutes les \n                    transactions immobilires sur notre plateforme.\n                  </AccordionContent>\n                </AccordionItem>\n\n                <AccordionItem value=\"validity\">\n                  <AccordionTrigger className=\"text-left\">\n                    Quelle est la dure de validit de la certification ?\n                  </AccordionTrigger>\n                  <AccordionContent className=\"text-muted-foreground\">\n                    La certification ANSUT est valide pour toute la dure du bail. Elle reste active tant que \n                    le contrat de location est en cours. Si le bail est renouvel ou modifi de manire \n                    substantielle, une nouvelle certification sera ncessaire.\n                  </AccordionContent>\n                </AccordionItem>\n\n                <AccordionItem value=\"modifications\">\n                  <AccordionTrigger className=\"text-left\">\n                    Puis-je modifier mon bail aprs certification ?\n                  </AccordionTrigger>\n                  <AccordionContent className=\"text-muted-foreground\">\n                    Les modifications mineures (coordonnes, date de paiement) peuvent tre apportes sans \n                    affecter la certification. Cependant, toute modification substantielle (montant du loyer, \n                    dure du bail, parties impliques) ncessitera une nouvelle demande de certification. \n                    Contactez notre support pour plus de dtails sur votre situation spcifique.\n                  </AccordionContent>\n                </AccordionItem>\n\n                <AccordionItem value=\"verification\">\n                  <AccordionTrigger className=\"text-left\">\n                    Comment se passe la vrification d'identit ?\n                  </AccordionTrigger>\n                  <AccordionContent className=\"text-muted-foreground\">\n                    La vrification d'identit se fait via le systme ONECI (Office National d'Identification \n                    Civile et d'tat). Vous devrez fournir :\n                    <ul className=\"list-disc pl-5 mt-2 space-y-1\">\n                      <li>Numro de CNI (Carte Nationale d'Identit)</li>\n                      <li>Photo de votre CNI</li>\n                      <li>Selfie pour vrification faciale (optionnel mais recommand)</li>\n                    </ul>\n                    <p className=\"mt-2\">\n                      La vrification est effectue automatiquement et prend gnralement quelques minutes. \n                      En cas de problme, un agent ANSUT examinera manuellement votre dossier.\n                    </p>\n                  </AccordionContent>\n                </AccordionItem>\n\n                <AccordionItem value=\"benefits\">\n                  <AccordionTrigger className=\"text-left\">\n                    Quels sont les avantages concrets ?\n                  </AccordionTrigger>\n                  <AccordionContent className=\"text-muted-foreground\">\n                    <div className=\"space-y-3\">\n                      <div>\n                        <strong className=\"text-foreground\">Pour les propritaires :</strong>\n                        <ul className=\"list-disc pl-5 mt-1\">\n                          <li>Scurit juridique maximale</li>\n                          <li>Locataires vrifis et fiables</li>\n                          <li>Badge de qualit attirant plus de candidats</li>\n                          <li>Facilite les dmarches en cas de litige</li>\n                        </ul>\n                      </div>\n                      <div>\n                        <strong className=\"text-foreground\">Pour les locataires :</strong>\n                        <ul className=\"list-disc pl-5 mt-1\">\n                          <li>Protection contre les arnaques</li>\n                          <li>Bail conforme aux normes lgales</li>\n                          <li>Propritaire vrifi</li>\n                          <li>Facilite l'obtention d'assurances</li>\n                        </ul>\n                      </div>\n                    </div>\n                  </AccordionContent>\n                </AccordionItem>\n\n                <AccordionItem value=\"support\">\n                  <AccordionTrigger className=\"text-left\">\n                    Comment obtenir de l'aide supplmentaire ?\n                  </AccordionTrigger>\n                  <AccordionContent className=\"text-muted-foreground\">\n                    Si vous avez d'autres questions ou besoin d'assistance :\n                    <ul className=\"list-disc pl-5 mt-2 space-y-1\">\n                      <li>Consultez notre guide complet dans la section Documentation</li>\n                      <li>Contactez notre support via la messagerie interne</li>\n                      <li>Envoyez un email  support@montoit.ci</li>\n                      <li>Appelez notre hotline : +225 XX XX XX XX XX</li>\n                    </ul>\n                    <p className=\"mt-2\">\n                      Notre quipe est disponible du lundi au vendredi de 8h  18h.\n                    </p>\n                  </AccordionContent>\n                </AccordionItem>\n              </Accordion>\n            </CardContent>\n          </Card>\n\n          <div className=\"bg-muted p-6 rounded-lg text-center\">\n            <p className=\"text-muted-foreground\">\n              Vous ne trouvez pas la rponse  votre question ?\n            </p>\n            <p className=\"text-sm mt-2\">\n              Contactez notre quipe d'assistance qui se fera un plaisir de vous aider.\n            </p>\n          </div>\n        </div>\n      </div>\n      <Footer />\n    </>\n  );\n};\n\nexport default CertificationFAQ;\n","import Navbar from \"@/components/Navbar\";\nimport Footer from \"@/components/Footer\";\nimport { Button } from \"@/components/ui/button\";\nimport { Check, X } from \"lucide-react\";\nimport { Link } from \"react-router-dom\";\nimport { KentePattern } from \"@/components/ui/african-patterns\";\nimport { GradientButton } from \"@/components/ui/gradient-button\";\n\nconst pricingPlans = [\n  {\n    name: \"Locataire\",\n    price: \"Gratuit\",\n    description: \"Pour trouver votre logement idal\",\n    features: [\n      \"Recherche illimite de biens\",\n      \"Candidatures en 1 clic\",\n      \"Certification ANSUT incluse\",\n      \"Messagerie avec propritaires\",\n      \"Notifications en temps rel\",\n      \"Tableau de bord personnel\"\n    ],\n    notIncluded: [],\n    cta: \"Crer mon profil\",\n    ctaLink: \"/auth?type=tenant\",\n    highlighted: false\n  },\n  {\n    name: \"Propritaire\",\n    price: \"5%\",\n    priceDetail: \"de commission sur loyer\",\n    description: \"Pour louer vos biens en toute scurit\",\n    features: [\n      \"Publication illimite de biens\",\n      \"Rception candidatures certifies\",\n      \"Contrats digitaux scuriss\",\n      \"Paiements Mobile Money\",\n      \"Tableau de bord analytique\",\n      \"Support prioritaire\",\n      \"Signature lectronique\"\n    ],\n    notIncluded: [],\n    cta: \"Publier un bien\",\n    ctaLink: \"/publier\",\n    highlighted: true\n  },\n  {\n    name: \"Agence\",\n    price: \"Sur devis\",\n    description: \"Pour grer plusieurs proprits\",\n    features: [\n      \"Toutes les fonctionnalits Propritaire\",\n      \"Gestion multi-proprits\",\n      \"Rapports avancs en temps rel\",\n      \"API d'intgration\",\n      \"Branding personnalis\",\n      \"Support ddi 24/7\",\n      \"Formation des quipes\"\n    ],\n    notIncluded: [],\n    cta: \"Nous contacter\",\n    ctaLink: \"/auth?type=agency\",\n    highlighted: false\n  }\n];\n\nconst Tarifs = () => {\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <Navbar />\n      <main className=\"flex-1 pt-24\">\n        {/* Hero Section */}\n        <section className=\"py-12 md:py-18 bg-white relative\">\n          <KentePattern />\n          <div className=\"container mx-auto px-4 max-w-7xl text-center relative z-10\">\n            <h1 className=\"text-h1 mb-6\">\n              Des tarifs <span className=\"text-gradient-primary\">simples et transparents</span>\n            </h1>\n            <p className=\"text-lg md:text-xl text-muted-foreground max-w-3xl mx-auto\">\n              Choisissez la formule adapte  votre besoin. Aucun frais cach, annulation  tout moment.\n            </p>\n          </div>\n        </section>\n\n        {/* Pricing Cards */}\n        <section className=\"py-8 md:py-12 bg-gray-50\">\n          <div className=\"container mx-auto px-4 max-w-7xl\">\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n              {pricingPlans.map((plan, index) => {\n                const borderColor = \n                  index === 0 ? \"border-l-blue-600\" : \n                  index === 1 ? \"border-l-primary\" : \n                  \"border-l-secondary\";\n\n                return (\n                  <div\n                    key={index}\n                    className={`bg-white rounded-lg border-l-4 ${borderColor} ${\n                      plan.highlighted ? \"shadow-lg scale-105 md:scale-110\" : index === 0 ? \"shadow-lg md:scale-105\" : \"shadow-md\"\n                    } p-8 relative transition-all duration-200 hover:shadow-xl`}\n                  >\n                    {/* Badge Toujours Gratuit pour Locataire */}\n                    {index === 0 && (\n                      <div className=\"absolute -top-4 left-1/2 -translate-x-1/2 bg-secondary text-white px-4 py-1 rounded-full text-sm font-semibold\">\n                        TOUJOURS GRATUIT\n                      </div>\n                    )}\n\n\n                    <div className=\"mb-6\">\n                      <h3 className=\"text-2xl font-bold text-foreground mb-2\">{plan.name}</h3>\n                      <p className=\"text-muted-foreground text-sm\">{plan.description}</p>\n                    </div>\n\n                    <div className=\"mb-6\">\n                      <div className=\"text-4xl font-bold text-foreground\">{plan.price}</div>\n                      {plan.priceDetail && (\n                        <div className=\"text-sm text-muted-foreground mt-1\">{plan.priceDetail}</div>\n                      )}\n                    </div>\n\n                    <ul className=\"space-y-4 mb-8\">\n                      {plan.features.map((feature, featureIndex) => (\n                        <li key={featureIndex} className=\"flex items-start gap-3\">\n                          <Check className=\"h-5 w-5 text-primary flex-shrink-0 mt-0.5\" />\n                          <span className=\"text-foreground\">{feature}</span>\n                        </li>\n                      ))}\n                      {plan.notIncluded.map((feature, featureIndex) => (\n                        <li key={`not-${featureIndex}`} className=\"flex items-start gap-3\">\n                          <X className=\"h-5 w-5 text-muted-foreground flex-shrink-0 mt-0.5\" />\n                          <span className=\"text-muted-foreground line-through\">{feature}</span>\n                        </li>\n                      ))}\n                    </ul>\n\n                    <Button \n                      asChild \n                      className=\"w-full\" \n                      size=\"lg\"\n                      variant={plan.highlighted ? \"default\" : \"outline\"}\n                    >\n                      <Link to={plan.ctaLink}>{plan.cta}</Link>\n                    </Button>\n                  </div>\n                );\n              })}\n            </div>\n\n            {/* FAQ Section */}\n            <div className=\"mt-20 max-w-3xl mx-auto\">\n              <h2 className=\"text-3xl md:text-4xl font-bold mb-8 text-center text-foreground\">\n                Questions frquentes\n              </h2>\n              <div className=\"space-y-6\">\n                <div className=\"bg-white rounded-lg p-6 shadow-md\">\n                  <h3 className=\"font-bold text-lg mb-2 text-foreground\">\n                    Comment fonctionne la commission de 5% ?\n                  </h3>\n                  <p className=\"text-muted-foreground\">\n                    La commission est prleve uniquement lorsqu'un contrat de location est sign via la plateforme. \n                    Elle couvre tous nos services : vrification des locataires, contrat digital, paiements scuriss et support.\n                  </p>\n                </div>\n\n                <div className=\"bg-white rounded-lg p-6 shadow-md\">\n                  <h3 className=\"font-bold text-lg mb-2 text-foreground\">\n                    Pourquoi c'est gratuit pour les locataires ?\n                  </h3>\n                  <p className=\"text-muted-foreground\">\n                    La certification ANSUT (vrification d'identit biomtrique + constitution du dossier digital) \n                    est 100% gratuite pour tous les locataires car finance par l'ANSUT dans le cadre du service universel. \n                    Mon Toit se rmunre uniquement via les commissions sur les baux signs par les propritaires.\n                  </p>\n                </div>\n\n                <div className=\"bg-white rounded-lg p-6 shadow-md\">\n                  <h3 className=\"font-bold text-lg mb-2 text-foreground\">\n                    Comment Mon Toit finance son fonctionnement ?\n                  </h3>\n                  <p className=\"text-muted-foreground\">\n                    Mon Toit opre selon un modle freemium transparent : l'ANSUT finance l'infrastructure (CAPEX) \n                    et Mon Toit assure les oprations (OPEX) via des commissions sur les transactions, \n                    de la publicit cible et des services premium pour les agences. Les locataires ne paient jamais.\n                  </p>\n                </div>\n\n                <div className=\"bg-white rounded-lg p-6 shadow-md\">\n                  <h3 className=\"font-bold text-lg mb-2 text-foreground\">\n                    Quels sont les tarifs pour les agences ?\n                  </h3>\n                  <p className=\"text-muted-foreground\">\n                    Nos tarifs agences sont personnaliss selon le nombre de proprits gres et les fonctionnalits souhaites \n                    (API, branding, formations). Contactez-nous pour un devis sur mesure.\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            {/* CTA Section */}\n            <div className=\"mt-20 text-center\">\n              <h2 className=\"text-3xl md:text-4xl font-bold mb-4 text-foreground\">\n                Prt  commencer ?\n              </h2>\n              <p className=\"text-lg text-muted-foreground mb-8 max-w-2xl mx-auto\">\n                Rejoignez des milliers d'utilisateurs qui font confiance  Mon Toit pour leurs dmarches immobilires\n              </p>\n              <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n                <Button asChild size=\"lg\" className=\"px-8\">\n                  <Link to=\"/auth?type=tenant\">Je suis locataire</Link>\n                </Button>\n                <Button asChild size=\"lg\" variant=\"outline\" className=\"px-8\">\n                  <Link to=\"/publier\">Je suis propritaire</Link>\n                </Button>\n              </div>\n            </div>\n          </div>\n        </section>\n      </main>\n      <Footer />\n    </div>\n  );\n};\n\nexport default Tarifs;\n","import { useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { supabase } from '@/lib/supabase';\nimport { toast } from '@/hooks/use-toast';\nimport { Loader2, Image as ImageIcon, CheckCircle, XCircle } from 'lucide-react';\nimport { useNavigate } from 'react-router-dom';\n\nexport default function PopulateImages() {\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [progress, setProgress] = useState<{\n    total: number;\n    current: number;\n    results: Array<{ id: string; title: string; success: boolean; error?: string }>;\n  }>({ total: 0, current: 0, results: [] });\n  const navigate = useNavigate();\n\n  const getImagePrompt = (property: any): string => {\n    const typeDescriptions: Record<string, string> = {\n      'appartement': 'modern apartment building exterior with balconies',\n      'villa': 'luxury villa with garden and modern architecture',\n      'studio': 'contemporary studio apartment building',\n      'duplex': 'elegant duplex residence with two floors',\n      'maison': 'beautiful family house with yard'\n    };\n\n    const baseDesc = typeDescriptions[property.property_type] || 'residential property';\n    \n    return `Generate a high-quality, professional real estate photograph of a ${baseDesc} in ${property.city}, Cte d'Ivoire. The image should be bright, welcoming, with blue sky, showing the exterior facade. Style: professional real estate photography, well-lit, attractive, 16:9 aspect ratio. Ultra high resolution.`;\n  };\n\n  const generateImagesForProperties = async () => {\n    setIsGenerating(true);\n    setProgress({ total: 0, current: 0, results: [] });\n\n    try {\n      // Rcuprer les proprits sans image\n      const { data: properties, error: fetchError } = await supabase\n        .from('properties')\n        .select('id, title, property_type, city, neighborhood')\n        .is('main_image', null)\n        .limit(10);\n\n      if (fetchError) throw fetchError;\n\n      if (!properties || properties.length === 0) {\n        toast({\n          title: 'Aucune proprit  traiter',\n          description: 'Toutes les proprits ont dj des images.',\n        });\n        setIsGenerating(false);\n        return;\n      }\n\n      setProgress(prev => ({ ...prev, total: properties.length }));\n\n      // Accumuler les rsultats localement\n      const localResults: Array<{ id: string; title: string; success: boolean; error?: string }> = [];\n\n      // Gnrer les images via l'edge function\n      for (const property of properties) {\n        try {\n          const { data, error } = await supabase.functions.invoke('generate-property-images', {\n            body: {\n              propertyId: property.id,\n              propertyType: property.property_type,\n              city: property.city\n            }\n          });\n\n          if (error) throw error;\n          if (!data.success) throw new Error(data.error || 'Failed to generate image');\n\n          localResults.push({ id: property.id, title: property.title, success: true });\n\n        } catch (error: any) {\n          localResults.push({ id: property.id, title: property.title, success: false, error: error.message });\n        }\n\n        // Mettre  jour le state aprs chaque image\n        setProgress(prev => ({\n          ...prev,\n          current: prev.current + 1,\n          results: [...localResults]\n        }));\n      }\n\n      // Compter les succs depuis le tableau local\n      const successCount = localResults.filter(r => r.success).length;\n\n      toast({\n        title: 'Gnration termine !',\n        description: `${successCount} images gnres avec succs sur ${properties.length}.`,\n      });\n\n    } catch (error: any) {\n      toast({\n        title: 'Erreur',\n        description: error.message,\n        variant: 'destructive',\n      });\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n\n  return (\n    <div className=\"container mx-auto py-8 px-4\">\n      <Card className=\"max-w-2xl mx-auto\">\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <ImageIcon className=\"h-6 w-6\" />\n            Gnrer des images pour les proprits\n          </CardTitle>\n          <CardDescription>\n            Cette page permet de gnrer automatiquement des images pour toutes les proprits qui n'en ont pas encore.\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-6\">\n          <div className=\"flex gap-4\">\n            <Button\n              onClick={generateImagesForProperties}\n              disabled={isGenerating}\n              className=\"flex-1\"\n            >\n              {isGenerating && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n              {isGenerating ? 'Gnration en cours...' : 'Gnrer les images'}\n            </Button>\n            <Button\n              variant=\"outline\"\n              onClick={() => navigate('/')}\n            >\n              Retour\n            </Button>\n          </div>\n\n          {progress.total > 0 && (\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center justify-between text-sm\">\n                <span>Progression</span>\n                <span className=\"font-semibold\">{progress.current} / {progress.total}</span>\n              </div>\n              \n              <div className=\"w-full bg-muted rounded-full h-2\">\n                <div \n                  className=\"bg-primary h-2 rounded-full transition-all duration-300\"\n                  style={{ width: `${(progress.current / progress.total) * 100}%` }}\n                />\n              </div>\n\n              {progress.results.length > 0 && (\n                <div className=\"space-y-2 max-h-96 overflow-y-auto\">\n                  <h3 className=\"font-semibold text-sm\">Rsultats</h3>\n                  {progress.results.map((result, index) => (\n                    <div\n                      key={index}\n                      className=\"flex items-start gap-2 p-2 rounded-lg bg-muted/50 text-sm\"\n                    >\n                      {result.success ? (\n                        <CheckCircle className=\"h-4 w-4 text-green-600 mt-0.5 flex-shrink-0\" />\n                      ) : (\n                        <XCircle className=\"h-4 w-4 text-red-600 mt-0.5 flex-shrink-0\" />\n                      )}\n                      <div className=\"flex-1\">\n                        <p className=\"font-medium\">{result.title}</p>\n                        {result.error && (\n                          <p className=\"text-xs text-muted-foreground\">{result.error}</p>\n                        )}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { useAuth } from '@/hooks/useAuth';\nimport { supabase } from '@/lib/supabase';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { Shield, CheckCircle, AlertTriangle, Info, Loader2 } from 'lucide-react';\nimport { toast } from '@/hooks/use-toast';\n\ninterface DigitalCertificate {\n  id: string;\n  certificate_id: string;\n  certificate_status: 'active' | 'expired' | 'revoked';\n  expires_at: string;\n  created_at: string;\n}\n\nexport const DigitalCertificate = () => {\n  const { user } = useAuth();\n  const [certificate, setCertificate] = useState<DigitalCertificate | null>(null);\n  const [generating, setGenerating] = useState(false);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (user) {\n      fetchCertificate();\n    }\n  }, [user]);\n\n  const fetchCertificate = async () => {\n    if (!user) return;\n\n    setLoading(true);\n    const { data, error } = await supabase\n      .from('digital_certificates')\n      .select('*')\n      .eq('user_id', user.id)\n      .maybeSingle();\n\n    if (!error && data) {\n      setCertificate(data as DigitalCertificate);\n    }\n    setLoading(false);\n  };\n\n  const handleGenerateCertificate = async () => {\n    setGenerating(true);\n\n    try {\n      const { data, error } = await supabase.functions.invoke('cryptoneo-generate-certificate');\n\n      if (error) {\n        toast({\n          title: 'Erreur',\n          description: error.message || 'chec de la gnration du certificat',\n          variant: 'destructive'\n        });\n      } else {\n        toast({\n          title: 'Certificat gnr',\n          description: 'Votre certificat numrique a t gnr avec succs'\n        });\n        fetchCertificate();\n      }\n    } catch (error: any) {\n      toast({\n        title: 'Erreur',\n        description: error.message || 'Une erreur est survenue',\n        variant: 'destructive'\n      });\n    } finally {\n      setGenerating(false);\n    }\n  };\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <Shield className=\"h-5 w-5 text-secondary\" />\n          Certificat Numrique CryptoNeo\n        </CardTitle>\n        <CardDescription>\n          Requis pour la signature lectronique certifie par ANSUT\n        </CardDescription>\n      </CardHeader>\n\n      <CardContent>\n        {loading ? (\n          <div className=\"flex items-center justify-center py-4\">\n            <Loader2 className=\"h-6 w-6 animate-spin text-muted-foreground\" />\n          </div>\n        ) : !certificate ? (\n          <div className=\"space-y-4\">\n            <Alert>\n              <Info className=\"h-4 w-4\" />\n              <AlertDescription>\n                Votre certificat sera gnr automatiquement  partir de vos donnes ONECI vrifies.\n              </AlertDescription>\n            </Alert>\n            <Button \n              onClick={handleGenerateCertificate} \n              disabled={generating}\n              className=\"w-full\"\n            >\n              {generating ? (\n                <>\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                  Gnration en cours...\n                </>\n              ) : (\n                <>\n                  <Shield className=\"h-4 w-4 mr-2\" />\n                  Gnrer mon certificat\n                </>\n              )}\n            </Button>\n          </div>\n        ) : certificate.certificate_status === 'active' ? (\n          <div className=\"space-y-3\">\n            <div className=\"flex items-center gap-3 p-3 bg-green-50 dark:bg-green-950 rounded-lg\">\n              <CheckCircle className=\"h-5 w-5 text-green-600 dark:text-green-400 flex-shrink-0\" />\n              <div>\n                <p className=\"font-medium text-green-900 dark:text-green-100\">Certificat actif</p>\n                <p className=\"text-sm text-green-700 dark:text-green-300\">\n                  Expire le {new Date(certificate.expires_at).toLocaleDateString('fr-FR', {\n                    day: 'numeric',\n                    month: 'long',\n                    year: 'numeric'\n                  })}\n                </p>\n              </div>\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              ID: {certificate.certificate_id}\n            </p>\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            <Alert variant=\"destructive\">\n              <AlertTriangle className=\"h-4 w-4\" />\n              <AlertDescription>\n                {certificate.certificate_status === 'expired' \n                  ? 'Votre certificat a expir. Gnrez-en un nouveau pour signer lectroniquement.'\n                  : 'Votre certificat a t rvoqu. Veuillez contacter le support.'}\n              </AlertDescription>\n            </Alert>\n            {certificate.certificate_status === 'expired' && (\n              <Button \n                onClick={handleGenerateCertificate} \n                disabled={generating}\n                variant=\"destructive\"\n                className=\"w-full\"\n              >\n                {generating ? (\n                  <>\n                    <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                    Rgnration...\n                  </>\n                ) : (\n                  'Rgnrer le certificat'\n                )}\n              </Button>\n            )}\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n","import { useState, useEffect } from 'react';\nimport { supabase } from '@/lib/supabase';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Progress } from '@/components/ui/progress';\nimport { celebrateLeaseSigned } from '@/utils/confetti';\nimport { CheckCircle2, XCircle, Loader2 } from 'lucide-react';\n\ninterface SignatureStatusProps {\n  operationId: string;\n  onComplete: () => void;\n}\n\ntype SignatureStatus = 'initiated' | 'in_progress' | 'completed' | 'failed';\n\nexport const SignatureStatus = ({ operationId, onComplete }: SignatureStatusProps) => {\n  const [status, setStatus] = useState<SignatureStatus>('initiated');\n  const [progress, setProgress] = useState(0);\n  const [errorMessage, setErrorMessage] = useState<string | null>(null);\n\n  useEffect(() => {\n    const checkStatus = async () => {\n      const { data } = await supabase\n        .from('electronic_signature_logs')\n        .select('status, error_message')\n        .eq('operation_id', operationId)\n        .single();\n\n      if (data) {\n        setStatus(data.status as SignatureStatus);\n        if (data.error_message) {\n          setErrorMessage(data.error_message);\n        }\n\n        if (data.status === 'completed') {\n          setProgress(100);\n          \n          //  Clbration pour bail sign lectroniquement\n          celebrateLeaseSigned();\n          \n          onComplete();\n        } else if (data.status === 'failed') {\n          setProgress(0);\n        } else {\n          setProgress(prev => Math.min(prev + 10, 90));\n        }\n      }\n    };\n\n    // Initial check\n    checkStatus();\n\n    // Poll every 5 seconds\n    const interval = setInterval(checkStatus, 5000);\n\n    // Cleanup\n    return () => clearInterval(interval);\n  }, [operationId, onComplete]);\n\n  const getStatusText = () => {\n    switch (status) {\n      case 'completed':\n        return 'Signature complte !';\n      case 'failed':\n        return 'chec de la signature';\n      case 'in_progress':\n        return 'Traitement en cours...';\n      default:\n        return 'Initialisation...';\n    }\n  };\n\n  const getStatusDescription = () => {\n    switch (status) {\n      case 'completed':\n        return 'Le document sign est disponible';\n      case 'failed':\n        return errorMessage || 'Veuillez ressayer ou utiliser la signature simple';\n      case 'in_progress':\n        return 'Cela peut prendre quelques minutes';\n      default:\n        return 'Prparation de la signature lectronique';\n    }\n  };\n\n  return (\n    <Card>\n      <CardContent className=\"pt-6\">\n        <div className=\"space-y-4\">\n          <div className=\"flex items-center gap-3\">\n            {status === 'completed' ? (\n              <CheckCircle2 className=\"h-6 w-6 text-green-600 dark:text-green-400 flex-shrink-0\" />\n            ) : status === 'failed' ? (\n              <XCircle className=\"h-6 w-6 text-destructive flex-shrink-0\" />\n            ) : (\n              <Loader2 className=\"h-6 w-6 animate-spin text-primary flex-shrink-0\" />\n            )}\n\n            <div className=\"flex-1 min-w-0\">\n              <p className=\"font-medium truncate\">{getStatusText()}</p>\n              <p className=\"text-sm text-muted-foreground\">{getStatusDescription()}</p>\n            </div>\n          </div>\n\n          {status !== 'failed' && status !== 'completed' && (\n            <div className=\"space-y-2\">\n              <Progress value={progress} className=\"h-2\" />\n              <p className=\"text-xs text-muted-foreground text-center\">\n                {progress}% complt\n              </p>\n            </div>\n          )}\n\n          {status === 'failed' && errorMessage && (\n            <div className=\"p-3 bg-destructive/10 rounded-md\">\n              <p className=\"text-sm text-destructive\">{errorMessage}</p>\n            </div>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n","import { supabase } from \"@/lib/supabase\";\nimport { logger } from '@/services/logger';\n\ninterface ValidationResult {\n  canSign: boolean;\n  reason?: string;\n  autoFix?: 'generate_certificate' | 'generate_pdf';\n}\n\nexport const canSignElectronically = async (\n  userId: string,\n  leaseId: string\n): Promise<ValidationResult> => {\n  try {\n    // 1. Verify user ONECI verification\n    const { data: profile } = await supabase\n      .from('profiles')\n      .select('oneci_verified')\n      .eq('id', userId)\n      .single();\n\n    if (!profile?.oneci_verified) {\n      return {\n        canSign: false,\n        reason: 'Identit ONECI non vrifie. Veuillez complter la vrification.'\n      };\n    }\n\n    // 2. Verify active certificate\n    const { data: certificate } = await supabase\n      .from('digital_certificates')\n      .select('*')\n      .eq('user_id', userId)\n      .eq('certificate_status', 'active')\n      .maybeSingle();\n\n    if (!certificate) {\n      return {\n        canSign: false,\n        reason: 'Certificat numrique requis',\n        autoFix: 'generate_certificate'\n      };\n    }\n\n    // Check certificate expiration\n    if (certificate.expires_at && new Date(certificate.expires_at) < new Date()) {\n      return {\n        canSign: false,\n        reason: 'Votre certificat a expir. Veuillez en gnrer un nouveau.',\n        autoFix: 'generate_certificate'\n      };\n    }\n\n    // 3. Verify lease status\n    const { data: lease } = await supabase\n      .from('leases')\n      .select('*')\n      .eq('id', leaseId)\n      .single();\n\n    if (!lease) {\n      return {\n        canSign: false,\n        reason: 'Bail non trouv'\n      };\n    }\n\n    if (!lease.landlord_signed_at || !lease.tenant_signed_at) {\n      return {\n        canSign: false,\n        reason: 'Les deux parties doivent d\\'abord signer avec signature simple'\n      };\n    }\n\n    if (!lease.document_url) {\n      return {\n        canSign: false,\n        reason: 'Le PDF du bail doit tre gnr',\n        autoFix: 'generate_pdf'\n      };\n    }\n\n    if (lease.is_electronically_signed) {\n      return {\n        canSign: false,\n        reason: 'Ce bail est dj sign lectroniquement'\n      };\n    }\n\n    // All checks passed\n    return { canSign: true };\n\n  } catch (error) {\n    logger.logError(error, { \n      context: 'signature-validation', \n      action: 'canSignElectronically',\n      userId,\n      leaseId \n    });\n    return {\n      canSign: false,\n      reason: 'Erreur lors de la vrification des prrequis'\n    };\n  }\n};\n","import { logger } from '@/services/logger';\n\ninterface ErrorHandling {\n  userMessage: string;\n  action: 'regenerate_certificate' | 'redirect_verification' | 'async_verification' | 'fallback_simple_signature' | 'log_and_notify_admin' | 'retry';\n  redirectUrl?: string;\n  fallback?: string;\n  retryIn?: number;\n  notification?: boolean;\n}\n\nexport const handleCryptoNeoError = (error: any): ErrorHandling => {\n  // Extract error code\n  const errorCode = error?.code || error?.error?.code || 'UNKNOWN';\n\n  switch (errorCode) {\n    case 'CERTIFICATE_EXPIRED':\n      return {\n        userMessage: 'Votre certificat numrique a expir. Un nouveau certificat sera gnr automatiquement.',\n        action: 'regenerate_certificate',\n        fallback: 'use_simple_signature'\n      };\n\n    case 'ONECI_DATA_MISSING':\n    case 'ONECI_NOT_VERIFIED':\n      return {\n        userMessage: 'Vrification ONECI incomplte. Veuillez complter votre vrification d\\'identit.',\n        action: 'redirect_verification',\n        redirectUrl: '/verification'\n      };\n\n    case 'PHOTO_MISSING':\n      return {\n        userMessage: 'Photo ONECI manquante. Veuillez complter votre vrification d\\'identit avec photo.',\n        action: 'redirect_verification',\n        redirectUrl: '/verification'\n      };\n\n    case 'API_TIMEOUT':\n    case 'TIMEOUT':\n      return {\n        userMessage: 'Le traitement prend plus de temps que prvu. Vous serez notifi une fois termin.',\n        action: 'async_verification',\n        notification: true\n      };\n\n    case 'API_UNAVAILABLE':\n    case 'SERVICE_UNAVAILABLE':\n    case 503:\n      return {\n        userMessage: 'Service de signature lectronique temporairement indisponible. Veuillez ressayer dans quelques minutes.',\n        action: 'fallback_simple_signature',\n        retryIn: 300 // 5 minutes\n      };\n\n    case 'INVALID_CREDENTIALS':\n    case 401:\n    case 403:\n      return {\n        userMessage: 'Erreur de configuration du service de signature. L\\'quipe technique a t notifie.',\n        action: 'log_and_notify_admin',\n        fallback: 'use_simple_signature'\n      };\n\n    case 'CERTIFICATE_INVALID':\n      return {\n        userMessage: 'Certificat invalide. Un nouveau certificat sera gnr.',\n        action: 'regenerate_certificate'\n      };\n\n    case 'PDF_GENERATION_FAILED':\n      return {\n        userMessage: 'Le document PDF doit tre gnr avant la signature lectronique.',\n        action: 'fallback_simple_signature'\n      };\n\n    case 'SIGNATURES_INCOMPLETE':\n      return {\n        userMessage: 'Les deux parties doivent d\\'abord signer avec signature simple.',\n        action: 'fallback_simple_signature'\n      };\n\n    case 'NETWORK_ERROR':\n      return {\n        userMessage: 'Erreur de connexion. Veuillez vrifier votre connexion Internet.',\n        action: 'retry',\n        retryIn: 5 // 5 seconds\n      };\n\n    default:\n      logger.error('Unhandled CryptoNeo error', { \n        error, \n        errorCode: error?.code || 'UNKNOWN',\n        context: 'cryptoneo-error-handler' \n      });\n      return {\n        userMessage: 'Une erreur inattendue s\\'est produite. Vous pouvez continuer avec la signature simple.',\n        action: 'log_and_notify_admin',\n        fallback: 'use_simple_signature'\n      };\n  }\n};\n\nexport const shouldFallbackToSimpleSignature = (errorCode: string): boolean => {\n  const fallbackCodes = [\n    'API_UNAVAILABLE',\n    'SERVICE_UNAVAILABLE',\n    'INVALID_CREDENTIALS',\n    'PDF_GENERATION_FAILED',\n    'SIGNATURES_INCOMPLETE'\n  ];\n  return fallbackCodes.includes(errorCode);\n};\n","import { useState, useEffect } from 'react';\nimport { useAuth } from '@/hooks/useAuth';\nimport { supabase } from '@/lib/supabase';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Button } from '@/components/ui/button';\nimport { FileText, Shield, Loader2 } from 'lucide-react';\nimport { toast } from '@/hooks/use-toast';\nimport { celebrateLeaseSigned } from '@/utils/confetti';\nimport { DigitalCertificate } from './DigitalCertificate';\nimport { SignatureStatus } from './SignatureStatus';\nimport { canSignElectronically } from '@/lib/signature-validation';\nimport { handleCryptoNeoError } from '@/lib/cryptoneo-error-handler';\n\ninterface Lease {\n  id: string;\n  landlord_id: string;\n  tenant_id: string;\n  landlord_signed_at: string | null;\n  tenant_signed_at: string | null;\n  landlord_cryptoneo_signature_at: string | null;\n  tenant_cryptoneo_signature_at: string | null;\n  is_electronically_signed: boolean;\n}\n\ninterface ElectronicSignatureProps {\n  lease: Lease;\n  userType: 'proprietaire' | 'locataire';\n  onSignatureComplete: () => void;\n}\n\nexport const ElectronicSignature = ({ lease, userType, onSignatureComplete }: ElectronicSignatureProps) => {\n  const { user } = useAuth();\n  const [signatureType, setSignatureType] = useState<'simple' | 'electronic'>('simple');\n  const [signing, setSigning] = useState(false);\n  const [operationId, setOperationId] = useState<string | null>(null);\n  const [canSign, setCanSign] = useState(false);\n  const [validationMessage, setValidationMessage] = useState<string>('');\n\n  const isLandlord = userType === 'proprietaire';\n  const hasSignedSimple = isLandlord ? lease.landlord_signed_at : lease.tenant_signed_at;\n  const hasSignedElectronic = isLandlord \n    ? lease.landlord_cryptoneo_signature_at \n    : lease.tenant_cryptoneo_signature_at;\n\n  useEffect(() => {\n    if (user && signatureType === 'electronic') {\n      validateSignature();\n    }\n  }, [user, signatureType, lease.id]);\n\n  const validateSignature = async () => {\n    if (!user) return;\n\n    const result = await canSignElectronically(user.id, lease.id);\n    setCanSign(result.canSign);\n    if (result.reason) {\n      setValidationMessage(result.reason);\n    }\n  };\n\n  const handleSimpleSign = async () => {\n    setSigning(true);\n    try {\n      const { error } = await supabase\n        .from('leases')\n        .update({\n          [isLandlord ? 'landlord_signed_at' : 'tenant_signed_at']: new Date().toISOString()\n        })\n        .eq('id', lease.id);\n\n      if (error) throw error;\n\n      toast({\n        title: 'Signature enregistre',\n        description: 'Votre signature simple a t enregistre'\n      });\n      onSignatureComplete();\n    } catch (error: any) {\n      toast({\n        title: 'Erreur',\n        description: error.message,\n        variant: 'destructive'\n      });\n    } finally {\n      setSigning(false);\n    }\n  };\n\n  const handleElectronicSign = async () => {\n    if (!canSign) {\n      toast({\n        title: 'Prrequis non remplis',\n        description: validationMessage,\n        variant: 'destructive'\n      });\n      return;\n    }\n\n    setSigning(true);\n\n    try {\n      const { data, error } = await supabase.functions.invoke('cryptoneo-sign-document', {\n        body: {\n          leaseId: lease.id,\n          userType: isLandlord ? 'landlord' : 'tenant'\n        }\n      });\n\n      if (error) {\n        const errorHandling = handleCryptoNeoError(error);\n        toast({\n          title: 'Erreur',\n          description: errorHandling.userMessage,\n          variant: 'destructive'\n        });\n        \n        if (errorHandling.action === 'fallback_simple_signature') {\n          setSignatureType('simple');\n        }\n      } else {\n        setOperationId(data.operationId);\n        toast({\n          title: 'Signature en cours',\n          description: 'Votre signature lectronique est en cours de traitement...'\n        });\n      }\n    } catch (error: any) {\n      const errorHandling = handleCryptoNeoError(error);\n      toast({\n        title: 'Erreur',\n        description: errorHandling.userMessage,\n        variant: 'destructive'\n      });\n    } finally {\n      setSigning(false);\n    }\n  };\n\n  if (lease.is_electronically_signed) {\n    return (\n      <Card>\n        <CardContent className=\"pt-6\">\n          <div className=\"flex items-center gap-3 p-3 bg-green-50 dark:bg-green-950 rounded-lg\">\n            <Shield className=\"h-5 w-5 text-green-600 dark:text-green-400\" />\n            <div>\n              <p className=\"font-medium text-green-900 dark:text-green-100\">\n                Bail sign lectroniquement\n              </p>\n              <p className=\"text-sm text-green-700 dark:text-green-300\">\n                Les deux parties ont sign lectroniquement via CryptoNeo\n              </p>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>Signer le bail</CardTitle>\n      </CardHeader>\n\n      <CardContent>\n        <Tabs value={signatureType} onValueChange={(v) => setSignatureType(v as 'simple' | 'electronic')}>\n          <TabsList className=\"grid w-full grid-cols-2\">\n            <TabsTrigger value=\"simple\">\n              <FileText className=\"h-4 w-4 mr-2\" />\n              Signature Simple\n            </TabsTrigger>\n            <TabsTrigger value=\"electronic\">\n              <Shield className=\"h-4 w-4 mr-2\" />\n              Signature lectronique\n            </TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"simple\" className=\"space-y-4 mt-4\">\n            {hasSignedSimple ? (\n              <p className=\"text-sm text-muted-foreground\">\n                Vous avez sign le {new Date(hasSignedSimple).toLocaleDateString('fr-FR')}\n              </p>\n            ) : (\n              <Button \n                onClick={handleSimpleSign} \n                disabled={signing}\n                className=\"w-full\"\n              >\n                {signing ? (\n                  <>\n                    <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                    Signature en cours...\n                  </>\n                ) : (\n                  'Signer simplement'\n                )}\n              </Button>\n            )}\n          </TabsContent>\n\n          <TabsContent value=\"electronic\" className=\"space-y-4 mt-4\">\n            <DigitalCertificate />\n\n            {hasSignedElectronic ? (\n              <p className=\"text-sm text-green-600 dark:text-green-400\">\n                 Vous avez sign lectroniquement le {new Date(hasSignedElectronic).toLocaleDateString('fr-FR')}\n              </p>\n            ) : (\n              <>\n                <Button \n                  onClick={handleElectronicSign} \n                  disabled={signing || !canSign}\n                  className=\"w-full\"\n                >\n                  {signing ? (\n                    <>\n                      <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                      Signature en cours...\n                    </>\n                  ) : (\n                    <>\n                      <Shield className=\"h-4 w-4 mr-2\" />\n                      Signer avec CryptoNeo\n                    </>\n                  )}\n                </Button>\n\n                {!canSign && validationMessage && (\n                  <p className=\"text-sm text-muted-foreground\">{validationMessage}</p>\n                )}\n              </>\n            )}\n\n            {operationId && (\n              <SignatureStatus \n                operationId={operationId} \n                onComplete={onSignatureComplete}\n              />\n            )}\n          </TabsContent>\n        </Tabs>\n      </CardContent>\n    </Card>\n  );\n};\n","import { useState, useEffect } from 'react';\nimport { useAuth } from '@/hooks/useAuth';\nimport { supabase } from '@/lib/supabase';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { Shield, FileText, CheckCircle, AlertTriangle, Loader2, PlayCircle } from 'lucide-react';\nimport { toast } from '@/hooks/use-toast';\nimport { DigitalCertificate } from '@/components/leases/DigitalCertificate';\nimport { ElectronicSignature } from '@/components/leases/ElectronicSignature';\n\ninterface TestLease {\n  id: string;\n  property_id: string;\n  landlord_id: string;\n  tenant_id: string;\n  monthly_rent: number;\n  landlord_signed_at: string | null;\n  tenant_signed_at: string | null;\n  landlord_cryptoneo_signature_at: string | null;\n  tenant_cryptoneo_signature_at: string | null;\n  is_electronically_signed: boolean;\n  document_url: string | null;\n  status: string;\n}\n\nexport default function TestCryptoNeo() {\n  const { user, profile } = useAuth();\n  const [testLease, setTestLease] = useState<TestLease | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [generatingPdf, setGeneratingPdf] = useState(false);\n  const [certificate, setCertificate] = useState<any>(null);\n\n  useEffect(() => {\n    loadTestData();\n  }, [user]);\n\n  const loadTestData = async () => {\n    if (!user) return;\n\n    setLoading(true);\n\n    // Chercher un bail o l'utilisateur est impliqu\n    const { data: leases } = await supabase\n      .from('leases')\n      .select('*')\n      .or(`landlord_id.eq.${user.id},tenant_id.eq.${user.id}`)\n      .order('created_at', { ascending: false })\n      .limit(1);\n\n    if (leases && leases.length > 0) {\n      setTestLease(leases[0] as TestLease);\n    }\n\n    // Charger le certificat de l'utilisateur\n    const { data: cert } = await supabase\n      .from('digital_certificates')\n      .select('*')\n      .eq('user_id', user.id)\n      .maybeSingle();\n\n    setCertificate(cert);\n    setLoading(false);\n  };\n\n  const handleGeneratePdf = async () => {\n    if (!testLease) return;\n\n    setGeneratingPdf(true);\n\n    try {\n      const { data, error } = await supabase.functions.invoke('generate-lease-pdf', {\n        body: { leaseId: testLease.id }\n      });\n\n      if (error) throw error;\n\n      toast({\n        title: 'PDF gnr',\n        description: 'Le PDF du bail a t gnr avec succs'\n      });\n\n      // Recharger le bail pour voir le document_url\n      loadTestData();\n    } catch (error: any) {\n      toast({\n        title: 'Erreur',\n        description: error.message || 'chec de la gnration du PDF',\n        variant: 'destructive'\n      });\n    } finally {\n      setGeneratingPdf(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"container mx-auto py-8\">\n        <div className=\"flex items-center justify-center\">\n          <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n        </div>\n      </div>\n    );\n  }\n\n  if (!testLease) {\n    return (\n      <div className=\"container mx-auto py-8\">\n        <Alert>\n          <AlertTriangle className=\"h-4 w-4\" />\n          <AlertDescription>\n            Aucun bail trouv pour votre compte. Crez d'abord un bail via la page \"Baux\" ou assurez-vous d'tre propritaire ou locataire d'un bail existant.\n          </AlertDescription>\n        </Alert>\n      </div>\n    );\n  }\n\n  const userType = testLease.landlord_id === user?.id ? 'proprietaire' : 'locataire';\n\n  return (\n    <div className=\"container mx-auto py-8 space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold flex items-center gap-3\">\n            <PlayCircle className=\"h-8 w-8 text-primary\" />\n            Test CryptoNeo\n          </h1>\n          <p className=\"text-muted-foreground mt-2\">\n            Page de test pour valider le flux de signature lectronique\n          </p>\n        </div>\n      </div>\n\n      {/* tat du bail */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Bail de test</CardTitle>\n          <CardDescription>ID: {testLease.id}</CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"grid grid-cols-2 gap-4 text-sm\">\n            <div>\n              <p className=\"text-muted-foreground\">Votre rle</p>\n              <p className=\"font-medium\">{userType === 'proprietaire' ? 'Propritaire' : 'Locataire'}</p>\n            </div>\n            <div>\n              <p className=\"text-muted-foreground\">Loyer mensuel</p>\n              <p className=\"font-medium\">{testLease.monthly_rent.toLocaleString()} FCFA</p>\n            </div>\n            <div>\n              <p className=\"text-muted-foreground\">Statut</p>\n              <p className=\"font-medium\">{testLease.status}</p>\n            </div>\n            <div>\n              <p className=\"text-muted-foreground\">PDF gnr</p>\n              <p className=\"font-medium\">{testLease.document_url ? ' Oui' : ' Non'}</p>\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center gap-2\">\n              {testLease.landlord_signed_at ? (\n                <CheckCircle className=\"h-4 w-4 text-green-600\" />\n              ) : (\n                <div className=\"h-4 w-4 rounded-full border-2 border-muted\" />\n              )}\n              <span className=\"text-sm\">Signature simple propritaire</span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              {testLease.tenant_signed_at ? (\n                <CheckCircle className=\"h-4 w-4 text-green-600\" />\n              ) : (\n                <div className=\"h-4 w-4 rounded-full border-2 border-muted\" />\n              )}\n              <span className=\"text-sm\">Signature simple locataire</span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              {testLease.landlord_cryptoneo_signature_at ? (\n                <CheckCircle className=\"h-4 w-4 text-green-600\" />\n              ) : (\n                <div className=\"h-4 w-4 rounded-full border-2 border-muted\" />\n              )}\n              <span className=\"text-sm\">Signature lectronique propritaire</span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              {testLease.tenant_cryptoneo_signature_at ? (\n                <CheckCircle className=\"h-4 w-4 text-green-600\" />\n              ) : (\n                <div className=\"h-4 w-4 rounded-full border-2 border-muted\" />\n              )}\n              <span className=\"text-sm\">Signature lectronique locataire</span>\n            </div>\n          </div>\n\n          {!testLease.document_url && (\n            <Button\n              onClick={handleGeneratePdf}\n              disabled={generatingPdf}\n              className=\"w-full\"\n            >\n              {generatingPdf ? (\n                <>\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                  Gnration du PDF...\n                </>\n              ) : (\n                <>\n                  <FileText className=\"h-4 w-4 mr-2\" />\n                  Gnrer le PDF du bail\n                </>\n              )}\n            </Button>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* tat du certificat */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Votre certificat numrique</CardTitle>\n        </CardHeader>\n        <CardContent>\n          {certificate ? (\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center gap-2\">\n                <CheckCircle className=\"h-5 w-5 text-green-600\" />\n                <span className=\"font-medium\">Certificat {certificate.certificate_status}</span>\n              </div>\n              <p className=\"text-sm text-muted-foreground\">\n                ID: {certificate.certificate_id}\n              </p>\n              <p className=\"text-sm text-muted-foreground\">\n                Expire: {new Date(certificate.expires_at).toLocaleDateString('fr-FR')}\n              </p>\n            </div>\n          ) : (\n            <Alert>\n              <AlertTriangle className=\"h-4 w-4\" />\n              <AlertDescription>\n                Aucun certificat numrique. Utilisez la section ci-dessous pour en gnrer un.\n              </AlertDescription>\n            </Alert>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Composant de signature */}\n      <ElectronicSignature\n        lease={testLease}\n        userType={userType}\n        onSignatureComplete={loadTestData}\n      />\n\n      {/* Instructions */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Instructions de test</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-2 text-sm\">\n          <p className=\"font-medium\">tapes pour tester CryptoNeo :</p>\n          <ol className=\"list-decimal list-inside space-y-1 text-muted-foreground\">\n            <li>Assurez-vous que votre identit ONECI est vrifie</li>\n            <li>Gnrez le PDF du bail si ce n'est pas dj fait</li>\n            <li>Signez avec \"Signature Simple\" (les deux parties)</li>\n            <li>Passez  l'onglet \"Signature lectronique\"</li>\n            <li>Gnrez votre certificat numrique CryptoNeo</li>\n            <li>Signez lectroniquement avec CryptoNeo</li>\n            <li>Vrifiez les logs dans la base de donnes</li>\n          </ol>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","import Navbar from \"@/components/Navbar\";\nimport Footer from \"@/components/Footer\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from \"@/components/ui/accordion\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { AkanPattern } from \"@/components/ui/african-patterns\";\nimport { \n  Search, Home, Shield, FileText, MessageSquare, CreditCard, \n  CheckCircle, AlertCircle, Clock, Users, Mail, Phone, \n  Building2, UserCheck, HelpCircle, ExternalLink\n} from \"lucide-react\";\nimport { Link } from \"react-router-dom\";\nimport { useState } from \"react\";\nimport { Input } from \"@/components/ui/input\";\n\nconst Guide = () => {\n  const [faqSearch, setFaqSearch] = useState('');\n\n  const filterFAQItems = (items: Array<{id: string, question: string, answer: string}>) => {\n    if (!faqSearch.trim()) return items;\n    const searchLower = faqSearch.toLowerCase();\n    return items.filter(item => \n      item.question.toLowerCase().includes(searchLower) ||\n      item.answer.toLowerCase().includes(searchLower)\n    );\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-gradient-to-b from-background to-muted/20\">\n      <Navbar />\n      <main className=\"flex-1 pt-24\">\n        {/* Hero Section */}\n        <section className=\"bg-gradient-to-r from-primary/10 via-accent/10 to-primary/10 py-10 mb-12 relative\">\n          <AkanPattern />\n          <div className=\"container mx-auto px-4 text-center relative z-10\">\n            <Badge variant=\"secondary\" className=\"mb-4\">Centre d'aide</Badge>\n            <h1 className=\"text-h1 mb-4\">\n              Comment pouvons-nous <span className=\"text-gradient-secondary\">vous aider</span> ?\n            </h1>\n            <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto mb-8\">\n              Guides dtaills, FAQ et support pour profiter pleinement de Mon Toit\n            </p>\n          </div>\n        </section>\n\n        <div className=\"container mx-auto px-4 pb-16\">\n          {/* Quick Links */}\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-12\">\n            <Link to=\"/recherche\">\n              <Card className=\"hover:shadow-lg transition-shadow cursor-pointer h-full border-primary/20 hover:border-primary/40\">\n                <CardHeader className=\"text-center\">\n                  <Search className=\"h-8 w-8 mx-auto mb-2 text-primary\" />\n                  <CardTitle className=\"text-sm\">Rechercher un bien</CardTitle>\n                </CardHeader>\n              </Card>\n            </Link>\n            <Link to=\"/publier\">\n              <Card className=\"hover:shadow-lg transition-shadow cursor-pointer h-full border-primary/20 hover:border-primary/40\">\n                <CardHeader className=\"text-center\">\n                  <Home className=\"h-8 w-8 mx-auto mb-2 text-primary\" />\n                  <CardTitle className=\"text-sm\">Publier une annonce</CardTitle>\n                </CardHeader>\n              </Card>\n            </Link>\n            <Link to=\"/verification\">\n              <Card className=\"hover:shadow-lg transition-shadow cursor-pointer h-full border-primary/20 hover:border-primary/40\">\n                <CardHeader className=\"text-center\">\n                  <Shield className=\"h-8 w-8 mx-auto mb-2 text-primary\" />\n                  <CardTitle className=\"text-sm\">Se faire certifier</CardTitle>\n                </CardHeader>\n              </Card>\n            </Link>\n            <Link to=\"/messages\">\n              <Card className=\"hover:shadow-lg transition-shadow cursor-pointer h-full border-primary/20 hover:border-primary/40\">\n                <CardHeader className=\"text-center\">\n                  <MessageSquare className=\"h-8 w-8 mx-auto mb-2 text-primary\" />\n                  <CardTitle className=\"text-sm\">Contacter le support</CardTitle>\n                </CardHeader>\n              </Card>\n            </Link>\n          </div>\n\n          {/* Guides par rle */}\n          <Tabs defaultValue=\"locataire\" className=\"w-full mb-16\">\n            <TabsList className=\"grid w-full grid-cols-3 mb-8\">\n              <TabsTrigger value=\"locataire\" className=\"gap-2\">\n                <Users className=\"h-4 w-4\" />\n                Locataire\n              </TabsTrigger>\n              <TabsTrigger value=\"proprietaire\" className=\"gap-2\">\n                <Home className=\"h-4 w-4\" />\n                Propritaire\n              </TabsTrigger>\n              <TabsTrigger value=\"agence\" className=\"gap-2\">\n                <Building2 className=\"h-4 w-4\" />\n                Agence\n              </TabsTrigger>\n            </TabsList>\n\n            {/* Locataire Guide */}\n            <TabsContent value=\"locataire\" className=\"space-y-6\">\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <UserCheck className=\"h-5 w-5 text-primary\" />\n                    Dmarrer en tant que locataire\n                  </CardTitle>\n                  <CardDescription>\n                    Gratuit  100% - Trouvez votre logement idal\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"space-y-3\">\n                    <h3 className=\"font-semibold\">tape 1 : Crer votre compte</h3>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Inscrivez-vous gratuitement avec votre email. Slectionnez \"Locataire\" comme type de compte.\n                    </p>\n                  </div>\n                  <div className=\"space-y-3\">\n                    <h3 className=\"font-semibold\">tape 2 : Rechercher un logement</h3>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Utilisez la barre de recherche ou naviguez sur la carte interactive. Filtrez par prix, quartier, type de bien.\n                    </p>\n                  </div>\n                  <div className=\"space-y-3\">\n                    <h3 className=\"font-semibold\">tape 3 : Contacter le propritaire</h3>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Cliquez sur \"Contacter\" pour envoyer un message. Le propritaire recevra une notification.\n                    </p>\n                  </div>\n                  <div className=\"space-y-3\">\n                    <h3 className=\"font-semibold\">tape 4 : Vrification ANSUT (Recommand)</h3>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Compltez votre vrification d'identit (ONECI/CNI) et obtenez votre badge certifi ANSUT pour augmenter vos chances.\n                    </p>\n                  </div>\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            {/* Propritaire Guide */}\n            <TabsContent value=\"proprietaire\" className=\"space-y-6\">\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Building2 className=\"h-5 w-5 text-primary\" />\n                    Publier votre bien\n                  </CardTitle>\n                  <CardDescription>\n                    Louez en toute scurit avec ANSUT\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"space-y-3\">\n                    <h3 className=\"font-semibold\">tape 1 : Crer votre compte propritaire</h3>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Inscrivez-vous et slectionnez \"Propritaire\" ou \"Agence immobilire\".\n                    </p>\n                  </div>\n                  <div className=\"space-y-3\">\n                    <h3 className=\"font-semibold\">tape 2 : Publier votre annonce</h3>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Remplissez les informations du bien : adresse, prix, photos, caractristiques. Ajoutez des photos de qualit et des vidos si possible.\n                    </p>\n                  </div>\n                  <div className=\"space-y-3\">\n                    <h3 className=\"font-semibold\">tape 3 : Validation de l'annonce</h3>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Votre annonce sera vrifie par ANSUT sous 24-48h. Vous recevrez une notification.\n                    </p>\n                  </div>\n                  <div className=\"space-y-3\">\n                    <h3 className=\"font-semibold\">tape 4 : Grer les candidatures</h3>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Consultez les profils des candidats certifis ANSUT et leurs dossiers. Communiquez via la messagerie scurise.\n                    </p>\n                  </div>\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            {/* Agence Guide */}\n            <TabsContent value=\"agence\" className=\"space-y-6\">\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Shield className=\"h-5 w-5 text-primary\" />\n                    Grer vos mandats\n                  </CardTitle>\n                  <CardDescription>\n                    Solution professionnelle pour agences immobilires\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"space-y-3\">\n                    <h3 className=\"font-semibold\">Compte agence certifi</h3>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Crez un compte agence et compltez la vrification professionnelle ANSUT.\n                    </p>\n                  </div>\n                  <div className=\"space-y-3\">\n                    <h3 className=\"font-semibold\">Gestion multi-propritaires</h3>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Grez les biens de plusieurs propritaires depuis un seul tableau de bord.\n                    </p>\n                  </div>\n                  <div className=\"space-y-3\">\n                    <h3 className=\"font-semibold\">Outils professionnels</h3>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Accdez aux statistiques avances, reporting, et gestion des commissions.\n                    </p>\n                  </div>\n                </CardContent>\n              </Card>\n            </TabsContent>\n          </Tabs>\n\n          {/* FAQ Section */}\n          <div className=\"mb-16\">\n            <div className=\"text-center mb-8\">\n              <h2 className=\"text-3xl font-bold mb-2\">Questions frquentes</h2>\n              <p className=\"text-muted-foreground\">Tout ce que vous devez savoir sur Mon Toit</p>\n            </div>\n            \n            {/* Barre de recherche FAQ */}\n            <div className=\"max-w-2xl mx-auto mb-8\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground\" />\n                <Input\n                  type=\"text\"\n                  placeholder=\"Rechercher dans la FAQ (ex: certification, paiement, compte...)\"\n                  value={faqSearch}\n                  onChange={(e) => setFaqSearch(e.target.value)}\n                  className=\"pl-10 h-12 text-base\"\n                />\n              </div>\n              {faqSearch && (\n                <div className=\"flex items-center gap-2 mt-2\">\n                  <Button \n                    variant=\"ghost\" \n                    size=\"sm\" \n                    onClick={() => setFaqSearch('')}\n                    className=\"h-7 text-xs\"\n                  >\n                    Effacer la recherche\n                  </Button>\n                </div>\n              )}\n            </div>\n            \n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8\">\n              {/* Catgorie: Compte & Inscription */}\n              {(() => {\n                const compteItems = [\n                  { id: 'q1', question: 'Comment crer un compte ?', answer: 'Cliquez sur \"Se connecter / S\\'inscrire\" en haut  droite, choisissez votre type de profil (Locataire, Propritaire ou Agence), puis remplissez le formulaire. L\\'inscription est gratuite et ne prend que 2 minutes.' },\n                  { id: 'q2', question: 'Puis-je avoir plusieurs rles ?', answer: 'Oui ! Vous pouvez basculer entre plusieurs rles depuis votre profil. Par exemple, tre  la fois locataire et propritaire. Allez dans \"Mon profil\" puis \"Gestion des rles\".' },\n                  { id: 'q3', question: 'Comment rinitialiser mon mot de passe ?', answer: 'Sur la page de connexion, cliquez sur \"Mot de passe oubli ?\" et suivez les instructions envoyes par email. Assurez-vous de vrifier vos spams.' }\n                ];\n                const filteredCompteItems = filterFAQItems(compteItems);\n                \n                return filteredCompteItems.length > 0 ? (\n                  <Card>\n                    <CardHeader>\n                      <div className=\"flex items-center gap-2 mb-2\">\n                        <Users className=\"h-5 w-5 text-primary\" />\n                        <CardTitle>Compte & Inscription</CardTitle>\n                      </div>\n                    </CardHeader>\n                    <CardContent>\n                      <Accordion type=\"single\" collapsible>\n                        {filteredCompteItems.map(item => (\n                          <AccordionItem key={item.id} value={item.id}>\n                            <AccordionTrigger>{item.question}</AccordionTrigger>\n                            <AccordionContent>{item.answer}</AccordionContent>\n                          </AccordionItem>\n                        ))}\n                      </Accordion>\n                    </CardContent>\n                  </Card>\n                ) : null;\n              })()}\n\n              {/* Catgorie: Certification ANSUT */}\n              {(() => {\n                const certifItems = [\n                  { id: 'c1', question: 'Qu\\'est-ce que la certification ANSUT ?', answer: 'C\\'est une vrification officielle de votre identit par l\\'ANSUT (Agence Nationale des Systmes d\\'Urgence et de Tlcommunications). Elle garantit votre scurit et augmente votre crdibilit sur la plateforme.' },\n                  { id: 'c2', question: 'La certification est-elle obligatoire ?', answer: 'Non, mais elle est fortement recommande ! Les profils certifis ont accs  plus de fonctionnalits et inspirent davantage confiance. Pour les propritaires, c\\'est indispensable pour publier des annonces.' },\n                  { id: 'c3', question: 'Combien cote la certification ?', answer: 'La certification ANSUT est totalement GRATUITE pour tous les utilisateurs. C\\'est un service public financ par l\\'tat ivoirien.' },\n                  { id: 'c4', question: 'Combien de temps prend la vrification ?', answer: 'En moyenne 24-48 heures ouvres. Vous recevrez un email ds que votre dossier sera trait. Assurez-vous que vos documents sont clairs et lisibles pour acclrer le processus.' }\n                ];\n                const filteredCertifItems = filterFAQItems(certifItems);\n                \n                return filteredCertifItems.length > 0 ? (\n                  <Card>\n                    <CardHeader>\n                      <div className=\"flex items-center gap-2 mb-2\">\n                        <Shield className=\"h-5 w-5 text-primary\" />\n                        <CardTitle>Certification ANSUT</CardTitle>\n                      </div>\n                    </CardHeader>\n                    <CardContent>\n                      <Accordion type=\"single\" collapsible>\n                        {filteredCertifItems.map(item => (\n                          <AccordionItem key={item.id} value={item.id}>\n                            <AccordionTrigger>{item.question}</AccordionTrigger>\n                            <AccordionContent>{item.answer}</AccordionContent>\n                          </AccordionItem>\n                        ))}\n                      </Accordion>\n                    </CardContent>\n                  </Card>\n                ) : null;\n              })()}\n\n              {/* Catgorie: Recherche & Location */}\n              <Card>\n                <CardHeader>\n                  <div className=\"flex items-center gap-2 mb-2\">\n                    <Search className=\"h-5 w-5 text-primary\" />\n                    <CardTitle>Recherche & Location</CardTitle>\n                  </div>\n                </CardHeader>\n                <CardContent>\n                  <Accordion type=\"single\" collapsible>\n                    <AccordionItem value=\"r1\">\n                      <AccordionTrigger>Comment rechercher un bien ?</AccordionTrigger>\n                      <AccordionContent>\n                        Utilisez la barre de recherche en haut de la page ou allez sur \"/recherche\". Vous pouvez filtrer par ville, quartier, type de bien, budget, nombre de pices, etc. Utilisez la carte interactive pour explorer visuellement.\n                      </AccordionContent>\n                    </AccordionItem>\n                    <AccordionItem value=\"r2\">\n                      <AccordionTrigger>Comment postuler  une annonce ?</AccordionTrigger>\n                      <AccordionContent>\n                        Sur la page du bien, cliquez sur \"Postuler\". Remplissez le formulaire avec vos informations et tlchargez vos justificatifs (pice d'identit, bulletin de salaire, etc.). Le propritaire sera notifi.\n                      </AccordionContent>\n                    </AccordionItem>\n                    <AccordionItem value=\"r3\">\n                      <AccordionTrigger>Puis-je visiter un bien avant de postuler ?</AccordionTrigger>\n                      <AccordionContent>\n                        Oui ! Contactez directement le propritaire via la messagerie intgre pour planifier une visite. Vous pouvez aussi poser toutes vos questions avant de postuler.\n                      </AccordionContent>\n                    </AccordionItem>\n                  </Accordion>\n                </CardContent>\n              </Card>\n\n              {/* Catgorie: Paiements & Tarifs */}\n              <Card>\n                <CardHeader>\n                  <div className=\"flex items-center gap-2 mb-2\">\n                    <CreditCard className=\"h-5 w-5 text-primary\" />\n                    <CardTitle>Paiements & Tarifs</CardTitle>\n                  </div>\n                </CardHeader>\n                <CardContent>\n                  <Accordion type=\"single\" collapsible>\n                    <AccordionItem value=\"p1\">\n                      <AccordionTrigger>La plateforme est-elle payante ?</AccordionTrigger>\n                      <AccordionContent>\n                        <strong>Pour les locataires :</strong> 100% GRATUIT, aucun frais.<br/>\n                        <strong>Pour les propritaires/agences :</strong> Commission de 10% uniquement en cas de location russie. Aucun frais pour publier ou grer vos annonces.\n                      </AccordionContent>\n                    </AccordionItem>\n                    <AccordionItem value=\"p2\">\n                      <AccordionTrigger>Quels moyens de paiement acceptez-vous ?</AccordionTrigger>\n                      <AccordionContent>\n                        Nous acceptons Orange Money, MTN Mobile Money, Wave et Moov Money. Les paiements sont 100% scuriss et chiffrs.\n                      </AccordionContent>\n                    </AccordionItem>\n                    <AccordionItem value=\"p3\">\n                      <AccordionTrigger>Quand la commission est-elle prleve ?</AccordionTrigger>\n                      <AccordionContent>\n                        La commission de 10% n'est facture qu'aprs signature officielle du bail et confirmation de la location. Si le locataire se rtracte, aucun frais n'est appliqu.\n                      </AccordionContent>\n                    </AccordionItem>\n                  </Accordion>\n                </CardContent>\n              </Card>\n\n              {/* Catgorie: Scurit & Confidentialit */}\n              <Card>\n                <CardHeader>\n                  <div className=\"flex items-center gap-2 mb-2\">\n                    <Shield className=\"h-5 w-5 text-primary\" />\n                    <CardTitle>Scurit & Confidentialit</CardTitle>\n                  </div>\n                </CardHeader>\n                <CardContent>\n                  <Accordion type=\"single\" collapsible>\n                    <AccordionItem value=\"s1\">\n                      <AccordionTrigger>Mes donnes sont-elles protges ?</AccordionTrigger>\n                      <AccordionContent>\n                        Absolument. Nous respectons la loi ivoirienne 2013-450 sur la protection des donnes. Vos informations personnelles sont chiffres et jamais partages sans votre consentement. Voir notre <Link to=\"/confidentialite\" className=\"text-primary underline\">Politique de confidentialit</Link>.\n                      </AccordionContent>\n                    </AccordionItem>\n                    <AccordionItem value=\"s2\">\n                      <AccordionTrigger>Comment signaler une annonce frauduleuse ?</AccordionTrigger>\n                      <AccordionContent>\n                        Sur chaque annonce, cliquez sur &quot;Signaler&quot; et indiquez la raison. Notre quipe de modration vrifiera dans les 24h. En cas d&apos;urgence, contactez-nous  contact@montoit.ci.\n                      </AccordionContent>\n                    </AccordionItem>\n                    <AccordionItem value=\"s3\">\n                      <AccordionTrigger>Puis-je supprimer mon compte ?</AccordionTrigger>\n                      <AccordionContent>\n                        Oui, allez dans &quot;Mon profil&quot; &gt; &quot;Paramtres&quot; &gt; &quot;Supprimer mon compte&quot;. Attention : cette action est irrversible et supprimera toutes vos donnes.\n                      </AccordionContent>\n                    </AccordionItem>\n                  </Accordion>\n                </CardContent>\n              </Card>\n\n              {/* Catgorie: Problmes techniques */}\n              <Card>\n                <CardHeader>\n                  <div className=\"flex items-center gap-2 mb-2\">\n                    <AlertCircle className=\"h-5 w-5 text-primary\" />\n                    <CardTitle>Problmes techniques</CardTitle>\n                  </div>\n                </CardHeader>\n                <CardContent>\n                  <Accordion type=\"single\" collapsible>\n                    <AccordionItem value=\"t1\">\n                      <AccordionTrigger>Je ne reois pas d&apos;emails de notification</AccordionTrigger>\n                      <AccordionContent>\n                        Vrifiez d&apos;abord vos spams/courriers indsirables. Ajoutez contact@montoit.ci  vos contacts. Si le problme persiste, vrifiez vos prfrences de notification dans &quot;Mon profil&quot; &gt; &quot;Notifications&quot;.\n                      </AccordionContent>\n                    </AccordionItem>\n                    <AccordionItem value=\"t2\">\n                      <AccordionTrigger>L&apos;upload de photos ne fonctionne pas</AccordionTrigger>\n                      <AccordionContent>\n                        Assurez-vous que vos photos sont au format JPG ou PNG et font moins de 5 Mo chacune. Essayez de compresser vos images ou d&apos;utiliser un autre navigateur (Chrome ou Firefox recommands).\n                      </AccordionContent>\n                    </AccordionItem>\n                    <AccordionItem value=\"t3\">\n                      <AccordionTrigger>La carte ne s&apos;affiche pas correctement</AccordionTrigger>\n                      <AccordionContent>\n                        Autorisez l&apos;accs  votre position dans votre navigateur. Effacez le cache de votre navigateur et rechargez la page. Si le problme persiste, contactez le support.\n                      </AccordionContent>\n                    </AccordionItem>\n                  </Accordion>\n                </CardContent>\n              </Card>\n            </div>\n          </div>\n\n          {/* Ressources supplmentaires */}\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12\">\n            <Card className=\"text-center hover:shadow-lg transition-shadow\">\n              <CardHeader>\n                <FileText className=\"h-12 w-12 mx-auto mb-3 text-primary\" />\n                <CardTitle>Documentation complte</CardTitle>\n                <CardDescription>Guides dtaills pour chaque fonctionnalit</CardDescription>\n              </CardHeader>\n              <CardContent>\n                <Button variant=\"outline\" asChild className=\"w-full\">\n                  <Link to=\"/comment-ca-marche\">\n                    Voir la documentation\n                    <ExternalLink className=\"ml-2 h-4 w-4\" />\n                  </Link>\n                </Button>\n              </CardContent>\n            </Card>\n\n            <Card className=\"text-center hover:shadow-lg transition-shadow\">\n              <CardHeader>\n                <Shield className=\"h-12 w-12 mx-auto mb-3 text-primary\" />\n                <CardTitle>FAQ Certification</CardTitle>\n                <CardDescription>Tout savoir sur la certification ANSUT</CardDescription>\n              </CardHeader>\n              <CardContent>\n                <Button variant=\"outline\" asChild className=\"w-full\">\n                  <Link to=\"/certification-faq\">\n                    Consulter la FAQ\n                    <ExternalLink className=\"ml-2 h-4 w-4\" />\n                  </Link>\n                </Button>\n              </CardContent>\n            </Card>\n\n            <Card className=\"text-center hover:shadow-lg transition-shadow\">\n              <CardHeader>\n                <Clock className=\"h-12 w-12 mx-auto mb-3 text-primary\" />\n                <CardTitle>Statut du service</CardTitle>\n                <CardDescription>Incidents et maintenance planifie</CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"flex items-center justify-center gap-2 mb-4\">\n                  <CheckCircle className=\"h-5 w-5 text-success\" />\n                  <span className=\"text-sm font-medium text-success\">Tous les services oprationnels</span>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n          \n          {/* Contact Section */}\n          <Card className=\"bg-gradient-to-r from-primary/10 via-accent/10 to-primary/10 border-primary/30\">\n            <CardHeader className=\"text-center\">\n              <CardTitle className=\"text-3xl mb-3\">Vous ne trouvez pas de rponse ?</CardTitle>\n              <CardDescription className=\"text-base\">Notre quipe support est disponible pour vous aider</CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-2xl mx-auto mb-6\">\n                <div className=\"flex items-start gap-4 p-4 bg-background rounded-lg\">\n                  <Mail className=\"h-6 w-6 text-primary flex-shrink-0 mt-1\" />\n                  <div>\n                    <p className=\"font-semibold mb-1\">Email Support</p>\n                    <a href=\"mailto:contact@montoit.ci\" className=\"text-primary hover:underline\">\n                      contact@montoit.ci\n                    </a>\n                    <p className=\"text-sm text-muted-foreground mt-1\">Rponse sous 24h</p>\n                  </div>\n                </div>\n                \n                <div className=\"flex items-start gap-4 p-4 bg-background rounded-lg\">\n                  <Phone className=\"h-6 w-6 text-primary flex-shrink-0 mt-1\" />\n                  <div>\n                    <p className=\"font-semibold mb-1\">Tlphone</p>\n                    <p className=\"text-foreground\">+225 27 XX XX XX XX</p>\n                    <p className=\"text-sm text-muted-foreground mt-1\">Lun-Ven : 8h - 18h</p>\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"text-center\">\n                <Button size=\"lg\" asChild>\n                  <Link to=\"/messages\">\n                    <MessageSquare className=\"mr-2 h-5 w-5\" />\n                    Ouvrir une conversation\n                  </Link>\n                </Button>\n                <p className=\"text-sm text-muted-foreground mt-3\">\n                  Temps de rponse moyen : <strong>2 heures</strong>\n                </p>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </main>\n      <Footer />\n    </div>\n  );\n};\n\nexport default Guide;\n","import { lazy, Suspense } from \"react\";\nimport Navbar from \"@/components/Navbar\";\nimport Footer from \"@/components/Footer\";\nimport { DynamicBreadcrumb } from \"@/components/navigation/DynamicBreadcrumb\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { LazyIllustration } from \"@/components/illustrations/LazyIllustration\";\nimport { getIllustrationPath } from \"@/lib/utils\";\nimport { KentePattern } from \"@/components/ui/african-patterns\";\n\n// Lazy load des composants lourds\nconst ExploreMap = lazy(() => import(\"@/components/ExploreMap\"));\nconst FeaturedProperties = lazy(() => import(\"@/components/FeaturedProperties\"));\n\nconst Explorer = () => {\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <Navbar />\n      <main className=\"flex-1 pt-24\">\n        <div className=\"container mx-auto px-4 py-8\">\n          <div className=\"max-w-7xl mx-auto\">\n            <DynamicBreadcrumb />\n            \n            <div className=\"text-center mb-12 animate-fade-in relative\">\n              <KentePattern />\n              <div className=\"relative z-10\">\n                <h1 className=\"text-h1 mb-4\">\n                  Explorez les biens <span className=\"text-gradient-primary\">disponibles</span>\n                </h1>\n                <p className=\"text-body-lg text-muted-foreground max-w-2xl mx-auto\">\n                  Dcouvrez tous nos biens immobiliers certifis  travers la Cte d'Ivoire\n                </p>\n              </div>\n            </div>\n\n            {/* Bannire quartier */}\n            <section className=\"mb-8\">\n              <div className=\"relative h-40 md:h-48 rounded-lg overflow-hidden shadow-lg\">\n                <LazyIllustration \n                  src={getIllustrationPath('abidjan-neighborhood')!}\n                  alt=\"Quartier d'Abidjan\"\n                  className=\"w-full h-full object-cover\"\n                />\n                <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex items-end\">\n                  <div className=\"text-white p-6\">\n                    <h2 className=\"text-2xl font-bold\">Explorez les quartiers d'Abidjan</h2>\n                    <p className=\"text-sm opacity-90\">Cocody, Plateau, Marcory et plus encore</p>\n                  </div>\n                </div>\n              </div>\n            </section>\n\n            {/* Carte interactive */}\n            <Suspense fallback={<Skeleton className=\"h-96 w-full rounded-lg mb-16\" />}>\n              <div className=\"mb-16 animate-fade-in\">\n                <ExploreMap />\n              </div>\n            </Suspense>\n\n            {/* Tous les biens */}\n            <Suspense fallback={\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {[1, 2, 3, 4, 5, 6].map((i) => (\n                  <div key={i} className=\"space-y-4\">\n                    <Skeleton className=\"h-64 w-full rounded-lg\" />\n                    <Skeleton className=\"h-4 w-3/4\" />\n                    <Skeleton className=\"h-4 w-1/2\" />\n                  </div>\n                ))}\n              </div>\n            }>\n              <div className=\"animate-fade-in\">\n                <FeaturedProperties />\n              </div>\n            </Suspense>\n          </div>\n        </div>\n      </main>\n      <Footer />\n    </div>\n  );\n};\n\nexport default Explorer;\n","import { User, Home, Building2, ShieldCheck, FileCheck, Wallet } from \"lucide-react\";\nimport { Link } from \"react-router-dom\";\nimport { Button } from \"./ui/button\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"./ui/tabs\";\nimport { LazyIllustration } from \"@/components/illustrations/LazyIllustration\";\nimport { getIllustrationPath } from \"@/lib/utils\";\n\nconst journeys = [\n  {\n    icon: User,\n    title: \"Locataire\",\n    color: \"from-blue-500 to-blue-600\",\n    illustrationKey: 'apartment-visit' as const,\n    steps: [\n      {\n        number: \"1\",\n        icon: User,\n        title: \"Crez votre profil\",\n        description: \"Inscrivez-vous et compltez vos informations personnelles\"\n      },\n      {\n        number: \"2\",\n        icon: ShieldCheck,\n        title: \"Faites-vous certifier ANSUT\",\n        description: \"Vrification biomtrique et constitution de votre dossier digital\"\n      },\n      {\n        number: \"3\",\n        icon: FileCheck,\n        title: \"Postulez en 1 clic\",\n        description: \"Candidatez aux biens avec votre profil certifi\"\n      }\n    ],\n    cta: {\n      text: \"Crer mon profil locataire\",\n      link: \"/auth?type=tenant\"\n    }\n  },\n  {\n    icon: Home,\n    title: \"Propritaire\",\n    color: \"from-primary to-primary-600\",\n    illustrationKey: 'modern-living-room' as const,\n    steps: [\n      {\n        number: \"1\",\n        icon: Home,\n        title: \"Publiez votre bien\",\n        description: \"Ajoutez photos, description et caractristiques\"\n      },\n      {\n        number: \"2\",\n        icon: User,\n        title: \"Recevez des candidatures certifies\",\n        description: \"Ne traitez que des dossiers vrifis avec scoring\"\n      },\n      {\n        number: \"3\",\n        icon: Wallet,\n        title: \"Signez & encaissez en ligne\",\n        description: \"Bail digital + paiements Mobile Money scuriss\"\n      }\n    ],\n    cta: {\n      text: \"Publier un bien\",\n      link: \"/publier\"\n    }\n  },\n  {\n    icon: Building2,\n    title: \"Agence\",\n    color: \"from-secondary to-secondary-600\",\n    illustrationKey: 'co-ownership-meeting' as const,\n    steps: [\n      {\n        number: \"1\",\n        icon: Building2,\n        title: \"Crez votre profil d'agence\",\n        description: \"Inscription professionnelle avec documents officiels\"\n      },\n      {\n        number: \"2\",\n        icon: Home,\n        title: \"Grez plusieurs proprits\",\n        description: \"Tableau de bord centralis pour tous vos biens\"\n      },\n      {\n        number: \"3\",\n        icon: FileCheck,\n        title: \"Signez des contrats digitaux\",\n        description: \"Automatisez la gestion locative de A  Z\"\n      }\n    ],\n    cta: {\n      text: \"Crer mon compte agence\",\n      link: \"/auth?type=agency\"\n    }\n  }\n];\n\nconst HowItWorks = () => {\n  return (\n    <section id=\"comment-ca-marche\" className=\"py-12 md:py-14 bg-gradient-to-br from-primary/5 via-background to-secondary/5 relative overflow-hidden\">\n      {/* Decorative elements */}\n      <div className=\"absolute top-0 right-0 w-96 h-96 bg-primary/5 rounded-full blur-3xl -z-0\" />\n      <div className=\"absolute bottom-0 left-0 w-96 h-96 bg-secondary/5 rounded-full blur-3xl -z-0\" />\n      <div className=\"container mx-auto px-3 md:px-4 max-w-7xl relative z-10\">\n        <div className=\"text-center mb-8\">\n          <h2 className=\"text-3xl md:text-4xl font-bold mb-3 text-foreground\">Comment a marche ?</h2>\n          <p className=\"text-muted-foreground text-lg max-w-2xl mx-auto\">\n            Choisissez votre parcours et dcouvrez comment Mon Toit simplifie vos dmarches immobilires\n          </p>\n        </div>\n\n        {/* 3-Column Grid Layout */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n          {journeys.map((journey, index) => {\n            const JourneyIcon = journey.icon;\n            const iconBgColor = \n              index === 0 ? \"bg-blue-600\" : \n              index === 1 ? \"bg-primary\" : \n              \"bg-secondary\";\n\n            return (\n              <div key={index} className=\"bg-white rounded-lg border border-gray-200 shadow-md hover:shadow-xl transition-all duration-300 p-6\">\n                {/* Header compact */}\n                <div className=\"flex items-center gap-3 mb-6\">\n                  <div className={`${iconBgColor} p-2.5 rounded-full`}>\n                    <JourneyIcon className=\"h-6 w-6 text-white\" />\n                  </div>\n                  <h3 className=\"text-xl font-bold\">{journey.title}</h3>\n                </div>\n\n                {/* Steps compacts */}\n                <div className=\"space-y-4 mb-6\">\n                  {journey.steps.map((step, stepIndex) => {\n                    const StepIcon = step.icon;\n                    return (\n                      <div key={stepIndex} className=\"flex gap-3 items-start\">\n                        <div className={`w-8 h-8 ${iconBgColor} rounded-full flex items-center justify-center text-white font-bold text-sm flex-shrink-0`}>\n                          {step.number}\n                        </div>\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-1.5 mb-1\">\n                            <StepIcon className=\"h-4 w-4 text-primary\" />\n                            <h4 className=\"font-semibold text-sm\">{step.title}</h4>\n                          </div>\n                          <p className=\"text-xs text-muted-foreground leading-relaxed\">\n                            {step.description}\n                          </p>\n                        </div>\n                      </div>\n                    );\n                  })}\n                </div>\n\n                {/* CTA compact */}\n                <Button asChild size=\"sm\" className=\"w-full\">\n                  <Link to={journey.cta.link}>{journey.cta.text}</Link>\n                </Button>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </section>\n  );\n};\n\nexport default HowItWorks;\n","import Navbar from \"@/components/Navbar\";\nimport Footer from \"@/components/Footer\";\nimport HowItWorks from \"@/components/HowItWorks\";\nimport { DynamicBreadcrumb } from \"@/components/navigation/DynamicBreadcrumb\";\n\nconst HowItWorksPage = () => {\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <Navbar />\n      <main className=\"flex-1 pt-20\">\n        <div className=\"container mx-auto px-4 py-8\">\n          <DynamicBreadcrumb />\n        </div>\n        <HowItWorks />\n      </main>\n      <Footer />\n    </div>\n  );\n};\n\nexport default HowItWorksPage;\n","import { Users, Zap, Building2, TrendingUp, ShieldCheck, FileSignature, Star } from \"lucide-react\";\nimport { Card } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\n\n// Donnes des mtriques (4 principales)\nconst trustMetrics = [\n  { icon: Users, value: \"15,000+\", label: \"dossiers crs\", bgColor: \"bg-primary\" },\n  { icon: Zap, value: \"48h\", label: \"vrification moyenne\", bgColor: \"bg-secondary\" },\n  { icon: Building2, value: \"3,500+\", label: \"logements vrifis\", bgColor: \"bg-warning\" },\n  { icon: TrendingUp, value: \"98%\", label: \"satisfaction\", bgColor: \"bg-primary\" },\n];\n\n// Donnes des features (3 principales)\nconst coreFeatures = [\n  {\n    icon: ShieldCheck,\n    title: \"Dossier Certifi\",\n    description: \"Vrification ANSUT en 48h avec certification d'tat reconnue par tous les propritaires\",\n    bgColor: \"bg-blue-600\"\n  },\n  {\n    icon: Users,\n    title: \"Candidats Vrifis\",\n    description: \"Dossiers complets pr-vrifis par l'tat avec score de fiabilit de 0  100\",\n    bgColor: \"bg-primary\"\n  },\n  {\n    icon: FileSignature,\n    title: \"Signature Numrique\",\n    description: \"Bail lectronique conforme  la loi ivoirienne avec paiements Mobile Money intgrs\",\n    bgColor: \"bg-secondary\"\n  },\n];\n\n// Donnes des tmoignages (2 meilleurs)\nconst featuredTestimonials = [\n  {\n    name: \"Aminata K.\",\n    profession: \"Comptable\",\n    photo: \"https://ui-avatars.com/api/?name=Aminata+Kone&size=100&background=E67E22&color=fff\",\n    quote: \"J'ai trouv mon appartement  Cocody en seulement 2 jours. Tout tait vrifi !\",\n    rating: 5\n  },\n  {\n    name: \"Konan M.\",\n    profession: \"Ingnieur\",\n    photo: \"https://ui-avatars.com/api/?name=Konan+Mensah&size=100&background=2C5F7F&color=fff\",\n    quote: \"La certification ANSUT m'a vraiment rassur. Fini les arnaques !\",\n    rating: 5\n  },\n];\n\nconst UnifiedTrustSection = () => {\n  return (\n    <section className=\"py-16 bg-gray-50\" aria-labelledby=\"unified-trust-section\">\n      <div className=\"container mx-auto px-4 max-w-7xl\">\n        <h2 id=\"unified-trust-section\" className=\"sr-only\">\n          Confiance, fonctionnalits et tmoignages\n        </h2>\n\n        {/* 1. Mtriques */}\n        <div className=\"mb-16\">\n          <div className=\"text-center mb-8\">\n            <h3 className=\"text-3xl font-bold text-foreground mb-2\">\n              Votre confiance, notre priorit\n            </h3>\n            <div className=\"h-1 w-20 bg-gradient-to-r from-primary to-secondary rounded-full mx-auto\" />\n          </div>\n          <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-6\">\n            {trustMetrics.map((metric, index) => {\n              const Icon = metric.icon;\n              return (\n                <div\n                  key={index}\n                  className=\"flex flex-col items-center gap-3 p-4 bg-white rounded-2xl border border-primary/10 shadow-sm hover:shadow-lg transition-all duration-300 animate-fade-in\"\n                  style={{ animationDelay: `${index * 100}ms` }}\n                >\n                  <div className={`p-3 rounded-full ${metric.bgColor} shadow-lg`}>\n                    <Icon className=\"h-6 w-6 text-white\" />\n                  </div>\n                  <div className=\"text-center\">\n                    <div className=\"text-2xl md:text-3xl font-black text-foreground mb-1\">\n                      {metric.value}\n                    </div>\n                    <div className=\"text-sm font-medium text-muted-foreground\">{metric.label}</div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n\n        {/* 2. Features */}\n        <div className=\"mb-16\">\n          <div className=\"text-center mb-8\">\n            <h3 className=\"text-3xl font-bold text-foreground mb-2\">\n              Pourquoi choisir Mon Toit\n            </h3>\n            <p className=\"text-lg text-muted-foreground\">\n              Un service public au service de votre tranquillit\n            </p>\n          </div>\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n            {coreFeatures.map((feature, index) => {\n              const Icon = feature.icon;\n              return (\n                <Card\n                  key={index}\n                  className=\"p-6 bg-white shadow-md hover:shadow-xl hover:scale-[1.02] transition-all duration-300 flex flex-col h-full\"\n                >\n                  <div className=\"flex flex-col items-center text-center\">\n                    <div className={`${feature.bgColor} p-4 rounded-full mb-4`}>\n                      <Icon className=\"h-8 w-8 text-white\" />\n                    </div>\n                    <Badge variant=\"secondary\" className=\"mb-3 text-xs\">\n                      Service Public\n                    </Badge>\n                    <h4 className=\"text-xl font-bold text-foreground mb-3\">\n                      {feature.title}\n                    </h4>\n                    <p className=\"text-muted-foreground leading-relaxed flex-1\">\n                      {feature.description}\n                    </p>\n                  </div>\n                </Card>\n              );\n            })}\n          </div>\n        </div>\n\n        {/* 3. Tmoignages */}\n        <div>\n          <div className=\"text-center mb-8\">\n            <h3 className=\"text-3xl font-bold text-foreground mb-2\">\n              Ils nous font confiance\n            </h3>\n            <p className=\"text-lg text-muted-foreground\">\n              Rejoignez des milliers d'Ivoiriens satisfaits\n            </p>\n          </div>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\n            {featuredTestimonials.map((testimonial, index) => (\n              <Card\n                key={index}\n                className=\"p-6 bg-white shadow-md hover:shadow-xl transition-all duration-300\"\n              >\n                <div className=\"flex items-start gap-4 mb-4\">\n                  <img\n                    src={testimonial.photo}\n                    alt={`Photo de ${testimonial.name}`}\n                    className=\"w-16 h-16 rounded-full flex-shrink-0\"\n                    loading=\"lazy\"\n                  />\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <div>\n                        <p className=\"font-bold text-foreground\">{testimonial.name}</p>\n                        <p className=\"text-sm text-muted-foreground\">{testimonial.profession}</p>\n                      </div>\n                      <div className=\"flex gap-0.5\">\n                        {Array.from({ length: testimonial.rating }).map((_, i) => (\n                          <Star\n                            key={i}\n                            className=\"h-4 w-4 text-yellow-400 fill-yellow-400\"\n                          />\n                        ))}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                <p className=\"text-muted-foreground italic\">\n                  \"{testimonial.quote}\"\n                </p>\n              </Card>\n            ))}\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n};\n\nexport default UnifiedTrustSection;\n","import Navbar from \"@/components/Navbar\";\nimport Footer from \"@/components/Footer\";\nimport UnifiedTrustSection from \"@/components/UnifiedTrustSection\";\n\nconst AboutPage = () => {\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <Navbar />\n      <main className=\"flex-1 pt-20\">\n        <div className=\"container mx-auto px-4 py-12\">\n          <h1 className=\"text-4xl font-bold mb-4\"> propos de Mon Toit</h1>\n          <p className=\"text-lg text-muted-foreground mb-8\">\n            La plateforme immobilire certifie par l'tat ivoirien pour des locations scurises\n          </p>\n        </div>\n        <UnifiedTrustSection />\n      </main>\n      <Footer />\n    </div>\n  );\n};\n\nexport default AboutPage;\n","/**\n * Points d'Intrt (POI) d'Abidjan\n * Donnes relles des principaux lieux d'intrt de la ville\n */\n\nexport interface POI {\n  id: string;\n  name: string;\n  type: 'school' | 'transport' | 'hospital' | 'market' | 'mall' | 'restaurant';\n  latitude: number;\n  longitude: number;\n  neighborhood: string;\n  description?: string;\n}\n\nexport const ABIDJAN_POI: POI[] = [\n  // COLES\n  {\n    id: 'school-1',\n    name: 'Lyce Classique d\\'Abidjan',\n    type: 'school',\n    latitude: 5.3244,\n    longitude: -4.0125,\n    neighborhood: 'Plateau',\n    description: 'Lyce public prestigieux',\n  },\n  {\n    id: 'school-2',\n    name: 'Universit Flix Houphout-Boigny',\n    type: 'school',\n    latitude: 5.3599,\n    longitude: -3.9889,\n    neighborhood: 'Cocody',\n    description: 'Principale universit publique',\n  },\n  {\n    id: 'school-3',\n    name: 'cole Internationale Jean-Mermoz',\n    type: 'school',\n    latitude: 5.3736,\n    longitude: -3.9609,\n    neighborhood: 'Riviera',\n    description: 'cole franaise internationale',\n  },\n  {\n    id: 'school-4',\n    name: 'Groupe Scolaire Sainte-Marie',\n    type: 'school',\n    latitude: 5.3450,\n    longitude: -4.0050,\n    neighborhood: 'Cocody',\n    description: 'cole catholique rpute',\n  },\n\n  // TRANSPORTS\n  {\n    id: 'transport-1',\n    name: 'Gare de Treichville',\n    type: 'transport',\n    latitude: 5.2869,\n    longitude: -3.9967,\n    neighborhood: 'Treichville',\n    description: 'Principale gare routire',\n  },\n  {\n    id: 'transport-2',\n    name: 'Gare d\\'Adjam',\n    type: 'transport',\n    latitude: 5.3536,\n    longitude: -4.0236,\n    neighborhood: 'Adjam',\n    description: 'Gare routire nord',\n  },\n  {\n    id: 'transport-3',\n    name: 'Gare de Yopougon',\n    type: 'transport',\n    latitude: 5.3369,\n    longitude: -4.0894,\n    neighborhood: 'Yopougon',\n    description: 'Gare routire ouest',\n  },\n  {\n    id: 'transport-4',\n    name: 'Aroport Flix Houphout-Boigny',\n    type: 'transport',\n    latitude: 5.2539,\n    longitude: -3.9263,\n    neighborhood: 'Port-Bout',\n    description: 'Aroport international',\n  },\n\n  // HPITAUX\n  {\n    id: 'hospital-1',\n    name: 'CHU de Cocody',\n    type: 'hospital',\n    latitude: 5.3599,\n    longitude: -3.9789,\n    neighborhood: 'Cocody',\n    description: 'Centre hospitalier universitaire',\n  },\n  {\n    id: 'hospital-2',\n    name: 'CHU de Treichville',\n    type: 'hospital',\n    latitude: 5.2900,\n    longitude: -4.0050,\n    neighborhood: 'Treichville',\n    description: 'Grand hpital public',\n  },\n  {\n    id: 'hospital-3',\n    name: 'Polyclinique Internationale Sainte Anne-Marie',\n    type: 'hospital',\n    latitude: 5.3650,\n    longitude: -3.9950,\n    neighborhood: 'Cocody',\n    description: 'Clinique prive moderne',\n  },\n  {\n    id: 'hospital-4',\n    name: 'Hpital Gnral d\\'Abobo',\n    type: 'hospital',\n    latitude: 5.4167,\n    longitude: -4.0167,\n    neighborhood: 'Abobo',\n    description: 'Hpital gnral',\n  },\n\n  // MARCHS\n  {\n    id: 'market-1',\n    name: 'March d\\'Adjam',\n    type: 'market',\n    latitude: 5.3536,\n    longitude: -4.0236,\n    neighborhood: 'Adjam',\n    description: 'Plus grand march d\\'Abidjan',\n  },\n  {\n    id: 'market-2',\n    name: 'March de Treichville',\n    type: 'market',\n    latitude: 5.2869,\n    longitude: -3.9967,\n    neighborhood: 'Treichville',\n    description: 'March traditionnel',\n  },\n  {\n    id: 'market-3',\n    name: 'March de Cocody',\n    type: 'market',\n    latitude: 5.3599,\n    longitude: -3.9889,\n    neighborhood: 'Cocody',\n    description: 'March moderne',\n  },\n  {\n    id: 'market-4',\n    name: 'March de Yopougon',\n    type: 'market',\n    latitude: 5.3369,\n    longitude: -4.0894,\n    neighborhood: 'Yopougon',\n    description: 'Grand march populaire',\n  },\n\n  // CENTRES COMMERCIAUX\n  {\n    id: 'mall-1',\n    name: 'Cap Sud',\n    type: 'mall',\n    latitude: 5.2869,\n    longitude: -3.9867,\n    neighborhood: 'Marcory',\n    description: 'Centre commercial moderne',\n  },\n  {\n    id: 'mall-2',\n    name: 'Playce Marcory',\n    type: 'mall',\n    latitude: 5.2900,\n    longitude: -3.9900,\n    neighborhood: 'Marcory',\n    description: 'Mall avec cinma',\n  },\n  {\n    id: 'mall-3',\n    name: 'Cosmos Yopougon',\n    type: 'mall',\n    latitude: 5.3400,\n    longitude: -4.0850,\n    neighborhood: 'Yopougon',\n    description: 'Centre commercial populaire',\n  },\n  {\n    id: 'mall-4',\n    name: 'Carrefour Marcory',\n    type: 'mall',\n    latitude: 5.2850,\n    longitude: -3.9850,\n    neighborhood: 'Marcory',\n    description: 'Hypermarch Carrefour',\n  },\n\n  // RESTAURANTS\n  {\n    id: 'restaurant-1',\n    name: 'La Taverne Romaine',\n    type: 'restaurant',\n    latitude: 5.3244,\n    longitude: -4.0125,\n    neighborhood: 'Plateau',\n    description: 'Restaurant italien haut de gamme',\n  },\n  {\n    id: 'restaurant-2',\n    name: 'Chez Amina',\n    type: 'restaurant',\n    latitude: 5.3599,\n    longitude: -3.9889,\n    neighborhood: 'Cocody',\n    description: 'Cuisine ivoirienne authentique',\n  },\n  {\n    id: 'restaurant-3',\n    name: 'Le Bteau Ivre',\n    type: 'restaurant',\n    latitude: 5.2869,\n    longitude: -3.9967,\n    neighborhood: 'Treichville',\n    description: 'Restaurant franais',\n  },\n  {\n    id: 'restaurant-4',\n    name: 'Maquis du Coin',\n    type: 'restaurant',\n    latitude: 5.3736,\n    longitude: -3.9609,\n    neighborhood: 'Riviera',\n    description: 'Maquis traditionnel',\n  },\n];\n\nexport const POI_CATEGORIES = {\n  school: {\n    label: 'coles',\n    icon: '',\n    color: '#3b82f6',\n  },\n  transport: {\n    label: 'Transports',\n    icon: '',\n    color: '#10b981',\n  },\n  hospital: {\n    label: 'Hpitaux',\n    icon: '',\n    color: '#ef4444',\n  },\n  market: {\n    label: 'Marchs',\n    icon: '',\n    color: '#f59e0b',\n  },\n  mall: {\n    label: 'Centres commerciaux',\n    icon: '',\n    color: '#8b5cf6',\n  },\n  restaurant: {\n    label: 'Restaurants',\n    icon: '',\n    color: '#ec4899',\n  },\n};\n\n","/**\n * Donnes des quartiers d'Abidjan\n * Informations dtailles sur chaque quartier\n */\n\nexport interface Neighborhood {\n  id: string;\n  name: string;\n  bounds: {\n    north: number;\n    south: number;\n    east: number;\n    west: number;\n  };\n  center: {\n    latitude: number;\n    longitude: number;\n  };\n  priceRange: {\n    min: number;\n    max: number;\n    average: number;\n  };\n  scores: {\n    transport: number; // 0-10\n    commerce: number; // 0-10\n    education: number; // 0-10\n    security: number; // 0-10\n    healthcare: number; // 0-10\n  };\n  description: string;\n  characteristics: string[];\n  population?: number;\n}\n\nexport const ABIDJAN_NEIGHBORHOODS: Neighborhood[] = [\n  {\n    id: 'cocody',\n    name: 'Cocody',\n    bounds: {\n      north: 5.3800,\n      south: 5.3400,\n      east: -3.9600,\n      west: -4.0200,\n    },\n    center: {\n      latitude: 5.3599,\n      longitude: -3.9889,\n    },\n    priceRange: {\n      min: 250000,\n      max: 800000,\n      average: 450000,\n    },\n    scores: {\n      transport: 8,\n      commerce: 9,\n      education: 10,\n      security: 9,\n      healthcare: 9,\n    },\n    description: 'Quartier rsidentiel hupp d\\'Abidjan, abritant l\\'universit et de nombreuses ambassades.',\n    characteristics: [\n      'Quartier rsidentiel calme',\n      'Nombreuses coles internationales',\n      'Ambassades et institutions',\n      'Espaces verts',\n      'Scurit renforce',\n    ],\n    population: 400000,\n  },\n  {\n    id: 'plateau',\n    name: 'Plateau',\n    bounds: {\n      north: 5.3350,\n      south: 5.3100,\n      east: -4.0000,\n      west: -4.0300,\n    },\n    center: {\n      latitude: 5.3244,\n      longitude: -4.0125,\n    },\n    priceRange: {\n      min: 300000,\n      max: 1000000,\n      average: 550000,\n    },\n    scores: {\n      transport: 10,\n      commerce: 10,\n      education: 8,\n      security: 9,\n      healthcare: 8,\n    },\n    description: 'Centre d\\'affaires et administratif d\\'Abidjan, cur conomique de la Cte d\\'Ivoire.',\n    characteristics: [\n      'Centre d\\'affaires',\n      'Immeubles modernes',\n      'Banques et institutions',\n      'Restaurants haut de gamme',\n      'Vie nocturne anime',\n    ],\n    population: 15000,\n  },\n  {\n    id: 'marcory',\n    name: 'Marcory',\n    bounds: {\n      north: 5.3000,\n      south: 5.2700,\n      east: -3.9700,\n      west: -4.0100,\n    },\n    center: {\n      latitude: 5.2869,\n      longitude: -3.9967,\n    },\n    priceRange: {\n      min: 150000,\n      max: 400000,\n      average: 280000,\n    },\n    scores: {\n      transport: 7,\n      commerce: 8,\n      education: 7,\n      security: 7,\n      healthcare: 7,\n    },\n    description: 'Quartier mixte rsidentiel et commercial, en pleine expansion avec de nombreux centres commerciaux.',\n    characteristics: [\n      'Centres commerciaux modernes',\n      'Zone rsidentielle en dveloppement',\n      'Bon rapport qualit-prix',\n      'Accs facile au Plateau',\n      'Quartier familial',\n    ],\n    population: 300000,\n  },\n  {\n    id: 'riviera',\n    name: 'Riviera',\n    bounds: {\n      north: 5.3900,\n      south: 5.3600,\n      east: -3.9400,\n      west: -3.9800,\n    },\n    center: {\n      latitude: 5.3736,\n      longitude: -3.9609,\n    },\n    priceRange: {\n      min: 300000,\n      max: 900000,\n      average: 550000,\n    },\n    scores: {\n      transport: 7,\n      commerce: 8,\n      education: 9,\n      security: 9,\n      healthcare: 8,\n    },\n    description: 'Quartier rsidentiel moderne et scuris, pris par les expatris et cadres suprieurs.',\n    characteristics: [\n      'Rsidences modernes',\n      'Golf et loisirs',\n      'coles internationales',\n      'Scurit 24/7',\n      'Quartier calme',\n    ],\n    population: 200000,\n  },\n  {\n    id: 'treichville',\n    name: 'Treichville',\n    bounds: {\n      north: 5.2950,\n      south: 5.2750,\n      east: -3.9850,\n      west: -4.0150,\n    },\n    center: {\n      latitude: 5.2869,\n      longitude: -3.9967,\n    },\n    priceRange: {\n      min: 120000,\n      max: 350000,\n      average: 220000,\n    },\n    scores: {\n      transport: 9,\n      commerce: 9,\n      education: 6,\n      security: 6,\n      healthcare: 7,\n    },\n    description: 'Quartier populaire et anim, centre culturel avec le march et la gare routire.',\n    characteristics: [\n      'Quartier anim',\n      'March traditionnel',\n      'Vie nocturne',\n      'Transport facile',\n      'Prix abordables',\n    ],\n    population: 150000,\n  },\n  {\n    id: 'yopougon',\n    name: 'Yopougon',\n    bounds: {\n      north: 5.3600,\n      south: 5.3100,\n      east: -4.0600,\n      west: -4.1200,\n    },\n    center: {\n      latitude: 5.3369,\n      longitude: -4.0894,\n    },\n    priceRange: {\n      min: 80000,\n      max: 250000,\n      average: 150000,\n    },\n    scores: {\n      transport: 6,\n      commerce: 7,\n      education: 6,\n      security: 5,\n      healthcare: 6,\n    },\n    description: 'Plus grande commune d\\'Abidjan, quartier populaire avec de nombreux commerces.',\n    characteristics: [\n      'Quartier populaire',\n      'Prix trs abordables',\n      'Nombreux commerces',\n      'March important',\n      'Forte densit',\n    ],\n    population: 1200000,\n  },\n  {\n    id: 'adjame',\n    name: 'Adjam',\n    bounds: {\n      north: 5.3700,\n      south: 5.3400,\n      east: -4.0100,\n      west: -4.0400,\n    },\n    center: {\n      latitude: 5.3536,\n      longitude: -4.0236,\n    },\n    priceRange: {\n      min: 100000,\n      max: 300000,\n      average: 180000,\n    },\n    scores: {\n      transport: 10,\n      commerce: 10,\n      education: 6,\n      security: 6,\n      healthcare: 6,\n    },\n    description: 'Centre commercial majeur avec le plus grand march d\\'Abidjan et la gare routire.',\n    characteristics: [\n      'Plus grand march',\n      'Hub de transport',\n      'Commerce intense',\n      'Quartier trs anim',\n      'Prix comptitifs',\n    ],\n    population: 500000,\n  },\n  {\n    id: 'abobo',\n    name: 'Abobo',\n    bounds: {\n      north: 5.4400,\n      south: 5.3900,\n      east: -4.0000,\n      west: -4.0400,\n    },\n    center: {\n      latitude: 5.4167,\n      longitude: -4.0167,\n    },\n    priceRange: {\n      min: 70000,\n      max: 200000,\n      average: 120000,\n    },\n    scores: {\n      transport: 6,\n      commerce: 7,\n      education: 5,\n      security: 5,\n      healthcare: 6,\n    },\n    description: 'Commune populaire du nord d\\'Abidjan, en pleine expansion urbaine.',\n    characteristics: [\n      'Quartier en expansion',\n      'Prix trs accessibles',\n      'Jeune population',\n      'Commerces locaux',\n      'Forte croissance',\n    ],\n    population: 1200000,\n  },\n  {\n    id: 'port-bouet',\n    name: 'Port-Bout',\n    bounds: {\n      north: 5.2700,\n      south: 5.2300,\n      east: -3.9100,\n      west: -3.9500,\n    },\n    center: {\n      latitude: 5.2539,\n      longitude: -3.9263,\n    },\n    priceRange: {\n      min: 100000,\n      max: 350000,\n      average: 200000,\n    },\n    scores: {\n      transport: 9,\n      commerce: 7,\n      education: 6,\n      security: 7,\n      healthcare: 6,\n    },\n    description: 'Quartier abritant l\\'aroport international, proche de la mer.',\n    characteristics: [\n      'Proche aroport',\n      'Accs  la plage',\n      'Zone industrielle',\n      'Transport international',\n      'Quartier mixte',\n    ],\n    population: 250000,\n  },\n  {\n    id: 'deux-plateaux',\n    name: 'Deux Plateaux',\n    bounds: {\n      north: 5.3700,\n      south: 5.3500,\n      east: -3.9900,\n      west: -4.0100,\n    },\n    center: {\n      latitude: 5.3600,\n      longitude: -4.0000,\n    },\n    priceRange: {\n      min: 200000,\n      max: 600000,\n      average: 380000,\n    },\n    scores: {\n      transport: 7,\n      commerce: 8,\n      education: 8,\n      security: 8,\n      healthcare: 8,\n    },\n    description: 'Quartier rsidentiel moderne de Cocody, pris par la classe moyenne suprieure.',\n    characteristics: [\n      'Rsidences modernes',\n      'Quartier scuris',\n      'Nombreux restaurants',\n      'Vie nocturne',\n      'Classe moyenne',\n    ],\n    population: 150000,\n  },\n];\n\n// Fonction utilitaire pour obtenir la couleur selon le prix moyen\nexport const getPriceColor = (avgPrice: number): string => {\n  if (avgPrice < 150000) return '#10b981'; // Vert - Abordable\n  if (avgPrice < 300000) return '#f59e0b'; // Orange - Moyen\n  if (avgPrice < 500000) return '#ef4444'; // Rouge - Cher\n  return '#8b5cf6'; // Violet - Trs cher\n};\n\n// Fonction pour obtenir le label de prix\nexport const getPriceLabel = (avgPrice: number): string => {\n  if (avgPrice < 150000) return '< 150k FCFA';\n  if (avgPrice < 300000) return '150k - 300k FCFA';\n  if (avgPrice < 500000) return '300k - 500k FCFA';\n  return '> 500k FCFA';\n};\n\n","import { useRef, useEffect, useState } from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport Supercluster from 'supercluster';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport { MapProperty } from '@/hooks/useMapProperties';\nimport { Button } from '@/components/ui/button';\nimport { Locate, Map, Satellite, Layers, ZoomIn, ZoomOut } from 'lucide-react';\nimport { logger } from '@/services/logger';\nimport { motion } from 'framer-motion';\nimport { ABIDJAN_POI, POI_CATEGORIES } from '@/data/abidjanPOI';\nimport { ABIDJAN_NEIGHBORHOODS, getPriceColor } from '@/data/abidjanNeighborhoods';\nimport type { POIType } from './POILayer';\nimport type { Neighborhood } from '@/data/abidjanNeighborhoods';\n\ninterface EnhancedMapProps {\n  properties: MapProperty[];\n  onPropertyClick?: (propertyId: string) => void;\n  showHeatmap?: boolean;\n  showClusters?: boolean;\n  activePOILayers?: POIType[];\n  showNeighborhoods?: boolean;\n  onNeighborhoodClick?: (neighborhood: Neighborhood) => void;\n}\n\nconst getStoredMapboxToken = () => {\n  // Priorit 1: Variable d'environnement (supporte plusieurs noms)\n  const envToken = import.meta.env.VITE_MAPBOX_TOKEN || \n                   import.meta.env.VITE_MAPBOX_PUBLIC_TOKEN ||\n                   import.meta.env.MAPBOX_PUBLIC_TOKEN;\n  if (envToken) return envToken;\n  \n  // Priorit 2: localStorage (fallback)\n  return localStorage.getItem('mapbox_token') || '';\n};\n\ntype MapStyle = 'streets' | 'satellite' | 'hybrid';\n\nconst MAP_STYLES: Record<MapStyle, string> = {\n  streets: 'mapbox://styles/mapbox/streets-v12',\n  satellite: 'mapbox://styles/mapbox/satellite-v9',\n  hybrid: 'mapbox://styles/mapbox/satellite-streets-v12',\n};\n\nexport const EnhancedMap = ({ \n  properties, \n  onPropertyClick,\n  showHeatmap = false,\n  showClusters = true,\n  activePOILayers = [],\n  showNeighborhoods = false,\n  onNeighborhoodClick\n}: EnhancedMapProps) => {\n  const mapContainer = useRef<HTMLDivElement>(null);\n  const map = useRef<mapboxgl.Map | null>(null);\n  const markers = useRef<mapboxgl.Marker[]>([]);\n  const poiMarkers = useRef<mapboxgl.Marker[]>([]);\n  const [mapReady, setMapReady] = useState(false);\n  const [mapStyle, setMapStyle] = useState<MapStyle>('streets');\n  const [mapboxToken] = useState(getStoredMapboxToken());\n  const clusterIndex = useRef<Supercluster | null>(null);\n\n  // Initialize map\n  useEffect(() => {\n    if (!mapContainer.current || map.current) return;\n\n    try {\n      if (!mapboxToken) {\n        logger.warn('Mapbox token not configured');\n        return;\n      }\n\n      mapboxgl.accessToken = mapboxToken;\n\n      map.current = new mapboxgl.Map({\n        container: mapContainer.current,\n        style: MAP_STYLES[mapStyle],\n        center: [-4.0305, 5.3599], // Abidjan\n        zoom: 11,\n      });\n\n      map.current.addControl(new mapboxgl.NavigationControl(), 'top-right');\n      map.current.addControl(new mapboxgl.FullscreenControl(), 'top-right');\n\n      map.current.on('load', () => {\n        setMapReady(true);\n        logger.info('Map loaded successfully');\n      });\n\n      // Update clusters on zoom/pan\n      map.current.on('moveend', () => {\n        if (showClusters) {\n          updateClusters();\n        }\n      });\n\n    } catch (error) {\n      logger.logError(error, { context: 'Map initialization' });\n    }\n\n    return () => {\n      map.current?.remove();\n      map.current = null;\n    };\n  }, [mapStyle, mapboxToken]);\n\n  // Initialize clustering\n  useEffect(() => {\n    if (!showClusters || properties.length === 0) return;\n\n    const points = properties.map(property => ({\n      type: 'Feature' as const,\n      properties: {\n        cluster: false,\n        propertyId: property.id,\n        price: property.monthly_rent,\n        title: property.title,\n        city: property.city,\n        image: property.main_image,\n      },\n      geometry: {\n        type: 'Point' as const,\n        coordinates: [property.longitude, property.latitude],\n      },\n    }));\n\n    clusterIndex.current = new Supercluster({\n      radius: 60,\n      maxZoom: 16,\n      minPoints: 3,\n    });\n\n    clusterIndex.current.load(points);\n    updateClusters();\n  }, [properties, showClusters, mapReady]);\n\n  // Update clusters\n  const updateClusters = () => {\n    if (!map.current || !clusterIndex.current || !mapReady) return;\n\n    const bounds = map.current.getBounds();\n    const zoom = Math.floor(map.current.getZoom());\n\n    const clusters = clusterIndex.current.getClusters(\n      [bounds.getWest(), bounds.getSouth(), bounds.getEast(), bounds.getNorth()],\n      zoom\n    );\n\n    // Clear existing markers\n    markers.current.forEach(marker => marker.remove());\n    markers.current = [];\n\n    // Add cluster/point markers\n    clusters.forEach(cluster => {\n      const [lng, lat] = cluster.geometry.coordinates;\n      const isCluster = cluster.properties.cluster;\n\n      if (isCluster) {\n        const count = cluster.properties.point_count;\n        const clusterId = cluster.properties.cluster_id;\n        \n        const leaves = clusterIndex.current!.getLeaves(clusterId, Infinity);\n        const avgPrice = leaves.reduce((sum, leaf) => sum + leaf.properties.price, 0) / leaves.length;\n\n        const el = document.createElement('div');\n        el.className = 'cluster-marker';\n        el.innerHTML = `\n          <div class=\"relative group cursor-pointer\">\n            <div class=\"absolute -inset-2 bg-gradient-to-r from-primary to-secondary rounded-full blur-md opacity-30 group-hover:opacity-50 transition-opacity\"></div>\n            <div class=\"relative w-16 h-16 rounded-full bg-gradient-to-br from-primary to-secondary border-3 border-white shadow-xl flex flex-col items-center justify-center text-white group-hover:scale-110 transition-transform\">\n              <span class=\"text-lg font-bold\">${count}</span>\n              <span class=\"text-xs opacity-90\">${(avgPrice / 1000).toFixed(0)}k</span>\n            </div>\n          </div>\n        `;\n\n        el.addEventListener('click', () => {\n          const expansionZoom = clusterIndex.current!.getClusterExpansionZoom(clusterId);\n          map.current!.easeTo({\n            center: [lng, lat],\n            zoom: expansionZoom,\n          });\n        });\n\n        const marker = new mapboxgl.Marker({ element: el })\n          .setLngLat([lng, lat])\n          .addTo(map.current!);\n\n        markers.current.push(marker);\n      } else {\n        const property = cluster.properties;\n        const el = document.createElement('div');\n        el.className = 'property-marker';\n        el.innerHTML = `\n          <div class=\"relative group cursor-pointer\">\n            <div class=\"absolute -inset-1 bg-gradient-to-r from-primary to-secondary rounded-full blur opacity-25 group-hover:opacity-50 transition-opacity\"></div>\n            <div class=\"relative w-12 h-12 rounded-full bg-primary border-2 border-white shadow-lg flex items-center justify-center text-white font-bold text-xs group-hover:scale-110 transition-transform\">\n              ${(property.price / 1000).toFixed(0)}k\n            </div>\n          </div>\n        `;\n\n        const popupHTML = `\n          <div class=\"min-w-[220px]\">\n            ${property.image ? `\n              <img \n                src=\"${property.image}\" \n                alt=\"${property.title}\"\n                class=\"w-full h-32 object-cover rounded-t-lg mb-2\"\n              />\n            ` : ''}\n            <div class=\"p-3\">\n              <h3 class=\"font-semibold text-sm mb-2 text-foreground\">${property.title}</h3>\n              <div class=\"flex items-center gap-1 text-xs text-muted-foreground mb-2\">\n                <svg class=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\"/>\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\"/>\n                </svg>\n                <span>${property.city}</span>\n              </div>\n              <p class=\"text-base font-bold text-primary\">${property.price.toLocaleString()} FCFA<span class=\"text-xs font-normal\">/mois</span></p>\n              <button class=\"mt-3 w-full px-3 py-1.5 bg-primary text-white rounded-md text-xs font-medium hover:bg-primary/90 transition-colors\">\n                Voir les dtails\n              </button>\n            </div>\n          </div>\n        `;\n\n        const popup = new mapboxgl.Popup({\n          offset: 25,\n          closeButton: false,\n          className: 'property-popup',\n        }).setHTML(popupHTML);\n\n        el.addEventListener('click', () => {\n          if (onPropertyClick) {\n            onPropertyClick(property.propertyId);\n          }\n        });\n\n        const marker = new mapboxgl.Marker({ element: el })\n          .setLngLat([lng, lat])\n          .setPopup(popup)\n          .addTo(map.current!);\n\n        markers.current.push(marker);\n      }\n    });\n  };\n\n  // Add heatmap layer\n  useEffect(() => {\n    if (!map.current || !mapReady || !showHeatmap) return;\n\n    const sourceId = 'properties-heatmap';\n    const layerId = 'price-heatmap';\n\n    if (map.current.getLayer(layerId)) {\n      map.current.removeLayer(layerId);\n    }\n    if (map.current.getSource(sourceId)) {\n      map.current.removeSource(sourceId);\n    }\n\n    map.current.addSource(sourceId, {\n      type: 'geojson',\n      data: {\n        type: 'FeatureCollection',\n        features: properties.map(p => ({\n          type: 'Feature',\n          properties: { price: p.monthly_rent },\n          geometry: {\n            type: 'Point',\n            coordinates: [p.longitude, p.latitude],\n          },\n        })),\n      },\n    });\n\n    map.current.addLayer({\n      id: layerId,\n      type: 'heatmap',\n      source: sourceId,\n      paint: {\n        'heatmap-weight': ['interpolate', ['linear'], ['get', 'price'], 0, 0, 2000000, 1],\n        'heatmap-intensity': ['interpolate', ['linear'], ['zoom'], 0, 1, 15, 3],\n        'heatmap-color': [\n          'interpolate', ['linear'], ['heatmap-density'],\n          0, 'rgba(33,102,172,0)',\n          0.2, 'rgb(103,169,207)',\n          0.4, 'rgb(209,229,240)',\n          0.6, 'rgb(253,219,199)',\n          0.8, 'rgb(239,138,98)',\n          1, 'rgb(178,24,43)'\n        ],\n        'heatmap-radius': ['interpolate', ['linear'], ['zoom'], 0, 2, 15, 20],\n        'heatmap-opacity': 0.6,\n      },\n    });\n  }, [properties, showHeatmap, mapReady]);\n\n  // Add POI markers\n  useEffect(() => {\n    if (!map.current || !mapReady) return;\n\n    // Clear existing POI markers\n    poiMarkers.current.forEach(marker => marker.remove());\n    poiMarkers.current = [];\n\n    // Filter POI by active layers\n    const filteredPOI = ABIDJAN_POI.filter(poi => activePOILayers.includes(poi.type));\n\n    filteredPOI.forEach(poi => {\n      const category = POI_CATEGORIES[poi.type];\n      const el = document.createElement('div');\n      el.innerHTML = `\n        <div class=\"poi-marker cursor-pointer\">\n          <div class=\"w-8 h-8 rounded-full flex items-center justify-center shadow-lg border-2 border-white hover:scale-110 transition-transform\" style=\"background-color: ${category.color}\">\n            <span class=\"text-lg\">${category.icon}</span>\n          </div>\n        </div>\n      `;\n\n      const popup = new mapboxgl.Popup({ offset: 25, closeButton: false })\n        .setHTML(`\n          <div class=\"p-2\">\n            <p class=\"font-semibold text-sm\">${poi.name}</p>\n            <p class=\"text-xs text-muted-foreground\">${category.label}</p>\n            ${poi.description ? `<p class=\"text-xs mt-1\">${poi.description}</p>` : ''}\n          </div>\n        `);\n\n      const marker = new mapboxgl.Marker({ element: el })\n        .setLngLat([poi.longitude, poi.latitude])\n        .setPopup(popup)\n        .addTo(map.current!);\n\n      poiMarkers.current.push(marker);\n    });\n  }, [activePOILayers, mapReady]);\n\n  // Add neighborhood zones\n  useEffect(() => {\n    if (!map.current || !mapReady || !showNeighborhoods) return;\n\n    ABIDJAN_NEIGHBORHOODS.forEach((neighborhood, index) => {\n      const sourceId = `neighborhood-${neighborhood.id}`;\n      const layerId = `neighborhood-layer-${neighborhood.id}`;\n      const labelLayerId = `neighborhood-label-${neighborhood.id}`;\n\n      // Remove existing layers\n      if (map.current!.getLayer(labelLayerId)) map.current!.removeLayer(labelLayerId);\n      if (map.current!.getLayer(layerId)) map.current!.removeLayer(layerId);\n      if (map.current!.getSource(sourceId)) map.current!.removeSource(sourceId);\n\n      // Create polygon from bounds\n      const polygon = {\n        type: 'Feature' as const,\n        geometry: {\n          type: 'Polygon' as const,\n          coordinates: [[\n            [neighborhood.bounds.west, neighborhood.bounds.north],\n            [neighborhood.bounds.east, neighborhood.bounds.north],\n            [neighborhood.bounds.east, neighborhood.bounds.south],\n            [neighborhood.bounds.west, neighborhood.bounds.south],\n            [neighborhood.bounds.west, neighborhood.bounds.north],\n          ]],\n        },\n        properties: {\n          name: neighborhood.name,\n          avgPrice: neighborhood.priceRange.average,\n        },\n      };\n\n      map.current!.addSource(sourceId, {\n        type: 'geojson',\n        data: polygon,\n      });\n\n      const color = getPriceColor(neighborhood.priceRange.average);\n\n      // Add fill layer\n      map.current!.addLayer({\n        id: layerId,\n        type: 'fill',\n        source: sourceId,\n        paint: {\n          'fill-color': color,\n          'fill-opacity': 0.15,\n        },\n      });\n\n      // Add border\n      map.current!.addLayer({\n        id: `${layerId}-outline`,\n        type: 'line',\n        source: sourceId,\n        paint: {\n          'line-color': color,\n          'line-width': 2,\n          'line-opacity': 0.5,\n        },\n      });\n\n      // Add label\n      map.current!.addLayer({\n        id: labelLayerId,\n        type: 'symbol',\n        source: sourceId,\n        layout: {\n          'text-field': neighborhood.name,\n          'text-size': 14,\n          'text-font': ['Open Sans Bold', 'Arial Unicode MS Bold'],\n        },\n        paint: {\n          'text-color': color,\n          'text-halo-color': '#ffffff',\n          'text-halo-width': 2,\n        },\n      });\n\n      // Click handler\n      map.current!.on('click', layerId, () => {\n        if (onNeighborhoodClick) {\n          onNeighborhoodClick(neighborhood);\n        }\n      });\n\n      // Cursor pointer\n      map.current!.on('mouseenter', layerId, () => {\n        map.current!.getCanvas().style.cursor = 'pointer';\n      });\n      map.current!.on('mouseleave', layerId, () => {\n        map.current!.getCanvas().style.cursor = '';\n      });\n    });\n  }, [showNeighborhoods, mapReady, onNeighborhoodClick]);\n\n  const handleLocate = () => {\n    if (navigator.geolocation && map.current) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          map.current!.flyTo({\n            center: [position.coords.longitude, position.coords.latitude],\n            zoom: 14,\n          });\n        },\n        (error) => logger.logError(error, { context: 'Geolocation' })\n      );\n    }\n  };\n\n  if (!mapboxToken) {\n    return (\n      <div className=\"h-full flex items-center justify-center bg-muted/20\">\n        <p className=\"text-muted-foreground\">Mapbox token non configur</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"relative h-full w-full\">\n      <div ref={mapContainer} className=\"h-full w-full rounded-lg\" />\n\n      {/* Map Controls */}\n      <div className=\"absolute top-4 left-4 flex flex-col gap-2 z-10\">\n        <motion.div whileHover={{ scale: 1.05 }} whileTap={{ scale: 0.95 }}>\n          <Button size=\"icon\" variant=\"secondary\" className=\"shadow-lg bg-background/90 backdrop-blur-sm\" onClick={handleLocate}>\n            <Locate className=\"h-4 w-4\" />\n          </Button>\n        </motion.div>\n        <motion.div whileHover={{ scale: 1.05 }} whileTap={{ scale: 0.95 }}>\n          <Button size=\"icon\" variant=\"secondary\" className=\"shadow-lg bg-background/90 backdrop-blur-sm\" onClick={() => map.current?.zoomIn()}>\n            <ZoomIn className=\"h-4 w-4\" />\n          </Button>\n        </motion.div>\n        <motion.div whileHover={{ scale: 1.05 }} whileTap={{ scale: 0.95 }}>\n          <Button size=\"icon\" variant=\"secondary\" className=\"shadow-lg bg-background/90 backdrop-blur-sm\" onClick={() => map.current?.zoomOut()}>\n            <ZoomOut className=\"h-4 w-4\" />\n          </Button>\n        </motion.div>\n      </div>\n\n      {/* Style Switcher */}\n      <div className=\"absolute top-4 right-4 flex gap-2 z-10\">\n        {(['streets', 'satellite', 'hybrid'] as MapStyle[]).map((style) => (\n          <motion.div key={style} whileHover={{ scale: 1.05 }} whileTap={{ scale: 0.95 }}>\n            <Button\n              size=\"sm\"\n              variant={mapStyle === style ? 'default' : 'secondary'}\n              className=\"shadow-lg bg-background/90 backdrop-blur-sm\"\n              onClick={() => setMapStyle(style)}\n            >\n              {style === 'streets' && <Map className=\"h-4 w-4 mr-1\" />}\n              {style === 'satellite' && <Satellite className=\"h-4 w-4 mr-1\" />}\n              {style === 'hybrid' && <Layers className=\"h-4 w-4 mr-1\" />}\n              {style.charAt(0).toUpperCase() + style.slice(1)}\n            </Button>\n          </motion.div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\n","import { useState } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Label } from '@/components/ui/label';\nimport { Slider } from '@/components/ui/slider';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Separator } from '@/components/ui/separator';\nimport { \n  SlidersHorizontal, \n  Home, \n  DollarSign, \n  Bed, \n  MapPin,\n  RefreshCw,\n  TrendingUp,\n  Building2\n} from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\nexport interface MapFiltersState {\n  minPrice: number;\n  maxPrice: number;\n  propertyType: string;\n  minBedrooms: number;\n  maxBedrooms: number;\n  amenities: string[];\n}\n\ninterface MapFiltersProps {\n  filters: MapFiltersState;\n  onFiltersChange: (filters: MapFiltersState) => void;\n  stats: {\n    totalProperties: number;\n    avgPrice: number;\n    minPrice: number;\n    maxPrice: number;\n    neighborhoods: number;\n  };\n}\n\nconst AMENITIES = [\n  { value: 'piscine', label: 'Piscine', icon: '' },\n  { value: 'parking', label: 'Parking', icon: '' },\n  { value: 'securite', label: 'Scurit', icon: '' },\n  { value: 'jardin', label: 'Jardin', icon: '' },\n  { value: 'climatisation', label: 'Climatisation', icon: '' },\n  { value: 'meuble', label: 'Meubl', icon: '' },\n];\n\nexport const MapFilters = ({ filters, onFiltersChange, stats }: MapFiltersProps) => {\n  const [isExpanded, setIsExpanded] = useState(true);\n\n  const handlePriceChange = (values: number[]) => {\n    onFiltersChange({\n      ...filters,\n      minPrice: values[0],\n      maxPrice: values[1],\n    });\n  };\n\n  const handleBedroomsChange = (values: number[]) => {\n    onFiltersChange({\n      ...filters,\n      minBedrooms: values[0],\n      maxBedrooms: values[1],\n    });\n  };\n\n  const handlePropertyTypeChange = (value: string) => {\n    onFiltersChange({\n      ...filters,\n      propertyType: value,\n    });\n  };\n\n  const handleAmenityToggle = (amenity: string) => {\n    const newAmenities = filters.amenities.includes(amenity)\n      ? filters.amenities.filter(a => a !== amenity)\n      : [...filters.amenities, amenity];\n    \n    onFiltersChange({\n      ...filters,\n      amenities: newAmenities,\n    });\n  };\n\n  const handleReset = () => {\n    onFiltersChange({\n      minPrice: 0,\n      maxPrice: 2000000,\n      propertyType: 'all',\n      minBedrooms: 1,\n      maxBedrooms: 5,\n      amenities: [],\n    });\n  };\n\n  const formatPrice = (price: number) => {\n    return `${(price / 1000).toFixed(0)}k`;\n  };\n\n  return (\n    <Card className=\"w-full max-w-sm bg-gradient-to-b from-background to-muted/20 border-border/50 shadow-lg\">\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"flex items-center gap-2 text-lg\">\n            <SlidersHorizontal className=\"h-5 w-5 text-primary\" />\n            Filtres de recherche\n          </CardTitle>\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={() => setIsExpanded(!isExpanded)}\n            className=\"h-8 w-8 p-0\"\n          >\n            <motion.div\n              animate={{ rotate: isExpanded ? 180 : 0 }}\n              transition={{ duration: 0.2 }}\n            >\n              \n            </motion.div>\n          </Button>\n        </div>\n      </CardHeader>\n\n      <AnimatePresence>\n        {isExpanded && (\n          <motion.div\n            initial={{ height: 0, opacity: 0 }}\n            animate={{ height: 'auto', opacity: 1 }}\n            exit={{ height: 0, opacity: 0 }}\n            transition={{ duration: 0.2 }}\n          >\n            <CardContent className=\"space-y-6\">\n              {/* Stats Section */}\n              <div className=\"grid grid-cols-2 gap-3\">\n                <motion.div\n                  className=\"p-3 rounded-lg bg-gradient-to-br from-primary/10 to-primary/5 border border-primary/20\"\n                  whileHover={{ scale: 1.02 }}\n                >\n                  <div className=\"flex items-center gap-2 mb-1\">\n                    <Building2 className=\"h-4 w-4 text-primary\" />\n                    <span className=\"text-xs text-muted-foreground\">Biens</span>\n                  </div>\n                  <p className=\"text-2xl font-bold text-primary\">{stats.totalProperties}</p>\n                </motion.div>\n\n                <motion.div\n                  className=\"p-3 rounded-lg bg-gradient-to-br from-secondary/10 to-secondary/5 border border-secondary/20\"\n                  whileHover={{ scale: 1.02 }}\n                >\n                  <div className=\"flex items-center gap-2 mb-1\">\n                    <TrendingUp className=\"h-4 w-4 text-secondary\" />\n                    <span className=\"text-xs text-muted-foreground\">Moy.</span>\n                  </div>\n                  <p className=\"text-lg font-bold text-secondary\">{formatPrice(stats.avgPrice)}</p>\n                </motion.div>\n              </div>\n\n              <Separator />\n\n              {/* Price Range */}\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center justify-between\">\n                  <Label className=\"flex items-center gap-2 text-sm font-semibold\">\n                    <DollarSign className=\"h-4 w-4 text-primary\" />\n                    Prix mensuel\n                  </Label>\n                  <Badge variant=\"secondary\" className=\"text-xs\">\n                    {formatPrice(filters.minPrice)} - {formatPrice(filters.maxPrice)} FCFA\n                  </Badge>\n                </div>\n                <Slider\n                  min={0}\n                  max={2000000}\n                  step={50000}\n                  value={[filters.minPrice, filters.maxPrice]}\n                  onValueChange={handlePriceChange}\n                  className=\"w-full\"\n                />\n              </div>\n\n              {/* Property Type */}\n              <div className=\"space-y-2\">\n                <Label className=\"flex items-center gap-2 text-sm font-semibold\">\n                  <Home className=\"h-4 w-4 text-primary\" />\n                  Type de bien\n                </Label>\n                <Select value={filters.propertyType} onValueChange={handlePropertyTypeChange}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Tous les types\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">Tous les types</SelectItem>\n                    <SelectItem value=\"appartement\">Appartement</SelectItem>\n                    <SelectItem value=\"villa\">Villa</SelectItem>\n                    <SelectItem value=\"studio\">Studio</SelectItem>\n                    <SelectItem value=\"duplex\">Duplex</SelectItem>\n                    <SelectItem value=\"maison\">Maison</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n\n              {/* Bedrooms */}\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center justify-between\">\n                  <Label className=\"flex items-center gap-2 text-sm font-semibold\">\n                    <Bed className=\"h-4 w-4 text-primary\" />\n                    Chambres\n                  </Label>\n                  <Badge variant=\"secondary\" className=\"text-xs\">\n                    {filters.minBedrooms} - {filters.maxBedrooms}\n                  </Badge>\n                </div>\n                <Slider\n                  min={1}\n                  max={5}\n                  step={1}\n                  value={[filters.minBedrooms, filters.maxBedrooms]}\n                  onValueChange={handleBedroomsChange}\n                  className=\"w-full\"\n                />\n              </div>\n\n              {/* Amenities */}\n              <div className=\"space-y-3\">\n                <Label className=\"flex items-center gap-2 text-sm font-semibold\">\n                  <MapPin className=\"h-4 w-4 text-primary\" />\n                  quipements\n                </Label>\n                <div className=\"grid grid-cols-2 gap-2\">\n                  {AMENITIES.map((amenity) => (\n                    <motion.div\n                      key={amenity.value}\n                      whileHover={{ scale: 1.02 }}\n                      whileTap={{ scale: 0.98 }}\n                    >\n                      <label\n                        className={`flex items-center gap-2 p-2 rounded-lg border cursor-pointer transition-all ${\n                          filters.amenities.includes(amenity.value)\n                            ? 'bg-primary/10 border-primary'\n                            : 'bg-background border-border hover:border-primary/50'\n                        }`}\n                      >\n                        <Checkbox\n                          checked={filters.amenities.includes(amenity.value)}\n                          onCheckedChange={() => handleAmenityToggle(amenity.value)}\n                        />\n                        <span className=\"text-lg\">{amenity.icon}</span>\n                        <span className=\"text-xs font-medium\">{amenity.label}</span>\n                      </label>\n                    </motion.div>\n                  ))}\n                </div>\n              </div>\n\n              {/* Reset Button */}\n              <Button\n                variant=\"outline\"\n                className=\"w-full\"\n                onClick={handleReset}\n              >\n                <RefreshCw className=\"h-4 w-4 mr-2\" />\n                Rinitialiser\n              </Button>\n            </CardContent>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </Card>\n  );\n};\n\n","import { useState } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { Badge } from '@/components/ui/badge';\nimport { Separator } from '@/components/ui/separator';\nimport { POI_CATEGORIES } from '@/data/abidjanPOI';\nimport { motion } from 'framer-motion';\nimport { Layers } from 'lucide-react';\n\nexport type POIType = 'school' | 'transport' | 'hospital' | 'market' | 'mall' | 'restaurant';\n\ninterface POILayerProps {\n  activeLayers: POIType[];\n  onLayerToggle: (layer: POIType) => void;\n}\n\nexport const POILayer = ({ activeLayers, onLayerToggle }: POILayerProps) => {\n  const [isExpanded, setIsExpanded] = useState(true);\n\n  return (\n    <Card className=\"w-full bg-gradient-to-b from-background to-muted/20 border-border/50 shadow-lg\">\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"flex items-center gap-2 text-lg\">\n            <Layers className=\"h-5 w-5 text-primary\" />\n            Points d'intrt\n          </CardTitle>\n          <button\n            onClick={() => setIsExpanded(!isExpanded)}\n            className=\"text-sm text-muted-foreground hover:text-foreground transition-colors\"\n          >\n            {isExpanded ? '' : ''}\n          </button>\n        </div>\n      </CardHeader>\n\n      {isExpanded && (\n        <CardContent className=\"space-y-3\">\n          <p className=\"text-xs text-muted-foreground\">\n            Affichez les lieux importants autour des biens\n          </p>\n\n          <Separator />\n\n          <div className=\"space-y-2\">\n            {(Object.keys(POI_CATEGORIES) as POIType[]).map((type) => {\n              const category = POI_CATEGORIES[type];\n              const isActive = activeLayers.includes(type);\n\n              return (\n                <motion.div\n                  key={type}\n                  whileHover={{ scale: 1.02 }}\n                  whileTap={{ scale: 0.98 }}\n                >\n                  <label\n                    className={`flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all ${\n                      isActive\n                        ? 'bg-gradient-to-r from-primary/10 to-primary/5 border-primary'\n                        : 'bg-background border-border hover:border-primary/50'\n                    }`}\n                  >\n                    <Checkbox\n                      checked={isActive}\n                      onCheckedChange={() => onLayerToggle(type)}\n                    />\n                    <span className=\"text-2xl\">{category.icon}</span>\n                    <div className=\"flex-1\">\n                      <p className=\"text-sm font-medium\">{category.label}</p>\n                    </div>\n                    {isActive && (\n                      <Badge\n                        variant=\"secondary\"\n                        className=\"text-xs\"\n                        style={{ backgroundColor: `${category.color}20`, color: category.color }}\n                      >\n                        Actif\n                      </Badge>\n                    )}\n                  </label>\n                </motion.div>\n              );\n            })}\n          </div>\n\n          <Separator />\n\n          <div className=\"text-xs text-muted-foreground\">\n            <p>\n              <strong>{activeLayers.length}</strong> couche{activeLayers.length > 1 ? 's' : ''} active{activeLayers.length > 1 ? 's' : ''}\n            </p>\n          </div>\n        </CardContent>\n      )}\n    </Card>\n  );\n};\n\n","import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport { Separator } from '@/components/ui/separator';\nimport { Neighborhood } from '@/data/abidjanNeighborhoods';\nimport { \n  MapPin, \n  TrendingUp, \n  Users, \n  DollarSign,\n  Bus,\n  ShoppingCart,\n  GraduationCap,\n  Shield,\n  Heart,\n  X\n} from 'lucide-react';\nimport { motion } from 'framer-motion';\nimport { Button } from '@/components/ui/button';\n\ninterface NeighborhoodCardProps {\n  neighborhood: Neighborhood;\n  onClose: () => void;\n}\n\nexport const NeighborhoodCard = ({ neighborhood, onClose }: NeighborhoodCardProps) => {\n  const formatPrice = (price: number) => `${(price / 1000).toFixed(0)}k FCFA`;\n  \n  const getScoreColor = (score: number) => {\n    if (score >= 8) return 'text-green-500';\n    if (score >= 6) return 'text-orange-500';\n    return 'text-red-500';\n  };\n\n  const getScoreLabel = (score: number) => {\n    if (score >= 8) return 'Excellent';\n    if (score >= 6) return 'Bon';\n    if (score >= 4) return 'Moyen';\n    return 'Faible';\n  };\n\n  const overallScore = Math.round(\n    (neighborhood.scores.transport +\n      neighborhood.scores.commerce +\n      neighborhood.scores.education +\n      neighborhood.scores.security +\n      neighborhood.scores.healthcare) / 5\n  );\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      exit={{ opacity: 0, y: 20 }}\n      className=\"fixed bottom-4 left-4 right-4 lg:left-auto lg:right-4 lg:w-96 z-50\"\n    >\n      <Card className=\"shadow-2xl border-2 border-primary/20 bg-background/95 backdrop-blur-sm\">\n        <CardHeader className=\"pb-3 bg-gradient-to-r from-primary/10 to-secondary/10\">\n          <div className=\"flex items-start justify-between\">\n            <div className=\"flex-1\">\n              <CardTitle className=\"flex items-center gap-2 text-xl\">\n                <MapPin className=\"h-5 w-5 text-primary\" />\n                {neighborhood.name}\n              </CardTitle>\n              <p className=\"text-sm text-muted-foreground mt-1\">\n                {neighborhood.description}\n              </p>\n            </div>\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"h-8 w-8\"\n              onClick={onClose}\n            >\n              <X className=\"h-4 w-4\" />\n            </Button>\n          </div>\n        </CardHeader>\n\n        <CardContent className=\"space-y-4 pt-4 max-h-[60vh] overflow-y-auto\">\n          {/* Overall Score */}\n          <div className=\"flex items-center justify-between p-3 rounded-lg bg-gradient-to-r from-primary/10 to-secondary/10\">\n            <div>\n              <p className=\"text-sm text-muted-foreground\">Note globale</p>\n              <p className=\"text-2xl font-bold text-primary\">{overallScore}/10</p>\n            </div>\n            <Badge variant=\"secondary\" className=\"text-lg px-4 py-2\">\n              {getScoreLabel(overallScore)}\n            </Badge>\n          </div>\n\n          <Separator />\n\n          {/* Price Range */}\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center gap-2 text-sm font-semibold\">\n              <DollarSign className=\"h-4 w-4 text-primary\" />\n              Fourchette de prix\n            </div>\n            <div className=\"grid grid-cols-3 gap-2 text-center\">\n              <div className=\"p-2 rounded-lg bg-muted/50\">\n                <p className=\"text-xs text-muted-foreground\">Min</p>\n                <p className=\"text-sm font-bold\">{formatPrice(neighborhood.priceRange.min)}</p>\n              </div>\n              <div className=\"p-2 rounded-lg bg-primary/10\">\n                <p className=\"text-xs text-muted-foreground\">Moyen</p>\n                <p className=\"text-sm font-bold text-primary\">{formatPrice(neighborhood.priceRange.average)}</p>\n              </div>\n              <div className=\"p-2 rounded-lg bg-muted/50\">\n                <p className=\"text-xs text-muted-foreground\">Max</p>\n                <p className=\"text-sm font-bold\">{formatPrice(neighborhood.priceRange.max)}</p>\n              </div>\n            </div>\n          </div>\n\n          <Separator />\n\n          {/* Scores */}\n          <div className=\"space-y-3\">\n            <p className=\"text-sm font-semibold\">Qualit de vie</p>\n\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center justify-between text-sm\">\n                <div className=\"flex items-center gap-2\">\n                  <Bus className=\"h-4 w-4 text-green-500\" />\n                  <span>Transports</span>\n                </div>\n                <span className={`font-semibold ${getScoreColor(neighborhood.scores.transport)}`}>\n                  {neighborhood.scores.transport}/10\n                </span>\n              </div>\n              <Progress value={neighborhood.scores.transport * 10} className=\"h-2\" />\n            </div>\n\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center justify-between text-sm\">\n                <div className=\"flex items-center gap-2\">\n                  <ShoppingCart className=\"h-4 w-4 text-orange-500\" />\n                  <span>Commerces</span>\n                </div>\n                <span className={`font-semibold ${getScoreColor(neighborhood.scores.commerce)}`}>\n                  {neighborhood.scores.commerce}/10\n                </span>\n              </div>\n              <Progress value={neighborhood.scores.commerce * 10} className=\"h-2\" />\n            </div>\n\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center justify-between text-sm\">\n                <div className=\"flex items-center gap-2\">\n                  <GraduationCap className=\"h-4 w-4 text-blue-500\" />\n                  <span>ducation</span>\n                </div>\n                <span className={`font-semibold ${getScoreColor(neighborhood.scores.education)}`}>\n                  {neighborhood.scores.education}/10\n                </span>\n              </div>\n              <Progress value={neighborhood.scores.education * 10} className=\"h-2\" />\n            </div>\n\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center justify-between text-sm\">\n                <div className=\"flex items-center gap-2\">\n                  <Shield className=\"h-4 w-4 text-purple-500\" />\n                  <span>Scurit</span>\n                </div>\n                <span className={`font-semibold ${getScoreColor(neighborhood.scores.security)}`}>\n                  {neighborhood.scores.security}/10\n                </span>\n              </div>\n              <Progress value={neighborhood.scores.security * 10} className=\"h-2\" />\n            </div>\n\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center justify-between text-sm\">\n                <div className=\"flex items-center gap-2\">\n                  <Heart className=\"h-4 w-4 text-red-500\" />\n                  <span>Sant</span>\n                </div>\n                <span className={`font-semibold ${getScoreColor(neighborhood.scores.healthcare)}`}>\n                  {neighborhood.scores.healthcare}/10\n                </span>\n              </div>\n              <Progress value={neighborhood.scores.healthcare * 10} className=\"h-2\" />\n            </div>\n          </div>\n\n          <Separator />\n\n          {/* Characteristics */}\n          <div className=\"space-y-2\">\n            <p className=\"text-sm font-semibold\">Caractristiques</p>\n            <div className=\"flex flex-wrap gap-2\">\n              {neighborhood.characteristics.map((char, index) => (\n                <Badge key={index} variant=\"secondary\" className=\"text-xs\">\n                  {char}\n                </Badge>\n              ))}\n            </div>\n          </div>\n\n          {/* Population */}\n          {neighborhood.population && (\n            <>\n              <Separator />\n              <div className=\"flex items-center justify-between p-2 rounded-lg bg-muted/50\">\n                <div className=\"flex items-center gap-2 text-sm\">\n                  <Users className=\"h-4 w-4 text-primary\" />\n                  <span>Population</span>\n                </div>\n                <span className=\"font-semibold\">{neighborhood.population.toLocaleString()}</span>\n              </div>\n            </>\n          )}\n        </CardContent>\n      </Card>\n    </motion.div>\n  );\n};\n\n","import { useQuery } from '@tanstack/react-query';\nimport { supabase } from '@/lib/supabase';\nimport { logger } from '@/services/logger';\n\nexport interface MapProperty {\n  id: string;\n  title: string;\n  city: string;\n  neighborhood: string | null;\n  monthly_rent: number;\n  latitude: number;\n  longitude: number;\n  main_image: string | null;\n  property_type: string;\n  bedrooms: number;\n  bathrooms: number;\n  surface_area: number;\n  status: string;\n  amenities: string[] | null;\n}\n\ninterface UseMapPropertiesOptions {\n  filters?: {\n    minPrice?: number;\n    maxPrice?: number;\n    propertyType?: string;\n    minBedrooms?: number;\n    maxBedrooms?: number;\n    amenities?: string[];\n  };\n  refetchInterval?: number;\n}\n\nexport const useMapProperties = (options: UseMapPropertiesOptions = {}) => {\n  const { filters, refetchInterval = 30000 } = options;\n\n  return useQuery({\n    queryKey: ['map-properties', filters],\n    queryFn: async () => {\n      try {\n        let query = supabase\n          .from('properties')\n          .select(`\n            id,\n            title,\n            city,\n            neighborhood,\n            monthly_rent,\n            latitude,\n            longitude,\n            main_image,\n            property_type,\n            bedrooms,\n            bathrooms,\n            surface_area,\n            status,\n            amenities\n          `)\n          .eq('status', 'disponible')\n          .not('latitude', 'is', null)\n          .not('longitude', 'is', null);\n\n        // Apply filters\n        if (filters?.minPrice) {\n          query = query.gte('monthly_rent', filters.minPrice);\n        }\n        if (filters?.maxPrice) {\n          query = query.lte('monthly_rent', filters.maxPrice);\n        }\n        if (filters?.propertyType) {\n          query = query.eq('property_type', filters.propertyType);\n        }\n        if (filters?.minBedrooms) {\n          query = query.gte('bedrooms', filters.minBedrooms);\n        }\n        if (filters?.maxBedrooms) {\n          query = query.lte('bedrooms', filters.maxBedrooms);\n        }\n\n        const { data, error } = await query;\n\n        if (error) {\n          logger.logError(error, { context: 'useMapProperties' });\n          throw error;\n        }\n\n        // Filter by amenities if needed (client-side since it's an array)\n        let filteredData = data || [];\n        if (filters?.amenities && filters.amenities.length > 0) {\n          filteredData = filteredData.filter(property => {\n            if (!property.amenities) return false;\n            return filters.amenities!.some(amenity => \n              property.amenities!.includes(amenity)\n            );\n          });\n        }\n\n        logger.info(`Loaded ${filteredData.length} properties for map`, {\n          filters,\n          count: filteredData.length\n        });\n\n        return filteredData as MapProperty[];\n      } catch (error) {\n        logger.logError(error, { context: 'useMapProperties' });\n        return [];\n      }\n    },\n    refetchInterval,\n    staleTime: 20000, // Consider data stale after 20s\n  });\n};\n\n// Hook pour les statistiques de la carte\nexport const useMapStats = (properties: MapProperty[]) => {\n  const stats = {\n    totalProperties: properties.length,\n    avgPrice: properties.length > 0\n      ? Math.round(properties.reduce((sum, p) => sum + p.monthly_rent, 0) / properties.length)\n      : 0,\n    minPrice: properties.length > 0\n      ? Math.min(...properties.map(p => p.monthly_rent))\n      : 0,\n    maxPrice: properties.length > 0\n      ? Math.max(...properties.map(p => p.monthly_rent))\n      : 0,\n    neighborhoods: [...new Set(properties.map(p => p.neighborhood).filter(Boolean))].length,\n    cities: [...new Set(properties.map(p => p.city))].length,\n    propertyTypes: [...new Set(properties.map(p => p.property_type))].length,\n  };\n\n  return stats;\n};\n\n","import { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport Navbar from '@/components/Navbar';\nimport Footer from '@/components/Footer';\nimport { EnhancedMap } from '@/components/map/EnhancedMap';\nimport { MapFilters, MapFiltersState } from '@/components/map/MapFilters';\nimport { POILayer, POIType } from '@/components/map/POILayer';\nimport { NeighborhoodCard } from '@/components/map/NeighborhoodCard';\nimport { useMapProperties, useMapStats } from '@/hooks/useMapProperties';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Card } from '@/components/ui/card';\nimport { Skeleton } from '@/components/ui/skeleton';\nimport { Switch } from '@/components/ui/switch';\nimport { Label } from '@/components/ui/label';\nimport { \n  Map as MapIcon, \n  TrendingUp, \n  Activity,\n  Layers,\n  Eye,\n  EyeOff,\n  MapPinned\n} from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { KentePattern } from '@/components/ui/african-patterns';\nimport type { Neighborhood } from '@/data/abidjanNeighborhoods';\n\nconst SmartMapV2 = () => {\n  const navigate = useNavigate();\n  const [showHeatmap, setShowHeatmap] = useState(false);\n  const [showNeighborhoods, setShowNeighborhoods] = useState(true);\n  const [activePOILayers, setActivePOILayers] = useState<POIType[]>([]);\n  const [selectedNeighborhood, setSelectedNeighborhood] = useState<Neighborhood | null>(null);\n  \n  const [filters, setFilters] = useState<MapFiltersState>({\n    minPrice: 0,\n    maxPrice: 2000000,\n    propertyType: 'all',\n    minBedrooms: 1,\n    maxBedrooms: 5,\n    amenities: [],\n  });\n\n  const queryFilters = {\n    minPrice: filters.minPrice,\n    maxPrice: filters.maxPrice,\n    propertyType: filters.propertyType === 'all' ? undefined : filters.propertyType,\n    minBedrooms: filters.minBedrooms,\n    maxBedrooms: filters.maxBedrooms,\n    amenities: filters.amenities.length > 0 ? filters.amenities : undefined,\n  };\n\n  const { data: properties = [], isLoading, error } = useMapProperties({\n    filters: queryFilters,\n    refetchInterval: 30000,\n  });\n\n  const stats = useMapStats(properties);\n\n  const handlePropertyClick = (propertyId: string) => {\n    navigate(`/properties/${propertyId}`);\n  };\n\n  const handlePOILayerToggle = (layer: POIType) => {\n    setActivePOILayers(prev =>\n      prev.includes(layer)\n        ? prev.filter(l => l !== layer)\n        : [...prev, layer]\n    );\n  };\n\n  const handleNeighborhoodClick = (neighborhood: Neighborhood) => {\n    setSelectedNeighborhood(neighborhood);\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <Navbar />\n      \n      <main className=\"flex-1 pt-24\">\n        {/* Hero Section */}\n        <section className=\"relative py-8 bg-gradient-to-r from-primary/10 via-secondary/5 to-primary/10\">\n          <KentePattern />\n          <div className=\"container mx-auto px-4 relative z-10\">\n            <div className=\"text-center max-w-3xl mx-auto\">\n              <motion.div\n                initial={{ opacity: 0, y: -20 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ duration: 0.5 }}\n              >\n                <Badge variant=\"secondary\" className=\"mb-4\">\n                  <MapIcon className=\"h-3 w-3 mr-1\" />\n                  Carte Intelligente V2\n                </Badge>\n                <h1 className=\"text-h1 mb-4\">\n                  Explorez <span className=\"text-gradient-primary\">Abidjan</span> intelligemment\n                </h1>\n                <p className=\"text-body-lg text-muted-foreground\">\n                  Dcouvrez les biens avec clustering, heatmap, POI, zones de quartiers et analyse complte\n                </p>\n              </motion.div>\n            </div>\n          </div>\n        </section>\n\n        {/* Map Section */}\n        <section className=\"py-8\">\n          <div className=\"container mx-auto px-4\">\n            <div className=\"flex flex-col lg:flex-row gap-6\">\n              {/* Sidebar with Filters */}\n              <motion.div\n                className=\"lg:w-80 flex-shrink-0 space-y-4\"\n                initial={{ opacity: 0, x: -20 }}\n                animate={{ opacity: 1, x: 0 }}\n                transition={{ duration: 0.5, delay: 0.2 }}\n              >\n                {isLoading ? (\n                  <Card className=\"p-6\">\n                    <Skeleton className=\"h-8 w-full mb-4\" />\n                    <Skeleton className=\"h-32 w-full mb-4\" />\n                    <Skeleton className=\"h-8 w-full mb-4\" />\n                    <Skeleton className=\"h-32 w-full\" />\n                  </Card>\n                ) : (\n                  <>\n                    <MapFilters\n                      filters={filters}\n                      onFiltersChange={setFilters}\n                      stats={stats}\n                    />\n\n                    {/* Heatmap Toggle */}\n                    <Card className=\"p-4 bg-gradient-to-br from-secondary/10 to-secondary/5 border-secondary/20\">\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <div className=\"flex items-center gap-2\">\n                          <Activity className=\"h-4 w-4 text-secondary\" />\n                          <span className=\"text-sm font-semibold\">Heatmap des prix</span>\n                        </div>\n                        <Button\n                          size=\"sm\"\n                          variant={showHeatmap ? 'default' : 'outline'}\n                          onClick={() => setShowHeatmap(!showHeatmap)}\n                        >\n                          {showHeatmap ? <Eye className=\"h-4 w-4\" /> : <EyeOff className=\"h-4 w-4\" />}\n                        </Button>\n                      </div>\n                      <p className=\"text-xs text-muted-foreground\">\n                        Visualisez les zones de prix sur la carte\n                      </p>\n                    </Card>\n\n                    {/* Neighborhoods Toggle */}\n                    <Card className=\"p-4 bg-gradient-to-br from-primary/10 to-primary/5 border-primary/20\">\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center gap-2\">\n                          <MapPinned className=\"h-4 w-4 text-primary\" />\n                          <Label htmlFor=\"neighborhoods-toggle\" className=\"text-sm font-semibold cursor-pointer\">\n                            Zones de quartiers\n                          </Label>\n                        </div>\n                        <Switch\n                          id=\"neighborhoods-toggle\"\n                          checked={showNeighborhoods}\n                          onCheckedChange={setShowNeighborhoods}\n                        />\n                      </div>\n                      <p className=\"text-xs text-muted-foreground mt-2\">\n                        Afficher les dlimitations et prix par quartier\n                      </p>\n                    </Card>\n\n                    {/* POI Layers */}\n                    <POILayer\n                      activeLayers={activePOILayers}\n                      onLayerToggle={handlePOILayerToggle}\n                    />\n\n                    {/* Quick Stats */}\n                    <Card className=\"p-4\">\n                      <h3 className=\"text-sm font-semibold mb-3 flex items-center gap-2\">\n                        <TrendingUp className=\"h-4 w-4 text-primary\" />\n                        Statistiques rapides\n                      </h3>\n                      <div className=\"space-y-2 text-sm\">\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-muted-foreground\">Quartiers</span>\n                          <span className=\"font-semibold\">{stats.neighborhoods}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-muted-foreground\">Prix min</span>\n                          <span className=\"font-semibold\">{(stats.minPrice / 1000).toFixed(0)}k FCFA</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-muted-foreground\">Prix max</span>\n                          <span className=\"font-semibold\">{(stats.maxPrice / 1000).toFixed(0)}k FCFA</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-muted-foreground\">POI actifs</span>\n                          <span className=\"font-semibold\">{activePOILayers.length}</span>\n                        </div>\n                      </div>\n                    </Card>\n                  </>\n                )}\n              </motion.div>\n\n              {/* Map Container */}\n              <motion.div\n                className=\"flex-1 min-h-[600px] lg:min-h-[800px]\"\n                initial={{ opacity: 0, scale: 0.95 }}\n                animate={{ opacity: 1, scale: 1 }}\n                transition={{ duration: 0.5, delay: 0.3 }}\n              >\n                <Card className=\"h-full overflow-hidden shadow-2xl border-border/50\">\n                  {isLoading ? (\n                    <div className=\"h-full flex items-center justify-center bg-muted/20\">\n                      <div className=\"text-center\">\n                        <Layers className=\"h-12 w-12 text-primary mx-auto mb-4 animate-pulse\" />\n                        <p className=\"text-muted-foreground\">Chargement de la carte...</p>\n                      </div>\n                    </div>\n                  ) : error ? (\n                    <div className=\"h-full flex items-center justify-center bg-muted/20\">\n                      <div className=\"text-center\">\n                        <p className=\"text-destructive mb-2\">Erreur de chargement</p>\n                        <p className=\"text-sm text-muted-foreground\">\n                          Impossible de charger les proprits\n                        </p>\n                      </div>\n                    </div>\n                  ) : (\n                    <EnhancedMap\n                      properties={properties}\n                      onPropertyClick={handlePropertyClick}\n                      showHeatmap={showHeatmap}\n                      showClusters={true}\n                      activePOILayers={activePOILayers}\n                      showNeighborhoods={showNeighborhoods}\n                      onNeighborhoodClick={handleNeighborhoodClick}\n                    />\n                  )}\n                </Card>\n              </motion.div>\n            </div>\n          </div>\n        </section>\n\n        {/* Neighborhood Card Overlay */}\n        <AnimatePresence>\n          {selectedNeighborhood && (\n            <NeighborhoodCard\n              neighborhood={selectedNeighborhood}\n              onClose={() => setSelectedNeighborhood(null)}\n            />\n          )}\n        </AnimatePresence>\n\n        {/* Info Section */}\n        <section className=\"py-12 bg-muted/20\">\n          <div className=\"container mx-auto px-4\">\n            <div className=\"max-w-4xl mx-auto text-center\">\n              <h2 className=\"text-h2 mb-6\">\n                Une carte <span className=\"text-gradient-secondary\">vraiment intelligente</span>\n              </h2>\n              <div className=\"grid md:grid-cols-4 gap-6 mt-8\">\n                <Card className=\"p-6 hover:shadow-lg transition-shadow\">\n                  <div className=\"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-4\">\n                    <Layers className=\"h-6 w-6 text-primary\" />\n                  </div>\n                  <h3 className=\"font-semibold mb-2\">Clustering</h3>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Regroupement intelligent des biens\n                  </p>\n                </Card>\n\n                <Card className=\"p-6 hover:shadow-lg transition-shadow\">\n                  <div className=\"w-12 h-12 rounded-full bg-secondary/10 flex items-center justify-center mx-auto mb-4\">\n                    <Activity className=\"h-6 w-6 text-secondary\" />\n                  </div>\n                  <h3 className=\"font-semibold mb-2\">Heatmap</h3>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Zones de prix visualises\n                  </p>\n                </Card>\n\n                <Card className=\"p-6 hover:shadow-lg transition-shadow\">\n                  <div className=\"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-4\">\n                    <MapPinned className=\"h-6 w-6 text-primary\" />\n                  </div>\n                  <h3 className=\"font-semibold mb-2\">POI</h3>\n                  <p className=\"text-sm text-muted-foreground\">\n                    coles, transports, commerces\n                  </p>\n                </Card>\n\n                <Card className=\"p-6 hover:shadow-lg transition-shadow\">\n                  <div className=\"w-12 h-12 rounded-full bg-secondary/10 flex items-center justify-center mx-auto mb-4\">\n                    <TrendingUp className=\"h-6 w-6 text-secondary\" />\n                  </div>\n                  <h3 className=\"font-semibold mb-2\">Analyse</h3>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Statistiques par quartier\n                  </p>\n                </Card>\n              </div>\n            </div>\n          </div>\n        </section>\n      </main>\n\n      <Footer />\n    </div>\n  );\n};\n\nexport default SmartMapV2;\n\n","import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from '@/components/ui/accordion';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Building2, Eye, Edit, FileText, Users, Wrench, DollarSign, ArrowLeft, AlertCircle } from 'lucide-react';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { useNavigate } from 'react-router-dom';\n\nexport default function MandatesHelp() {\n  const navigate = useNavigate();\n\n  return (\n    <div className=\"container max-w-5xl py-8 space-y-8\">\n      {/* Header */}\n      <div className=\"space-y-4\">\n        <Button variant=\"ghost\" onClick={() => navigate(-1)} className=\"gap-2\">\n          <ArrowLeft className=\"h-4 w-4\" />\n          Retour\n        </Button>\n        <div>\n          <h1 className=\"text-4xl font-bold mb-2\">Guide des Mandats d'Agence</h1>\n          <p className=\"text-lg text-muted-foreground\">\n            Tout savoir sur le systme de mandats entre propritaires et agences immobilires\n          </p>\n        </div>\n      </div>\n\n      {/* Introduction */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Building2 className=\"h-5 w-5\" />\n            Qu'est-ce qu'un mandat d'agence ?\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <p>\n            Un <strong>mandat d'agence</strong> est un contrat par lequel un propritaire autorise une agence immobilire \n             grer un ou plusieurs de ses biens. Ce mandat dfinit les permissions, la rmunration et la dure de la collaboration.\n          </p>\n          <Alert>\n            <AlertCircle className=\"h-4 w-4\" />\n            <AlertDescription>\n              Les mandats sont scuriss et traables. Chaque action effectue dans le cadre d'un mandat est enregistre.\n            </AlertDescription>\n          </Alert>\n        </CardContent>\n      </Card>\n\n      {/* Types de mandats */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Types de mandats</CardTitle>\n          <CardDescription>Trois types de mandats sont disponibles selon vos besoins</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid gap-4 md:grid-cols-3\">\n            <div className=\"border rounded-lg p-4 space-y-2\">\n              <Badge variant=\"default\">Location</Badge>\n              <h4 className=\"font-semibold\">Mandat de location</h4>\n              <p className=\"text-sm text-muted-foreground\">\n                L'agence gre la recherche de locataires et la signature des baux pour vos biens en location.\n              </p>\n            </div>\n            <div className=\"border rounded-lg p-4 space-y-2\">\n              <Badge variant=\"default\">Gestion complte</Badge>\n              <h4 className=\"font-semibold\">Mandat de gestion complte</h4>\n              <p className=\"text-sm text-muted-foreground\">\n                L'agence gre l'intgralit de vos biens : location, maintenance, finances, relations locataires.\n              </p>\n            </div>\n            <div className=\"border rounded-lg p-4 space-y-2\">\n              <Badge variant=\"default\">Vente</Badge>\n              <h4 className=\"font-semibold\">Mandat de vente</h4>\n              <p className=\"text-sm text-muted-foreground\">\n                L'agence est charge de vendre votre bien aux meilleures conditions du march.\n              </p>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Porte du mandat */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Porte du mandat</CardTitle>\n          <CardDescription>Mandat spcifique vs mandat global</CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            <div className=\"border rounded-lg p-4 space-y-2\">\n              <h4 className=\"font-semibold flex items-center gap-2\">\n                <Building2 className=\"h-4 w-4\" />\n                Mandat spcifique\n              </h4>\n              <p className=\"text-sm text-muted-foreground\">\n                Le mandat concerne <strong>un bien prcis</strong>. L'agence ne peut grer que ce bien.\n              </p>\n              <p className=\"text-xs text-muted-foreground mt-2\">\n                 Idal pour tester une collaboration<br/>\n                 Contrle fin par bien\n              </p>\n            </div>\n            <div className=\"border rounded-lg p-4 space-y-2\">\n              <h4 className=\"font-semibold flex items-center gap-2\">\n                <Building2 className=\"h-4 w-4\" />\n                Mandat global\n              </h4>\n              <p className=\"text-sm text-muted-foreground\">\n                Le mandat couvre <strong>tous vos biens actuels et futurs</strong>. L'agence gre l'ensemble de votre portefeuille.\n              </p>\n              <p className=\"text-xs text-muted-foreground mt-2\">\n                 Gestion centralise<br/>\n                 Gain de temps pour les grands propritaires\n              </p>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Permissions dtailles */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Permissions disponibles</CardTitle>\n          <CardDescription>Choisissez prcisment ce que l'agence peut faire</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-6\">\n            {/* Proprits */}\n            <div>\n              <h4 className=\"font-semibold mb-3 flex items-center gap-2\">\n                <Building2 className=\"h-4 w-4\" />\n                Gestion des proprits\n              </h4>\n              <div className=\"grid gap-3 md:grid-cols-2\">\n                <div className=\"flex items-start gap-3 p-3 border rounded\">\n                  <Eye className=\"h-5 w-5 text-muted-foreground shrink-0 mt-0.5\" />\n                  <div>\n                    <p className=\"font-medium text-sm\">Voir les proprits</p>\n                    <p className=\"text-xs text-muted-foreground\">Accs en lecture seule aux fiches des biens</p>\n                  </div>\n                </div>\n                <div className=\"flex items-start gap-3 p-3 border rounded\">\n                  <Edit className=\"h-5 w-5 text-muted-foreground shrink-0 mt-0.5\" />\n                  <div>\n                    <p className=\"font-medium text-sm\">Modifier les proprits</p>\n                    <p className=\"text-xs text-muted-foreground\">Mettre  jour prix, description, photos, etc.</p>\n                  </div>\n                </div>\n                <div className=\"flex items-start gap-3 p-3 border rounded\">\n                  <FileText className=\"h-5 w-5 text-muted-foreground shrink-0 mt-0.5\" />\n                  <div>\n                    <p className=\"font-medium text-sm\">Crer des proprits</p>\n                    <p className=\"text-xs text-muted-foreground\">Ajouter de nouveaux biens  votre portefeuille</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Candidatures */}\n            <div>\n              <h4 className=\"font-semibold mb-3 flex items-center gap-2\">\n                <Users className=\"h-4 w-4\" />\n                Gestion des candidatures\n              </h4>\n              <div className=\"grid gap-3 md:grid-cols-2\">\n                <div className=\"flex items-start gap-3 p-3 border rounded\">\n                  <Eye className=\"h-5 w-5 text-muted-foreground shrink-0 mt-0.5\" />\n                  <div>\n                    <p className=\"font-medium text-sm\">Voir les candidatures</p>\n                    <p className=\"text-xs text-muted-foreground\">Consulter les dossiers des candidats locataires</p>\n                  </div>\n                </div>\n                <div className=\"flex items-start gap-3 p-3 border rounded\">\n                  <Edit className=\"h-5 w-5 text-muted-foreground shrink-0 mt-0.5\" />\n                  <div>\n                    <p className=\"font-medium text-sm\">Grer les candidatures</p>\n                    <p className=\"text-xs text-muted-foreground\">Accepter, refuser ou mettre en attente des candidats</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Autres permissions */}\n            <div>\n              <h4 className=\"font-semibold mb-3 flex items-center gap-2\">\n                <Wrench className=\"h-4 w-4\" />\n                Autres permissions\n              </h4>\n              <div className=\"grid gap-3 md:grid-cols-2\">\n                <div className=\"flex items-start gap-3 p-3 border rounded\">\n                  <FileText className=\"h-5 w-5 text-muted-foreground shrink-0 mt-0.5\" />\n                  <div>\n                    <p className=\"font-medium text-sm\">Crer des baux</p>\n                    <p className=\"text-xs text-muted-foreground\">Gnrer et signer des contrats de location</p>\n                  </div>\n                </div>\n                <div className=\"flex items-start gap-3 p-3 border rounded\">\n                  <DollarSign className=\"h-5 w-5 text-muted-foreground shrink-0 mt-0.5\" />\n                  <div>\n                    <p className=\"font-medium text-sm\">Voir les finances</p>\n                    <p className=\"text-xs text-muted-foreground\">Accs aux paiements et statistiques financires</p>\n                  </div>\n                </div>\n                <div className=\"flex items-start gap-3 p-3 border rounded\">\n                  <Wrench className=\"h-5 w-5 text-muted-foreground shrink-0 mt-0.5\" />\n                  <div>\n                    <p className=\"font-medium text-sm\">Grer la maintenance</p>\n                    <p className=\"text-xs text-muted-foreground\">Traiter les demandes de rparation et travaux</p>\n                  </div>\n                </div>\n                <div className=\"flex items-start gap-3 p-3 border rounded\">\n                  <FileText className=\"h-5 w-5 text-muted-foreground shrink-0 mt-0.5\" />\n                  <div>\n                    <p className=\"font-medium text-sm\">Grer les documents</p>\n                    <p className=\"text-xs text-muted-foreground\">Uploader et organiser les documents des biens</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Cycle de vie */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Cycle de vie d'un mandat</CardTitle>\n          <CardDescription>Les diffrentes tapes d'un mandat</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            <div className=\"flex items-start gap-4\">\n              <div className=\"flex items-center justify-center w-8 h-8 rounded-full bg-secondary text-secondary-foreground font-bold shrink-0\">1</div>\n              <div>\n                <h4 className=\"font-semibold\">Invitation <Badge variant=\"secondary\">En attente</Badge></h4>\n                <p className=\"text-sm text-muted-foreground\">\n                  Le propritaire cre un mandat et invite l'agence. L'agence reoit une notification.\n                </p>\n              </div>\n            </div>\n            <div className=\"flex items-start gap-4\">\n              <div className=\"flex items-center justify-center w-8 h-8 rounded-full bg-secondary text-secondary-foreground font-bold shrink-0\">2</div>\n              <div>\n                <h4 className=\"font-semibold\">Acceptation <Badge variant=\"default\">Actif</Badge></h4>\n                <p className=\"text-sm text-muted-foreground\">\n                  L'agence accepte le mandat. Les permissions sont actives et l'agence peut commencer la gestion.\n                </p>\n              </div>\n            </div>\n            <div className=\"flex items-start gap-4\">\n              <div className=\"flex items-center justify-center w-8 h-8 rounded-full bg-secondary text-secondary-foreground font-bold shrink-0\">3</div>\n              <div>\n                <h4 className=\"font-semibold\">Gestion active</h4>\n                <p className=\"text-sm text-muted-foreground\">\n                  L'agence gre les biens selon les permissions accordes. Le propritaire garde le contrle et peut ajuster les permissions.\n                </p>\n              </div>\n            </div>\n            <div className=\"flex items-start gap-4\">\n              <div className=\"flex items-center justify-center w-8 h-8 rounded-full bg-secondary text-secondary-foreground font-bold shrink-0\">4</div>\n              <div>\n                <h4 className=\"font-semibold\">Fin du mandat <Badge variant=\"destructive\">Rsili</Badge> ou <Badge variant=\"outline\">Expir</Badge></h4>\n                <p className=\"text-sm text-muted-foreground\">\n                  Le mandat prend fin soit par rsiliation (propritaire ou agence), soit automatiquement  la date de fin prvue.\n                </p>\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* FAQ */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Questions frquentes (FAQ)</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <Accordion type=\"single\" collapsible className=\"w-full\">\n            <AccordionItem value=\"item-1\">\n              <AccordionTrigger>Comment inviter une agence ?</AccordionTrigger>\n              <AccordionContent className=\"text-muted-foreground\">\n                Depuis votre page \"Mes Mandats\", cliquez sur \"Inviter une agence\". Slectionnez l'agence, \n                le type de mandat, les permissions souhaites et les conditions financires. L'agence recevra \n                une notification et pourra accepter ou refuser.\n              </AccordionContent>\n            </AccordionItem>\n            <AccordionItem value=\"item-2\">\n              <AccordionTrigger>Puis-je modifier les permissions aprs acceptation ?</AccordionTrigger>\n              <AccordionContent className=\"text-muted-foreground\">\n                Oui ! En tant que propritaire, vous pouvez  tout moment modifier les permissions accordes \n                 une agence. Depuis la page \"Mes Mandats\", cliquez sur \"Modifier les permissions\" sur le mandat concern.\n              </AccordionContent>\n            </AccordionItem>\n            <AccordionItem value=\"item-3\">\n              <AccordionTrigger>Comment rsilier un mandat ?</AccordionTrigger>\n              <AccordionContent className=\"text-muted-foreground\">\n                Le propritaire et l'agence peuvent tous deux rsilier un mandat. Cliquez sur \"Rsilier\" \n                sur la carte du mandat, indiquez un motif, et confirmez. La rsiliation est immdiate \n                et l'agence perd toutes les permissions associes.\n              </AccordionContent>\n            </AccordionItem>\n            <AccordionItem value=\"item-4\">\n              <AccordionTrigger>Quelle est la diffrence entre commission et frais fixes ?</AccordionTrigger>\n              <AccordionContent className=\"text-muted-foreground\">\n                <strong>Commission</strong> : Pourcentage sur les loyers collects (ex: 10% du loyer mensuel).<br/>\n                <strong>Frais fixes</strong> : Montant fixe par priode (ex: 50 000 FCFA/mois).<br/>\n                Vous pouvez choisir l'un ou l'autre, ou combiner les deux selon votre accord avec l'agence.\n              </AccordionContent>\n            </AccordionItem>\n            <AccordionItem value=\"item-5\">\n              <AccordionTrigger>Que se passe-t-il si je supprime un bien sous mandat ?</AccordionTrigger>\n              <AccordionContent className=\"text-muted-foreground\">\n                Si vous supprimez un bien couvert par un mandat spcifique, le mandat reste actif mais sans bien associ. \n                Pour un mandat global, seul ce bien est retir, les autres restent grs par l'agence.\n              </AccordionContent>\n            </AccordionItem>\n            <AccordionItem value=\"item-6\">\n              <AccordionTrigger>Puis-je avoir plusieurs mandats avec diffrentes agences ?</AccordionTrigger>\n              <AccordionContent className=\"text-muted-foreground\">\n                Oui, mais attention : vitez d'avoir plusieurs mandats actifs pour le mme bien. \n                Le systme vous alertera si vous tentez de crer un mandat en doublon.\n              </AccordionContent>\n            </AccordionItem>\n          </Accordion>\n        </CardContent>\n      </Card>\n\n      {/* CTA */}\n      <div className=\"flex justify-center\">\n        <Button onClick={() => navigate(-1)} size=\"lg\">\n          Retour  mes mandats\n        </Button>\n      </div>\n    </div>\n  );\n}","import React from 'react';\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { Toaster as Sonner } from \"@/components/ui/sonner\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { queryClient } from '@/lib/queryClient';\nimport { BrowserRouter, Routes, Route, useLocation } from \"react-router-dom\";\nimport { HelmetProvider } from 'react-helmet-async';\nimport { useEffect, useState, useRef, lazy, Suspense } from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { AuthProvider } from \"@/hooks/useAuth\";\nimport ProtectedRoute from \"@/components/ProtectedRoute\";\nimport { SarahChatbot } from \"@/components/SarahChatbot\";\nimport { usePrefetchRoutes } from \"@/hooks/usePrefetchRoutes\";\nimport { useKeyboardShortcuts } from \"@/hooks/useKeyboardShortcuts\";\nimport BottomNavigation from \"@/components/navigation/BottomNavigation\";\nimport { PageSkeleton, PropertyDetailSkeleton } from \"@/components/LoadingFallback\";\nimport ContextBar from \"@/components/ContextBar\";\nimport { ScrollProgress } from \"@/components/animations/ScrollProgress\";\nimport { InstallPWA } from \"@/components/pwa/InstallPWA\";\nimport { SplashScreen } from \"@/components/pwa/SplashScreen\";\n\n// Eager load critical pages\nimport Index from \"./pages/Index\";\nimport Auth from \"./pages/Auth\";\nimport Search from \"./pages/Search\";\n\n// Lazy load heavy pages\nconst PropertyDetail = lazy(() => import(\"./pages/PropertyDetail\"));\nconst Offline = lazy(() => import(\"./pages/Offline\"));\nconst Dashboard = lazy(() => import(\"./pages/Dashboard\"));\nconst AdminDashboard = lazy(() => import(\"./pages/AdminDashboard\"));\nconst AdminCertifications = lazy(() => import(\"./pages/AdminCertifications\"));\nconst OwnerDashboard = lazy(() => import(\"./pages/OwnerDashboard\"));\nconst TenantDashboard = lazy(() => import(\"./pages/TenantDashboard\"));\nconst AgencyDashboard = lazy(() => import(\"./pages/AgencyDashboard\"));\nconst MyMandates = lazy(() => import(\"./pages/MyMandates\"));\nconst MyProperties = lazy(() => import(\"./pages/MyProperties\"));\nconst AddProperty = lazy(() => import(\"./pages/AddProperty\"));\nconst EditProperty = lazy(() => import(\"./pages/EditProperty\"));\nconst Messages = lazy(() => import(\"./pages/Messages\"));\nconst Application = lazy(() => import(\"./pages/Application\"));\nconst Applications = lazy(() => import(\"./pages/Applications\"));\nconst Leases = lazy(() => import(\"./pages/Leases\"));\nconst Payments = lazy(() => import(\"./pages/Payments\"));\nconst Maintenance = lazy(() => import(\"./pages/Maintenance\"));\nconst ScheduleVisit = lazy(() => import(\"./pages/ScheduleVisit\"));\n\n// Load other pages normally\nimport Certification from \"./pages/Certification\";\nimport ResetPassword from \"./pages/ResetPassword\";\nimport Profile from \"./pages/Profile\";\nimport Favorites from \"./pages/Favorites\";\nimport PropertyApplications from \"./pages/PropertyApplications\";\nimport Verification from \"./pages/Verification\";\nimport { GuestMessagesInbox } from \"@/components/owner/GuestMessagesInbox\";\nimport NotFound from \"./pages/NotFound\";\nimport UserReviews from \"./pages/UserReviews\";\nimport Publier from \"./pages/Publier\";\nimport APropos from \"./pages/APropos\";\nimport Conditions from \"./pages/Conditions\";\nimport Confidentialite from \"./pages/Confidentialite\";\nimport MentionsLegales from \"./pages/MentionsLegales\";\nimport TiersDeConfianceDashboard from \"./pages/TiersDeConfianceDashboard\";\nimport CertificationFAQ from \"./pages/CertificationFAQ\";\nimport Tarifs from \"./pages/Tarifs\";\nimport PopulateImages from \"./pages/PopulateImages\";\nimport TestCryptoNeo from \"./pages/TestCryptoNeo\";\nimport Guide from \"./pages/Guide\";\nimport Explorer from \"./pages/Explorer\";\nimport CommentCaMarche from \"./pages/CommentCaMarche\";\nimport HowItWorksPage from \"./pages/HowItWorksPage\";\nimport AboutPage from \"./pages/AboutPage\";\nimport SmartMap from \"./pages/SmartMap\";\nimport SmartMapV2 from \"./pages/SmartMapV2\";\n\nimport MandatesHelp from \"./pages/MandatesHelp\";\n\nconst AppContent = () => {\n  //  Prchargement intelligent des routes\n  usePrefetchRoutes();\n  \n  //  Raccourcis clavier globaux (accessibilit)\n  useKeyboardShortcuts();\n  \n  const location = useLocation();\n  const prevLocation = useRef(location.pathname);\n  const [direction, setDirection] = useState<'left' | 'right'>('right');\n\n  useEffect(() => {\n    const routes = ['/', '/recherche', '/favoris', '/messages', '/profil'];\n    const currentIndex = routes.indexOf(location.pathname);\n    const prevIndex = routes.indexOf(prevLocation.current);\n    \n    if (currentIndex !== -1 && prevIndex !== -1) {\n      setDirection(currentIndex > prevIndex ? 'right' : 'left');\n    }\n    \n    prevLocation.current = location.pathname;\n  }, [location.pathname]);\n  \n  return (\n    <>\n      <SplashScreen />\n      <ScrollProgress />\n      <InstallPWA />\n      {/* Skip link pour accessibilit */}\n      <a href=\"#main-content\" className=\"skip-to-main\">\n        Aller au contenu principal\n      </a>\n      \n      <ContextBar />\n      <SarahChatbot />\n      <main id=\"main-content\" tabIndex={-1}>\n        <div \n          key={location.pathname}\n          className={cn(\n            \"animate-in duration-200\",\n            direction === 'right' ? 'slide-in-from-right-4' : 'slide-in-from-left-4'\n          )}\n        >\n          <Routes>\n            <Route path=\"/\" element={<Index />} />\n            <Route path=\"/offline\" element={<Suspense fallback={<PageSkeleton />}><Offline /></Suspense>} />\n            <Route path=\"/recherche\" element={<Search />} />\n            <Route path=\"/explorer\" element={<Explorer />} />\n            <Route path=\"/carte-intelligente\" element={<SmartMapV2 />} />\n            <Route path=\"/comment-ca-marche\" element={<HowItWorksPage />} />\n            <Route path=\"/a-propos\" element={<AboutPage />} />\n            <Route path=\"/property/:id\" element={\n              <Suspense fallback={<PropertyDetailSkeleton />}>\n                <PropertyDetail />\n              </Suspense>\n            } />\n            <Route path=\"/certification\" element={<Certification />} />\n            <Route path=\"/auth\" element={<Auth />} />\n            <Route path=\"/reset-password\" element={<ResetPassword />} />\n            <Route path=\"/guide\" element={<Guide />} />\n            <Route\n              path=\"/profil\" \n              element={\n                <ProtectedRoute>\n                  <Profile />\n                </ProtectedRoute>\n              } \n            />\n            <Route \n              path=\"/dashboard\" \n              element={\n                <ProtectedRoute>\n                  <Suspense fallback={<PageSkeleton />}>\n                    <Dashboard />\n                  </Suspense>\n                </ProtectedRoute>\n              } \n            />\n            <Route \n              path=\"/admin\" \n              element={\n                <ProtectedRoute requiredRoles={['admin', 'super_admin']}>\n                  <Suspense fallback={<PageSkeleton />}>\n                    <AdminDashboard />\n                  </Suspense>\n                </ProtectedRoute>\n              } \n            />\n            <Route \n              path=\"/admin/certifications\" \n              element={\n                <ProtectedRoute requiredRoles={['admin', 'super_admin']}>\n                  <Suspense fallback={<PageSkeleton />}>\n                    <AdminCertifications />\n                  </Suspense>\n                </ProtectedRoute>\n              } \n            />\n            <Route \n              path=\"/analytics\" \n              element={\n                <ProtectedRoute allowedUserTypes={['proprietaire', 'agence']}>\n                  <Suspense fallback={<PageSkeleton />}>\n                    <OwnerDashboard />\n                  </Suspense>\n                </ProtectedRoute>\n              } \n            />\n            <Route \n              path=\"/dashboard/tenant\" \n              element={\n                <ProtectedRoute allowedUserTypes={['locataire']}>\n                  <Suspense fallback={<PageSkeleton />}>\n                    <TenantDashboard />\n                  </Suspense>\n                </ProtectedRoute>\n              } \n            />\n          <Route \n            path=\"/tiers-dashboard\" \n            element={\n              <ProtectedRoute requiredRoles={['tiers_de_confiance']}>\n                <TiersDeConfianceDashboard />\n              </ProtectedRoute>\n            } \n          />\n          <Route \n            path=\"/dashboard/agence\" \n            element={\n              <ProtectedRoute allowedUserTypes={['agence']}>\n                <Suspense fallback={<PageSkeleton />}>\n                  <AgencyDashboard />\n                </Suspense>\n              </ProtectedRoute>\n            } \n          />\n          <Route \n            path=\"/my-mandates\" \n            element={\n              <ProtectedRoute allowedUserTypes={['proprietaire', 'agence']}>\n                <Suspense fallback={<PageSkeleton />}>\n                  <MyMandates />\n                </Suspense>\n              </ProtectedRoute>\n            } \n          />\n          <Route \n            path=\"/mandates/help\" \n            element={\n              <ProtectedRoute allowedUserTypes={['proprietaire', 'agence']}>\n                <MandatesHelp />\n              </ProtectedRoute>\n            } \n          />\n          <Route \n            path=\"/owner/guest-messages\" \n            element={\n              <ProtectedRoute allowedUserTypes={['proprietaire', 'agence']}>\n                <GuestMessagesInbox />\n              </ProtectedRoute>\n            } \n          />\n            <Route\n              path=\"/favoris\" \n              element={\n                <ProtectedRoute>\n                  <Favorites />\n                </ProtectedRoute>\n              } \n            />\n            <Route \n              path=\"/messages\" \n              element={\n                <ProtectedRoute>\n                  <Suspense fallback={<PageSkeleton />}>\n                    <Messages />\n                  </Suspense>\n                </ProtectedRoute>\n              } \n            />\n            <Route \n              path=\"/mes-biens\" \n              element={\n                <ProtectedRoute allowedUserTypes={['proprietaire', 'agence']}>\n                  <Suspense fallback={<PageSkeleton />}>\n                    <MyProperties />\n                  </Suspense>\n                </ProtectedRoute>\n              } \n            />\n            <Route \n              path=\"/ajouter-bien\" \n              element={\n                <ProtectedRoute allowedUserTypes={['proprietaire', 'agence']}>\n                  <Suspense fallback={<PageSkeleton />}>\n                    <AddProperty />\n                  </Suspense>\n                </ProtectedRoute>\n              } \n            />\n            <Route \n              path=\"/biens/:id/modifier\" \n              element={\n                <ProtectedRoute allowedUserTypes={['proprietaire', 'agence']}>\n                  <Suspense fallback={<PageSkeleton />}>\n                    <EditProperty />\n                  </Suspense>\n                </ProtectedRoute>\n              } \n            />\n            <Route \n              path=\"/biens/:id/candidatures\" \n              element={\n                <ProtectedRoute allowedUserTypes={['proprietaire', 'agence']}>\n                  <PropertyApplications />\n                </ProtectedRoute>\n              } \n            />\n            <Route \n              path=\"/maintenance/:propertyId\" \n              element={\n                <ProtectedRoute>\n                  <Suspense fallback={<PageSkeleton />}>\n                    <Maintenance />\n                  </Suspense>\n                </ProtectedRoute>\n              } \n            />\n            <Route \n              path=\"/application/:propertyId\" \n              element={\n                <ProtectedRoute>\n                  <Suspense fallback={<PageSkeleton />}>\n                    <Application />\n                  </Suspense>\n                </ProtectedRoute>\n              } \n            />\n            <Route \n              path=\"/schedule-visit/:propertyId\" \n              element={\n                <ProtectedRoute>\n                  <Suspense fallback={<PageSkeleton />}>\n                    <ScheduleVisit />\n                  </Suspense>\n                </ProtectedRoute>\n              } \n            />\n            <Route \n              path=\"/candidatures\"\n              element={\n                <ProtectedRoute>\n                  <Suspense fallback={<PageSkeleton />}>\n                    <Applications />\n                  </Suspense>\n                </ProtectedRoute>\n              } \n            />\n            <Route \n              path=\"/baux\" \n              element={\n                <ProtectedRoute>\n                  <Suspense fallback={<PageSkeleton />}>\n                    <Leases />\n                  </Suspense>\n                </ProtectedRoute>\n              } \n            />\n            <Route \n              path=\"/payments\" \n              element={\n                <ProtectedRoute>\n                  <Suspense fallback={<PageSkeleton />}>\n                    <Payments />\n                  </Suspense>\n                </ProtectedRoute>\n              } \n            />\n            <Route \n              path=\"/verification\" \n              element={\n                <ProtectedRoute>\n                  <Verification />\n                </ProtectedRoute>\n              } \n            />\n            <Route path=\"/user/:userId/reviews\" element={<UserReviews />} />\n            <Route path=\"/publier\" element={<Publier />} />\n            <Route path=\"/a-propos\" element={<APropos />} />\n            <Route path=\"/conditions\" element={<Conditions />} />\n            <Route path=\"/confidentialite\" element={<Confidentialite />} />\n            <Route path=\"/mentions-legales\" element={<MentionsLegales />} />\n            <Route path=\"/certification-faq\" element={<CertificationFAQ />} />\n            <Route path=\"/tarifs\" element={<Tarifs />} />\n            \n            <Route \n              path=\"/populate-images\" \n              element={\n                <ProtectedRoute requiredRoles={['admin', 'super_admin']}>\n                  <PopulateImages />\n                </ProtectedRoute>\n              } \n            />\n            <Route \n              path=\"/test-cryptoneo\" \n              element={\n                <ProtectedRoute requiredRoles={['admin', 'super_admin']}>\n                  <TestCryptoNeo />\n                </ProtectedRoute>\n              } \n            />\n            {/* ADD ALL CUSTOM ROUTES ABOVE THE CATCH-ALL \"*\" ROUTE */}\n            <Route path=\"*\" element={<NotFound />} />\n          </Routes>\n        </div>\n      </main>\n      <BottomNavigation />\n    </>\n  );\n};\n\nconst App = () => (\n  <HelmetProvider>\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <Toaster />\n        <Sonner />\n        <BrowserRouter>\n          <AuthProvider>\n            <AppContent />\n          </AuthProvider>\n        </BrowserRouter>\n      </TooltipProvider>\n    </QueryClientProvider>\n  </HelmetProvider>\n);\n\nexport default App;\n","import React from 'react';\nimport { createRoot } from \"react-dom/client\";\nimport { QueryClientProvider } from '@tanstack/react-query';\nimport * as Sentry from \"@sentry/react\";\nimport { queryClient } from '@/lib/queryClient';\nimport { initPerformanceMonitoring } from '@/lib/analytics';\nimport App from \"./App.tsx\";\nimport \"./index.css\";\n\n// Initialize Sentry in production\nif (import.meta.env.PROD) {\n  Sentry.init({\n    dsn: import.meta.env.VITE_SENTRY_DSN || \"\",\n    environment: import.meta.env.MODE,\n    \n    // Performance monitoring\n    integrations: [\n      Sentry.browserTracingIntegration(),\n      Sentry.replayIntegration({\n        maskAllText: false,\n        blockAllMedia: false,\n      }),\n    ],\n    \n    // Performance traces\n    tracesSampleRate: 1.0, // 100% in production\n    \n    // Session replays\n    replaysSessionSampleRate: 0.1, // 10% of normal sessions\n    replaysOnErrorSampleRate: 1.0, // 100% of error sessions\n    \n    // Context enrichment\n    beforeSend(event, hint) {\n      // Add user ID if available\n      const userId = localStorage.getItem('supabase.auth.token');\n      if (userId) {\n        event.user = { ...event.user, id: userId };\n      }\n      \n      // Filter out benign errors\n      if (event.exception?.values?.[0]?.value?.includes('ResizeObserver')) {\n        return null;\n      }\n      \n      return event;\n    },\n    \n    // Ignore specific errors\n    ignoreErrors: [\n      'ResizeObserver loop limit exceeded',\n      'Non-Error promise rejection captured',\n      'ChunkLoadError',\n    ],\n  });\n\n  // Initialize performance monitoring\n  initPerformanceMonitoring();\n}\n\ncreateRoot(document.getElementById(\"root\")!).render(\n  <React.StrictMode>\n    <QueryClientProvider client={queryClient}>\n      <App />\n    </QueryClientProvider>\n  </React.StrictMode>\n);\n"],"file":"assets/index-LMib0YFl.js"}